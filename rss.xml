<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Brian Friel]]></title><description><![CDATA[Brian Friel is a San Francisco-based software engineer]]></description><link>https://brianfriel.xyz</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 27 Nov 2023 22:22:54 GMT</lastBuildDate><item><title><![CDATA[The Complete Guide to Phantom Deeplinks]]></title><description><![CDATA[This article was originally published on phantom.app. Introduction Solana’s fast and cheap transactions make it the perfect testing ground…]]></description><link>https://brianfriel.xyz/the-complete-guide-to-phantom-deeplinks/</link><guid isPermaLink="false">https://brianfriel.xyz/the-complete-guide-to-phantom-deeplinks/</guid><pubDate>Thu, 25 Aug 2022 01:22:04 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;This article was originally published on &lt;a href=&quot;https://phantom.app/blog/the-complete-guide-to-phantom-deeplinks&quot;&gt;phantom.app&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Solana’s fast and cheap transactions make it the perfect testing ground for novel mobile applications. Until recently, however, there was no way for native mobile applications to interact with existing Solana wallets. In order to connect to users, Solana dapps had to be web-based. In a mobile context, these web dapps were most often viewed within a wallet’s in-app browser.&lt;/p&gt;
&lt;p&gt;All of this changed in Phantom &lt;code class=&quot;language-text&quot;&gt;v22.04.01&lt;/code&gt; with the release of Phantom &lt;strong&gt;deeplinks&lt;/strong&gt;. With deeplinks, iOS and Android apps can now interact directly with the Phantom mobile app to connect, sign, and send transactions. In this tutorial, we’ll walk through how you can integrate Phantom deeplinks into your Solana dapp.&lt;/p&gt;
&lt;h2&gt;What are deeplinks?&lt;/h2&gt;
&lt;p&gt;If you’ve ever created a link using an HTML &lt;code class=&quot;language-text&quot;&gt;&amp;lt;a&gt;&lt;/code&gt; tag, you’re probably familiar with the &lt;code class=&quot;language-text&quot;&gt;mailto:&lt;/code&gt; scheme. Unlike a normal url that directs users straight to a website (i.e. &lt;code class=&quot;language-text&quot;&gt;href=&quot;&amp;lt;https://google.com&gt;&quot;&lt;/code&gt;), the &lt;code class=&quot;language-text&quot;&gt;mailto:&lt;/code&gt; scheme tells the operating system that it should instead open the email application. Once open, your email app can then parse the url to present a rich user experience. For example, the url &lt;code class=&quot;language-text&quot;&gt;href=&quot;mailto:brian@phantom.app?subject=Deeplinking Tutorial Feedback&amp;amp;body=Hi Brian,&quot;&lt;/code&gt; will &lt;a href=&quot;mailto:brian@phantom.app?subject=Deeplinking Tutorial Feedback&amp;body=Hi Brian,&quot;&gt;compose an email to me&lt;/a&gt; with both a subject and body already pre-configured. These url schemes are often referred to as &lt;a href=&quot;https://en.wikipedia.org/wiki/Mobile_deep_linking&quot;&gt;deeplinks&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Just like using the &lt;code class=&quot;language-text&quot;&gt;mailto:&lt;/code&gt; scheme, other applications can also link to each other by using their own custom url schemes. When developing a mobile application, we can specify our own protocol handler (such as: &lt;code class=&quot;language-text&quot;&gt;discord://&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;phantom://&lt;/code&gt;) and create deeplinks that tell the operating system to open our native app.&lt;/p&gt;
&lt;p&gt;We can even take it a step further: using a concept known as &lt;a href=&quot;https://developer.apple.com/ios/universal-links/&quot;&gt;universal links&lt;/a&gt;, we can create deeplinks based on regular &lt;code class=&quot;language-text&quot;&gt;https://&lt;/code&gt; links for a domain that we control. This comes with the added benefits of being more secure, as well as a better user experience in cases where users have yet to install our app.&lt;/p&gt;
&lt;p&gt;Phantom supports both universal links (e.g. &lt;code class=&quot;language-text&quot;&gt;https://phantom.app/ul/&amp;lt;version&gt;/&amp;lt;method&gt;&lt;/code&gt;) as well as a custom protocol handler (&lt;code class=&quot;language-text&quot;&gt;phantom://&amp;lt;version&gt;/&amp;lt;method&gt;&lt;/code&gt;). For the remainder of this tutorial, we’ll focus on Phantom’s universal links and refer to these collectively as &lt;strong&gt;deeplinks&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;What we’re building&lt;/h2&gt;
&lt;p&gt;To showcase the power of Phantom deeplinks, we’ll be creating a mobile app that can interact with a program (aka smart contract) on Solana. Specifically, we’re going to be building a mobile-version of the movie reviews dapp from &lt;a href=&quot;https://github.com/Unboxed-Software/solana-course/blob/main/README.md#module-1---client-interaction-with-the-solana-network&quot;&gt;module 1 of the Solana Development Course&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For the purposes of this tutorial, we won’t be writing any Solana programs ourselves. The Solana Development Course already does a great job of teaching this! Instead, we’ll be writing a mobile app that interacts with the &lt;a href=&quot;https://solscan.io/account/CenYq6bDRB7p73EjsPEpiYN7uveyPUTdXkDkgUduboaN?cluster=devnet&quot;&gt;course’s program&lt;/a&gt; that’s already deployed to devnet. Once complete, our app will let users sign-in and send reviews using Phantom. All in all, it’ll look a little something like this:&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;Full Flow&quot; src=&quot;https://www.youtube.com/embed/tiYizz9h3YE?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;We’ll be building this app with &lt;a href=&quot;https://reactnative.dev/&quot;&gt;React Native&lt;/a&gt; and &lt;a href=&quot;https://docs.expo.dev/workflow/expo-cli/&quot;&gt;Expo CLI&lt;/a&gt;. If you’re new to mobile development, Expo makes it easy to get started within minutes. The majority of code we’ll be writing will be indistinguishable from standard &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; and &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;TypeScript&lt;/a&gt;. An added benefit of using Expo with React Native is that our app will be ready to use across both iOS and Android devices.&lt;/p&gt;
&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This tutorial covers 3 main sections:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.notion.so/The-Complete-Guide-to-Phantom-Deeplinks-f7d0f1ea59a9420eb32a53560cf1bfc5&quot;&gt;Creating our mobile app using React Native and Expo CLI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.notion.so/The-Complete-Guide-to-Phantom-Deeplinks-f7d0f1ea59a9420eb32a53560cf1bfc5&quot;&gt;Connecting our app to Phantom&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.notion.so/The-Complete-Guide-to-Phantom-Deeplinks-f7d0f1ea59a9420eb32a53560cf1bfc5&quot;&gt;Signing and sending transactions via Phantom&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Creating our mobile app using React Native and Expo CLI&lt;/h2&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;Before we can build anything, we first need to install the necessary command-line tools. Chief amongst these are &lt;a href=&quot;https://nodejs.org/en/&quot;&gt;Node.js&lt;/a&gt; and &lt;a href=&quot;https://docs.expo.dev/workflow/expo-cli/#installation&quot;&gt;Expo CLI&lt;/a&gt;. If you don’t have Node yet, I recommend installing it via &lt;a href=&quot;https://github.com/nvm-sh/nvm&quot;&gt;Node Version Manager (NVM)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Before proceeding, you should be able to run the following commands in your terminal. I developed mine with the following versions:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;node -v
# output: v16.15.0
expo-cli --version
# output: 5.5.1&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;In addition to our laptop’s development environment, we’ll also want a phone to test our React Native app. One of the many benefits of Expo is that it makes it easy to test your app on a physical device throughout the development process. Before proceeding, make sure to install both the &lt;a href=&quot;https://docs.expo.dev/guides/testing-on-devices/&quot;&gt;Expo&lt;/a&gt; and &lt;a href=&quot;https://phantom.app/download&quot;&gt;Phantom&lt;/a&gt; mobile apps from your phone’s official app store.&lt;/p&gt;
&lt;h3&gt;Scaffolding our React Native app&lt;/h3&gt;
&lt;p&gt;With the necessary tools installed, we can get started with our app. To recap: we’re going to be building a mobile app for the movie reviews program in the &lt;a href=&quot;https://github.com/Unboxed-Software/solana-course/blob/main/README.md#module-1---client-interaction-with-the-solana-network&quot;&gt;Solana Development Course&lt;/a&gt;. Instead of rehashing the lessons from that course, I’ve added the necessary components to a starter repo located on our &lt;a href=&quot;https://github.com/phantom-labs/deep-links-movie-tutorial.git&quot;&gt;GitHub&lt;/a&gt;. To get started, simply fork the repo and clone it to your local developer environment:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;git clone -b starter https://github.com/phantom-labs/deep-links-movie-tutorial.git&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Then, change into the project directory and install the necessary dependencies:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;cd deep-links-movie-tutorial
yarn&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Once you’ve installed the dependencies, you can fire up the app with:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;yarn start&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;From here, your terminal should present you with a large QR code. Go ahead and grab your phone, open the camera app, and scan the QR code that is present on your laptop’s terminal. If you’re using an Android phone, you may need to scan it from within the Expo mobile app. If all goes well, your code should begin bundling and your phone will open the mobile app from the video above.&lt;/p&gt;
&lt;p&gt;Go ahead and try scrolling and searching within the app. If you’ve already completed the Solana Development Course’s module on &lt;a href=&quot;https://github.com/Unboxed-Software/solana-course/blob/main/content/deserialize-custom-data.md&quot;&gt;Deserializing Custom Account Data&lt;/a&gt;, then this should look pretty familiar. Here, our app is fetching reviews from the &lt;a href=&quot;https://solscan.io/account/CenYq6bDRB7p73EjsPEpiYN7uveyPUTdXkDkgUduboaN?cluster=devnet&quot;&gt;course’s program&lt;/a&gt; and then paginating and filtering the results based on how far you scroll or what you search. If you take a look at our starter repo, you’ll see that the &lt;code class=&quot;language-text&quot;&gt;MovieList.tsx&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;MovieCoordinator.ts&lt;/code&gt; components from the course have already been integrated into our React Native app under the &lt;code class=&quot;language-text&quot;&gt;components&lt;/code&gt; directory. For the purposes of this tutorial, we won’t be going into detail over how these are working under the hood. If you’re interested in learning more, the &lt;a href=&quot;https://github.com/Unboxed-Software/solana-course/blob/main/README.md#module-1---client-interaction-with-the-solana-network&quot;&gt;Solana Development Course&lt;/a&gt; already does a great job teaching how all this works!&lt;/p&gt;
&lt;p&gt;After playing around with our app, we can see that we’re already reading and displaying movies reviews that are stored on Solana. How would we go about adding new reviews? If you were to tap on the “Connect Phantom” button, you’ll see that nothing happens. Let’s see what’s going on by opening up the &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file at the root of directory:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import &amp;quot;react-native-get-random-values&amp;quot;
import &amp;quot;react-native-url-polyfill/auto&amp;quot;
import { Buffer } from &amp;quot;buffer&amp;quot;
global.Buffer = global.Buffer || Buffer
import { StatusBar } from &amp;quot;expo-status-bar&amp;quot;
import React, { useRef, useState } from &amp;quot;react&amp;quot;
import { ActivityIndicator, StyleSheet, Text, View } from &amp;quot;react-native&amp;quot;
import {
  clusterApiUrl,
  Connection,
  PublicKey,
  Transaction,
} from &amp;quot;@solana/web3.js&amp;quot;
import MovieList from &amp;quot;./components/MovieList&amp;quot;
import Button from &amp;quot;./components/Button&amp;quot;
import { SafeAreaProvider, SafeAreaView } from &amp;quot;react-native-safe-area-context&amp;quot;
import ActionSheet from &amp;quot;react-native-actions-sheet&amp;quot;
import AddReviewSheet from &amp;quot;./components/AddReviewSheet&amp;quot;
import Toast from &amp;quot;react-native-toast-message&amp;quot;
import { toastConfig } from &amp;quot;./components/ToastConfig&amp;quot;
import { COLORS } from &amp;quot;./constants&amp;quot;
import * as Linking from &amp;quot;expo-linking&amp;quot;

const connection = new Connection(clusterApiUrl(&amp;quot;devnet&amp;quot;))

export default function App() {
  const [phantomWalletPublicKey, setPhantomWalletPublicKey] =
    useState&amp;lt;PublicKey | null&amp;gt;(null)

  const [submitting, setSubmitting] = useState(false)

  const actionSheetRef = useRef&amp;lt;ActionSheet&amp;gt;(null)

  // Initiate a new connection to Phantom
  const connect = async () =&amp;gt; {}

  // Initiate a disconnect from Phantom
  const disconnect = async () =&amp;gt; {}

  // Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
  const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {}

  // Open the &amp;#39;Add a Review&amp;#39; sheet defined in `components/AddReviewSheet.tsx`
  const openAddReviewSheet = () =&amp;gt; {
    actionSheetRef.current?.show()
  }

  return (
    &amp;lt;SafeAreaProvider&amp;gt;
      &amp;lt;SafeAreaView style={styles.container}&amp;gt;
        &amp;lt;View style={styles.header}&amp;gt;
          {phantomWalletPublicKey ? (
            &amp;lt;&amp;gt;
              &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
                &amp;lt;View style={styles.greenDot} /&amp;gt;
                &amp;lt;Text
                  style={styles.text}
                  numberOfLines={1}
                  ellipsizeMode=&amp;quot;middle&amp;quot;
                &amp;gt;
                  {`Connected to: ${phantomWalletPublicKey.toString()}`}
                &amp;lt;/Text&amp;gt;
              &amp;lt;/View&amp;gt;
              &amp;lt;View style={styles.row}&amp;gt;
                &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
                &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
              &amp;lt;/View&amp;gt;
            &amp;lt;/&amp;gt;
          ) : (
            &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
              &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
            &amp;lt;/View&amp;gt;
          )}
        &amp;lt;/View&amp;gt;
        {submitting &amp;amp;&amp;amp; (
          &amp;lt;ActivityIndicator
            color={COLORS.WHITE}
            size=&amp;quot;large&amp;quot;
            style={styles.spinner}
          /&amp;gt;
        )}
        &amp;lt;MovieList connection={connection} /&amp;gt;
        &amp;lt;AddReviewSheet
          actionSheetRef={actionSheetRef}
          phantomWalletPublicKey={phantomWalletPublicKey}
          signAndSendTransaction={signAndSendTransaction}
        /&amp;gt;
        &amp;lt;Toast config={toastConfig} /&amp;gt;
        &amp;lt;StatusBar style=&amp;quot;auto&amp;quot; /&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/SafeAreaProvider&amp;gt;
  )
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.DARK_GREY,
    flexGrow: 1,
    position: &amp;quot;relative&amp;quot;,
  },
  greenDot: {
    height: 8,
    width: 8,
    borderRadius: 10,
    marginRight: 5,
    backgroundColor: COLORS.GREEN,
  },
  header: {
    width: &amp;quot;95%&amp;quot;,
    marginLeft: &amp;quot;auto&amp;quot;,
    marginRight: &amp;quot;auto&amp;quot;,
  },
  row: {
    flexDirection: &amp;quot;row&amp;quot;,
    justifyContent: &amp;quot;space-between&amp;quot;,
    marginBottom: 5,
  },
  spinner: {
    position: &amp;quot;absolute&amp;quot;,
    alignSelf: &amp;quot;center&amp;quot;,
    top: &amp;quot;50%&amp;quot;,
    zIndex: 1000,
  },
  text: {
    color: COLORS.LIGHT_GREY,
    width: &amp;quot;100%&amp;quot;,
  },
  wallet: {
    alignItems: &amp;quot;center&amp;quot;,
    margin: 10,
    marginBottom: 15,
  },
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;We’ll be focusing mostly on this file for the majority of our walkthrough. Looking at our &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; component, you can see right off the bat that our app is looking to store a &lt;code class=&quot;language-text&quot;&gt;phantomWalletPublicKey&lt;/code&gt;. If we look down at what is returned from this component, you’ll see that if this &lt;code class=&quot;language-text&quot;&gt;phantomWalletPublicKey&lt;/code&gt; exists, we’ll render a button that let’s us add a new movie review. Otherwise, we’ll return a “Connect Phantom” button:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;{
  phantomWalletPublicKey ? (
    &amp;lt;&amp;gt;
      &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
        &amp;lt;View style={styles.greenDot} /&amp;gt;
        &amp;lt;Text style={styles.text} numberOfLines={1} ellipsizeMode=&amp;quot;middle&amp;quot;&amp;gt;
          {`Connected to: ${phantomWalletPublicKey.toString()}`}
        &amp;lt;/Text&amp;gt;
      &amp;lt;/View&amp;gt;
      &amp;lt;View style={styles.row}&amp;gt;
        &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
        &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
      &amp;lt;/View&amp;gt;
    &amp;lt;/&amp;gt;
  ) : (
    &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
      &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
    &amp;lt;/View&amp;gt;
  )
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;We can also see that our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; function is currently lacking functionality:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Initiate a new connection to Phantom
const connect = async () =&amp;gt; {
  console.log(&amp;quot;connect&amp;quot;)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Let’s go ahead and change that!&lt;/p&gt;
&lt;h2&gt;Connecting our app to Phantom&lt;/h2&gt;
&lt;p&gt;When we first introduced the concept of deeplinking, we compared it to clicking on a &lt;code class=&quot;language-text&quot;&gt;mailto:&lt;/code&gt; link. In React Native, however, there are no &lt;code class=&quot;language-text&quot;&gt;&amp;lt;a&gt;&lt;/code&gt; tags for us to work with. Instead, we can use the &lt;a href=&quot;https://docs.expo.dev/versions/latest/sdk/linking/&quot;&gt;expo-linking&lt;/a&gt; package to create and open URLs from within our app.&lt;/p&gt;
&lt;p&gt;Let’s use this package to try and connect to Phantom from within our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; function. Taking a look at &lt;a href=&quot;https://docs.phantom.app/integrating/deeplinks-ios-and-android/provider-methods/connect&quot;&gt;Phantom’s documentation&lt;/a&gt;, we can see that the URL needed to deeplink into Phantom’s connect method is: &lt;a href=&quot;https://phantom.app/ul/v1/connect&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;https://phantom.app/ul/v1/connect&lt;/code&gt;&lt;/a&gt;. Let’s try a naive approach by replacing our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; method with the following:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Initiate a new connection to Phantom
const connect = async () =&amp;gt; {
  const url = &amp;quot;https://phantom.app/ul/v1/connect&amp;quot;
  Linking.openURL(url)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Turning back to our phone, let’s try tapping on our “Connect Phantom” button again. This time, we should instantly teleport over to our Phantom app. Pretty cool!&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/P_T0Kgzlunc?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;While our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; deeplink jumped us over to the Phantom app, it didn’t quite work as expected. When we opened Phantom, we were never prompted with a connection request. If we switch back over to our dapp, it appears as if nothing had happened.&lt;/p&gt;
&lt;p&gt;Taking another look at the Phantom documentation, it’s clear that our connection request requires us to specify four &lt;a href=&quot;https://docs.phantom.app/integrating/deeplinks-ios-and-android/provider-methods/connect#query-string-parameters&quot;&gt;additional parameters&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;app_url&lt;/code&gt; : A URL used to fetch app metadata (i.e. title, icon) using the same properties found in &lt;a href=&quot;notion://www.notion.so/best-practices/displaying-your-app&quot;&gt;Displaying Your App&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt; : A public key used for end-to-end encryption.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;redirect_link&lt;/code&gt; : The URI where Phantom should redirect the user upon connection.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;cluster&lt;/code&gt; : The network that should be used for subsequent interactions.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;app_url&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;cluster&lt;/code&gt; are both straightforward. For the &lt;code class=&quot;language-text&quot;&gt;app_url&lt;/code&gt;, we just need to pass a URL that represents our app. I created a dummy site at &lt;a href=&quot;https://deeplink-movie-tutorial-dummy-site.vercel.app/&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;https://deeplink-movie-tutorial-dummy-site.vercel.app/&lt;/code&gt;&lt;/a&gt;, but feel free to add your own website here. When it comes to selecting a &lt;code class=&quot;language-text&quot;&gt;cluster&lt;/code&gt;, we’ll want to specify &lt;code class=&quot;language-text&quot;&gt;devnet&lt;/code&gt;. This is because the program we are interacting with has already been deployed on devnet.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Initiate a new connection to Phantom
const connect = async () =&amp;gt; {
  // TODO
  const params = {
    cluster: &amp;quot;devnet&amp;quot;,
    app_url: &amp;quot;https://deeplink-movie-tutorial-dummy-site.vercel.app/&amp;quot;,
  }

  const url = &amp;quot;https://phantom.app/ul/v1/connect&amp;quot;
  Linking.openURL(url)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Before we dive deeper into how we can configure a proper connection request, let’s take a minute to switch our wallet’s network over to &lt;code class=&quot;language-text&quot;&gt;devnet&lt;/code&gt;. We’ll need this to connect and sign &lt;code class=&quot;language-text&quot;&gt;devnet&lt;/code&gt; requests coming from our app. You can change this within Phantom’s settings by following the steps in this video:&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/3h51s4igs-o?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Turning back to our developer environment, the last two parameters we have to specify are &lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;redirect_link&lt;/code&gt;. We will need both of these not only for our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request, but also for all subsequent requests to Phantom. Let’s look at what each of these entails.&lt;/p&gt;
&lt;h3&gt;Handling Encryption&lt;/h3&gt;
&lt;p&gt;When using deeplinks, all communication between our app and Phantom will be encrypted by default. We can achieve this encryption via a simple key exchange known as &lt;a href=&quot;https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange&quot;&gt;Diffie-Hellman&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In the same way that a Phantom user has a &lt;strong&gt;keypair&lt;/strong&gt; made of up a &lt;strong&gt;public key&lt;/strong&gt; (i.e. their Solana address) and a &lt;strong&gt;private key&lt;/strong&gt; (managed by Phantom), our app will create its own keypair specific to its connection with Phantom. Under the Diffie-Hellman exchange, our app will then share its public key in the initial &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request to Phantom. Once it receives our public key, Phantom will then generate its own keypair that’s unique to our app. When sending a &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; response back to our app, Phantom will also share its corresponding public key with our app.&lt;/p&gt;
&lt;p&gt;Once both parties have each other’s public keys, they can combine them with their own private keys that they &lt;strong&gt;&lt;em&gt;did not&lt;/em&gt;&lt;/strong&gt; share and end up with the same result. The beauty of this process is that while neither party shared any sensitive information (both only shared public keys), they can now reliably create the same secret that can be used for encrypting messages. We’ll refer to this secret as the &lt;strong&gt;shared secret.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a386b2a9123acd53c892ef721726530b/373fb/diffie-hellman.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQUlEQVQoz32SXUtCQRCG/efdRNBviCioH2A3fUBXCVoXEVpalEVhKmj5ec7p7O7MPrFHO6VZAwO7M7Mvz8xswXvPsoXQqvhijV95Lnxdmn2l3hU+rM8L1CtWDKcvB9wPqqSS4NWjqnMhQSTORYNnguo9h3XLzoWhNVREJKM01jJJEzZLxxRvL3mPJ6gIxliMjZhOr2h3tojiBqrmmzD445vjumOJjGYExhhEPU6h9gqtARhHlvvqYEaY5HQLLf+0QGitzWgg5F2Izs//zzUXrLTLnDwdMUpHmWAw5wQncPYAzR6kGWGgmlGKJhjbW1hMYZYQ9uu7rJfXeBo28wJRJbaGjdIexbsKg2SKOIexDmtjplGVdnf79wzDNl/Gz9z0a4zTUS6YbVkNtf45j6MGiYv47zcttPzXH1vxLF/CsgfCT8bFuvBA5L0kAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Diffie-Hellman&quot;
        title=&quot;Diffie-Hellman&quot;
        src=&quot;/static/a386b2a9123acd53c892ef721726530b/fcda8/diffie-hellman.png&quot;
        srcset=&quot;/static/a386b2a9123acd53c892ef721726530b/12f09/diffie-hellman.png 148w,
/static/a386b2a9123acd53c892ef721726530b/e4a3f/diffie-hellman.png 295w,
/static/a386b2a9123acd53c892ef721726530b/fcda8/diffie-hellman.png 590w,
/static/a386b2a9123acd53c892ef721726530b/efc66/diffie-hellman.png 885w,
/static/a386b2a9123acd53c892ef721726530b/c83ae/diffie-hellman.png 1180w,
/static/a386b2a9123acd53c892ef721726530b/373fb/diffie-hellman.png 2068w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;To begin implementing Diffie-Hellman, we’ll need a way of generating a x25519 keypair. We recommend using &lt;a href=&quot;https://tweetnacl.js.org/#/&quot;&gt;TweetNaCl&lt;/a&gt; which is already installed with our starter repo. In addition to importing TweetNaCl, we’ll need to keep track of the public key we generate as well as the shared secret we’ll get when Phantom sends us a response. When we send our public key as a &lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt; parameter, we’ll also need to encode with with &lt;code class=&quot;language-text&quot;&gt;bs58&lt;/code&gt;. Let’s update our &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file with the following:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import &amp;quot;react-native-get-random-values&amp;quot;
import &amp;quot;react-native-url-polyfill/auto&amp;quot;
import { Buffer } from &amp;quot;buffer&amp;quot;
global.Buffer = global.Buffer || Buffer
import { StatusBar } from &amp;quot;expo-status-bar&amp;quot;
import React, { useRef, useState } from &amp;quot;react&amp;quot;
import { ActivityIndicator, StyleSheet, Text, View } from &amp;quot;react-native&amp;quot;
import {
  clusterApiUrl,
  Connection,
  PublicKey,
  Transaction,
} from &amp;quot;@solana/web3.js&amp;quot;
import MovieList from &amp;quot;./components/MovieList&amp;quot;
import Button from &amp;quot;./components/Button&amp;quot;
import { SafeAreaProvider, SafeAreaView } from &amp;quot;react-native-safe-area-context&amp;quot;
import ActionSheet from &amp;quot;react-native-actions-sheet&amp;quot;
import AddReviewSheet from &amp;quot;./components/AddReviewSheet&amp;quot;
import Toast from &amp;quot;react-native-toast-message&amp;quot;
import { toastConfig } from &amp;quot;./components/ToastConfig&amp;quot;
import { COLORS } from &amp;quot;./constants&amp;quot;
import * as Linking from &amp;quot;expo-linking&amp;quot;
import nacl from &amp;quot;tweetnacl&amp;quot;
import bs58 from &amp;quot;bs58&amp;quot;

const connection = new Connection(clusterApiUrl(&amp;quot;devnet&amp;quot;))

export default function App() {
  const [phantomWalletPublicKey, setPhantomWalletPublicKey] =
    useState&amp;lt;PublicKey | null&amp;gt;(null)

  const [submitting, setSubmitting] = useState(false)

  const actionSheetRef = useRef&amp;lt;ActionSheet&amp;gt;(null)

  const [dappKeyPair] = useState(nacl.box.keyPair())
  const [sharedSecret, setSharedSecret] = useState&amp;lt;Uint8Array&amp;gt;()

  // Initiate a new connection to Phantom
  const connect = async () =&amp;gt; {
    // TODO
    const params = {
      cluster: &amp;quot;devnet&amp;quot;,
      app_url: &amp;quot;https://deeplink-movie-tutorial-dummy-site.vercel.app/&amp;quot;,
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
    }

    const url = &amp;quot;https://phantom.app/ul/v1/connect&amp;quot;
    Linking.openURL(url)
  }

  // Initiate a disconnect from Phantom
  const disconnect = async () =&amp;gt; {
    console.log(&amp;quot;disconnect&amp;quot;)
  }

  // Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
  const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {
    console.log(&amp;quot;signAndSendTransaction&amp;quot;)
  }

  // Open the &amp;#39;Add a Review&amp;#39; sheet defined in `components/AddReviewSheet.tsx`
  const openAddReviewSheet = () =&amp;gt; {
    actionSheetRef.current?.show()
  }

  return (
    &amp;lt;SafeAreaProvider&amp;gt;
      &amp;lt;SafeAreaView style={styles.container}&amp;gt;
        &amp;lt;View style={styles.header}&amp;gt;
          {phantomWalletPublicKey ? (
            &amp;lt;&amp;gt;
              &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
                &amp;lt;View style={styles.greenDot} /&amp;gt;
                &amp;lt;Text
                  style={styles.text}
                  numberOfLines={1}
                  ellipsizeMode=&amp;quot;middle&amp;quot;
                &amp;gt;
                  {`Connected to: ${phantomWalletPublicKey.toString()}`}
                &amp;lt;/Text&amp;gt;
              &amp;lt;/View&amp;gt;
              &amp;lt;View style={styles.row}&amp;gt;
                &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
                &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
              &amp;lt;/View&amp;gt;
            &amp;lt;/&amp;gt;
          ) : (
            &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
              &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
            &amp;lt;/View&amp;gt;
          )}
        &amp;lt;/View&amp;gt;
        {submitting &amp;amp;&amp;amp; (
          &amp;lt;ActivityIndicator
            color={COLORS.WHITE}
            size=&amp;quot;large&amp;quot;
            style={styles.spinner}
          /&amp;gt;
        )}
        &amp;lt;MovieList connection={connection} /&amp;gt;
        &amp;lt;AddReviewSheet
          actionSheetRef={actionSheetRef}
          phantomWalletPublicKey={phantomWalletPublicKey}
          signAndSendTransaction={signAndSendTransaction}
        /&amp;gt;
        &amp;lt;Toast config={toastConfig} /&amp;gt;
        &amp;lt;StatusBar style=&amp;quot;auto&amp;quot; /&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/SafeAreaProvider&amp;gt;
  )
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.DARK_GREY,
    flexGrow: 1,
    position: &amp;quot;relative&amp;quot;,
  },
  greenDot: {
    height: 8,
    width: 8,
    borderRadius: 10,
    marginRight: 5,
    backgroundColor: COLORS.GREEN,
  },
  header: {
    width: &amp;quot;95%&amp;quot;,
    marginLeft: &amp;quot;auto&amp;quot;,
    marginRight: &amp;quot;auto&amp;quot;,
  },
  row: {
    flexDirection: &amp;quot;row&amp;quot;,
    justifyContent: &amp;quot;space-between&amp;quot;,
    marginBottom: 5,
  },
  spinner: {
    position: &amp;quot;absolute&amp;quot;,
    alignSelf: &amp;quot;center&amp;quot;,
    top: &amp;quot;50%&amp;quot;,
    zIndex: 1000,
  },
  text: {
    color: COLORS.LIGHT_GREY,
    width: &amp;quot;100%&amp;quot;,
  },
  wallet: {
    alignItems: &amp;quot;center&amp;quot;,
    margin: 10,
    marginBottom: 15,
  },
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Before we can get to using our &lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt;, we’ll need to set up some way of handling a response from Phantom. Let’s go ahead and set that up now.&lt;/p&gt;
&lt;h3&gt;Specifying Redirects&lt;/h3&gt;
&lt;p&gt;Whenever we make a deeplinking request to Phantom, we’ll also need to tell Phantom how to get back to our app. We can do this by creating our own set of deeplinks for our React Native app. Specifically, we can create a deeplink for receiving a Phantom &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; event and include that as the &lt;code class=&quot;language-text&quot;&gt;redirect_link&lt;/code&gt; in our initial request.&lt;/p&gt;
&lt;p&gt;Once again, the &lt;a href=&quot;https://docs.expo.dev/versions/latest/sdk/linking/&quot;&gt;expo-linking&lt;/a&gt; package can help us achieve this. First, we’ll need to specify our own app’s &lt;a href=&quot;https://docs.expo.dev/guides/linking/#linking-to-your-app&quot;&gt;URL scheme&lt;/a&gt;, just like how Phantom specifies &lt;code class=&quot;language-text&quot;&gt;phantom://&lt;/code&gt;. We can do this from within our &lt;code class=&quot;language-text&quot;&gt;app.json&lt;/code&gt; file. Here, I’ve already set us up with &lt;code class=&quot;language-text&quot;&gt;deep-links-movie-tutorial://&lt;/code&gt;. Next, we’ll need to create the URL endpoint we want to pass as our &lt;code class=&quot;language-text&quot;&gt;redirect_link&lt;/code&gt;. Let’s call this &lt;code class=&quot;language-text&quot;&gt;onConnect&lt;/code&gt;. We can create this URL from within &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; like so:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;const onConnectRedirectLink = Linking.createURL(&amp;quot;onConnect&amp;quot;)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Now that we have a valid URL that Phantom can redirect back to, we’ll need a way for our app to actually listen for in-bound links. There are &lt;a href=&quot;https://reactnative.dev/docs/linking#handling-deep-links&quot;&gt;two scenarios&lt;/a&gt; in which our app could be opened with this link.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Our app is already already opened and a Linking URL event is fired&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Our app is not already opened and a URL is passed which opens our app and sets it as our app’s &lt;code class=&quot;language-text&quot;&gt;initialURL&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In the first case, because our app is already open and running, we can simply listen for a &lt;code class=&quot;language-text&quot;&gt;url&lt;/code&gt; event and track the incoming URL:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;const [deepLink, setDeepLink] = useState&amp;lt;string&amp;gt;(&amp;quot;&amp;quot;)

// On app start up, listen for a &amp;quot;url&amp;quot; event
useEffect(() =&amp;gt; {
  Linking.addEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
  return () =&amp;gt; {
    Linking.removeEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
  }
}, [])

// When a &amp;quot;url&amp;quot; event occurs, track the url
const handleDeepLink = ({ url }: Linking.EventType) =&amp;gt; {
  setDeepLink(url)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;In the second scenario, we can’t rely on just listening for the event because our app may not already be open when the event is fired. To account for this, we should make sure we always call &lt;a href=&quot;https://docs.expo.dev/versions/latest/sdk/linking/#linkinggetinitialurl&quot;&gt;Linking.getInitialURL&lt;/a&gt; on our app startup:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;const [deepLink, setDeepLink] = useState&amp;lt;string&amp;gt;(&amp;quot;&amp;quot;)

// On app start up, check if we were opened by an inbound deeplink. If so, track the intial URL
// Then, listen for a &amp;quot;url&amp;quot; event
useEffect(() =&amp;gt; {
  const initializeDeeplinks = async () =&amp;gt; {
    const initialUrl = await Linking.getInitialURL()
    if (initialUrl) {
      setDeepLink(initialUrl)
    }
  }
  initializeDeeplinks()
  const listener = Linking.addEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
  return () =&amp;gt; {
    listener.remove()
  }
}, [])

// When a &amp;quot;url&amp;quot; event occurs, track the url
const handleDeepLink = ({ url }: Linking.EventType) =&amp;gt; {
  setDeepLink(url)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Finally, we’ll need some way of actually parsing the inbound link from Phantom and responding to it accordingly. Whenever we receive a &lt;code class=&quot;language-text&quot;&gt;deeplink&lt;/code&gt; that matches the &lt;code class=&quot;language-text&quot;&gt;onConnect&lt;/code&gt; URL we specified earlier, we know we’ll be dealing with a &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; response. We can handle this like so:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Handle in-bound links
useEffect(() =&amp;gt; {
  if (!deepLink) return

  const url = new URL(deepLink)
  const params = url.searchParams

  // Handle an error response from Phantom
  if (params.get(&amp;quot;errorCode&amp;quot;)) {
    const error = Object.fromEntries([...params])
    const message =
      error?.errorMessage ??
      JSON.stringify(Object.fromEntries([...params]), null, 2)
    console.log(&amp;quot;error: &amp;quot;, message)
    return
  }

  // Handle a `connect` response from Phantom
  if (/onConnect/.test(url.pathname)) {
    console.log(&amp;quot;we received a connect response from Phantom: &amp;quot;, url)
  }
}, [deepLink])&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;h3&gt;Making a proper request to Phantom&lt;/h3&gt;
&lt;p&gt;Now that we have all of the necessary components, it’s time for us to make a proper &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request to Phantom. To recap, our connect request requires four parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;app_url&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;redirect_link&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;cluster&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When interacting with deeplinks, we can specify additional parameters by simply appending them to the base URL as query string parameters. Let’s put all these pieces together and try making a new connect request. Go ahead and update your &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file with the following:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import &amp;quot;react-native-get-random-values&amp;quot;
import &amp;quot;react-native-url-polyfill/auto&amp;quot;
import { Buffer } from &amp;quot;buffer&amp;quot;
global.Buffer = global.Buffer || Buffer
import { StatusBar } from &amp;quot;expo-status-bar&amp;quot;
import React, { useEffect, useRef, useState } from &amp;quot;react&amp;quot;
import { ActivityIndicator, StyleSheet, Text, View } from &amp;quot;react-native&amp;quot;
import {
  clusterApiUrl,
  Connection,
  PublicKey,
  Transaction,
} from &amp;quot;@solana/web3.js&amp;quot;
import MovieList from &amp;quot;./components/MovieList&amp;quot;
import Button from &amp;quot;./components/Button&amp;quot;
import { SafeAreaProvider, SafeAreaView } from &amp;quot;react-native-safe-area-context&amp;quot;
import ActionSheet from &amp;quot;react-native-actions-sheet&amp;quot;
import AddReviewSheet from &amp;quot;./components/AddReviewSheet&amp;quot;
import Toast from &amp;quot;react-native-toast-message&amp;quot;
import { toastConfig } from &amp;quot;./components/ToastConfig&amp;quot;
import { COLORS } from &amp;quot;./constants&amp;quot;
import nacl from &amp;quot;tweetnacl&amp;quot;
import bs58 from &amp;quot;bs58&amp;quot;
import * as Linking from &amp;quot;expo-linking&amp;quot;

const onConnectRedirectLink = Linking.createURL(&amp;quot;onConnect&amp;quot;)

const connection = new Connection(clusterApiUrl(&amp;quot;devnet&amp;quot;))

export default function App() {
  const [phantomWalletPublicKey, setPhantomWalletPublicKey] =
    useState&amp;lt;PublicKey | null&amp;gt;(null)

  const [submitting, setSubmitting] = useState(false)

  const actionSheetRef = useRef&amp;lt;ActionSheet&amp;gt;(null)

  const [dappKeyPair] = useState(nacl.box.keyPair())
  const [sharedSecret, setSharedSecret] = useState&amp;lt;Uint8Array&amp;gt;()

  const [deepLink, setDeepLink] = useState&amp;lt;string&amp;gt;(&amp;quot;&amp;quot;)

  // On app start up, check if we were opened by an inbound deeplink. If so, track the intial URL
  // Then, listen for a &amp;quot;url&amp;quot; event
  useEffect(() =&amp;gt; {
    const initializeDeeplinks = async () =&amp;gt; {
      const initialUrl = await Linking.getInitialURL()
      if (initialUrl) {
        setDeepLink(initialUrl)
      }
    }
    initializeDeeplinks()
    const listener = Linking.addEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
    return () =&amp;gt; {
      listener.remove()
    }
  }, [])

  // When a &amp;quot;url&amp;quot; event occurs, track the url
  const handleDeepLink = ({ url }: Linking.EventType) =&amp;gt; {
    setDeepLink(url)
  }

  // Handle in-bound links
  useEffect(() =&amp;gt; {
    if (!deepLink) return

    const url = new URL(deepLink)
    const params = url.searchParams

    // Handle an error response from Phantom
    if (params.get(&amp;quot;errorCode&amp;quot;)) {
      const error = Object.fromEntries([...params])
      const message =
        error?.errorMessage ??
        JSON.stringify(Object.fromEntries([...params]), null, 2)
      console.log(&amp;quot;error: &amp;quot;, message)
      return
    }

    // Handle a `connect` response from Phantom
    if (/onConnect/.test(url.pathname)) {
      console.log(&amp;quot;we received a connect response from Phantom: &amp;quot;, url)
    }
  }, [deepLink])

  // Initiate a new connection to Phantom
  const connect = async () =&amp;gt; {
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      cluster: &amp;quot;devnet&amp;quot;,
      app_url: &amp;quot;https://phantom.app&amp;quot;,
      redirect_link: onConnectRedirectLink,
    })

    const url = `https://phantom.app/ul/v1/connect?${params.toString()}`
    Linking.openURL(url)
  }

  // Initiate a disconnect from Phantom
  const disconnect = async () =&amp;gt; {
    console.log(&amp;quot;disconnect&amp;quot;)
  }

  // Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
  const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {
    console.log(&amp;quot;signAndSendTransaction&amp;quot;)
  }

  // Open the &amp;#39;Add a Review&amp;#39; sheet defined in `components/AddReviewSheet.tsx`
  const openAddReviewSheet = () =&amp;gt; {
    actionSheetRef.current?.show()
  }

  return (
    &amp;lt;SafeAreaProvider&amp;gt;
      &amp;lt;SafeAreaView style={styles.container}&amp;gt;
        &amp;lt;View style={styles.header}&amp;gt;
          {phantomWalletPublicKey ? (
            &amp;lt;&amp;gt;
              &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
                &amp;lt;View style={styles.greenDot} /&amp;gt;
                &amp;lt;Text
                  style={styles.text}
                  numberOfLines={1}
                  ellipsizeMode=&amp;quot;middle&amp;quot;
                &amp;gt;
                  {`Connected to: ${phantomWalletPublicKey.toString()}`}
                &amp;lt;/Text&amp;gt;
              &amp;lt;/View&amp;gt;
              &amp;lt;View style={styles.row}&amp;gt;
                &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
                &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
              &amp;lt;/View&amp;gt;
            &amp;lt;/&amp;gt;
          ) : (
            &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
              &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
            &amp;lt;/View&amp;gt;
          )}
        &amp;lt;/View&amp;gt;
        {submitting &amp;amp;&amp;amp; (
          &amp;lt;ActivityIndicator
            color={COLORS.WHITE}
            size=&amp;quot;large&amp;quot;
            style={styles.spinner}
          /&amp;gt;
        )}
        &amp;lt;MovieList connection={connection} /&amp;gt;
        &amp;lt;AddReviewSheet
          actionSheetRef={actionSheetRef}
          phantomWalletPublicKey={phantomWalletPublicKey}
          signAndSendTransaction={signAndSendTransaction}
        /&amp;gt;
        &amp;lt;Toast config={toastConfig} /&amp;gt;
        &amp;lt;StatusBar style=&amp;quot;auto&amp;quot; /&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/SafeAreaProvider&amp;gt;
  )
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.DARK_GREY,
    flexGrow: 1,
    position: &amp;quot;relative&amp;quot;,
  },
  greenDot: {
    height: 8,
    width: 8,
    borderRadius: 10,
    marginRight: 5,
    backgroundColor: COLORS.GREEN,
  },
  header: {
    width: &amp;quot;95%&amp;quot;,
    marginLeft: &amp;quot;auto&amp;quot;,
    marginRight: &amp;quot;auto&amp;quot;,
  },
  row: {
    flexDirection: &amp;quot;row&amp;quot;,
    justifyContent: &amp;quot;space-between&amp;quot;,
    marginBottom: 5,
  },
  spinner: {
    position: &amp;quot;absolute&amp;quot;,
    alignSelf: &amp;quot;center&amp;quot;,
    top: &amp;quot;50%&amp;quot;,
    zIndex: 1000,
  },
  text: {
    color: COLORS.LIGHT_GREY,
    width: &amp;quot;100%&amp;quot;,
  },
  wallet: {
    alignItems: &amp;quot;center&amp;quot;,
    margin: 10,
    marginBottom: 15,
  },
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Now, when we tap our “Connect Phantom” button, we should also see a connect modal pop up from within Phantom. When we approve this request by tapping “Connect”, Phantom should then redirect us back to our app. Progress!&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/4cN0eL36yjE?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;h3&gt;Putting it all together&lt;/h3&gt;
&lt;p&gt;Let’s take a look at our console to see what Phantom is sending back to our app. If you take a look your console, you should see that we’re logging a URL that looks something like this:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;&amp;quot;exp://172.20.10.2:19000/--/onConnect?phantom_encryption_public_key=AHWZNYZ7Q3wsnugvYSmSLfupcRHvAJqDRWkHwwBBm5jh&amp;amp;nonce=2n76Ujnsi6u5i3NM1xC4HE6m6WuMyX3L2&amp;amp;data=FspPVemQN61nddg5DhyftJYcycsNQrvUpnSQi6DxtgmpvMh82bDUrE3itP5LSCJmqKgbQdYU3M5N5duM6HMrvesC2pyMdDmAJtGawo9wjWqxG6F1VUAg5dndAqVHN1XWsDhuBjsJYRL1DMFMSgb6PveeV6tJ3joxjGMi4ZrjFGxXFakGUWRKsQzgd44w28B4yJH1n9Eiwp8rPLwi4BaWwtuMzjUX42UwmVyEbeCEZrJ3rJQZfuTYEULWo5RPnDZDKssnR4nLY4nfYjk27iSG3ooDX5C4SoCvvZLbMd7jXtR6hhwWfzdYUM66fsjbN9WPaVDvxVBDmVSjwJBsM1HQv1GfKf981eD9aeZJptVA6yJjxTHYoVyQJd8WMqPJrhjZUJHbhPwfc9qLiKhXvpECSwGyKfGxLuqW5kK&amp;quot;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Recall that when we made our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request to Phantom, we passed additional data such as our &lt;code class=&quot;language-text&quot;&gt;app_url&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt; as query string parameters. Now that we have a response, we can see that the URL we’re logging from Phantom also has additional data at the following query string parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;phantom_encryption_public_key&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;nonce&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Taking a closer look at these query string parameters, you’ll see now that all data from Phantom has been encrypted. In particular, the &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; field sent back from Phantom is now an encrypted JSON string. Let’s go ahead and decrypt it!&lt;/p&gt;
&lt;p&gt;When we made our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request to Phantom, we passed along our &lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt; that Phantom could use to generate a shared secret on its side. Now that Phantom has passed us back its &lt;code class=&quot;language-text&quot;&gt;phantom_encryption_public_key&lt;/code&gt;, we can also generate this shared secret and complete the Diffie-Hellman key exchange needed to decrypt the &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt;. We can do this by decoding the &lt;code class=&quot;language-text&quot;&gt;phantom_encryption_public_key&lt;/code&gt; received from Phantom and combining it with our app’s &lt;code class=&quot;language-text&quot;&gt;dappKeyPair.secretKey&lt;/code&gt; like so:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Handle a `connect` response from Phantom
if (/onConnect/.test(url.pathname)) {
  console.log(&amp;quot;we received a connect response from Phantom: &amp;quot;, url)
  const sharedSecretDapp = nacl.box.before(
    bs58.decode(params.get(&amp;quot;phantom_encryption_public_key&amp;quot;)!),
    dappKeyPair.secretKey
  )
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Moving over to our &lt;code class=&quot;language-text&quot;&gt;utils&lt;/code&gt; folder, let’s create a new file named &lt;code class=&quot;language-text&quot;&gt;decryptPayload.ts&lt;/code&gt; and add the following function:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import nacl from &amp;quot;tweetnacl&amp;quot;
import bs58 from &amp;quot;bs58&amp;quot;

export const decryptPayload = (
  data: string,
  nonce: string,
  sharedSecret?: Uint8Array
) =&amp;gt; {
  if (!sharedSecret) throw new Error(&amp;quot;missing shared secret&amp;quot;)

  const decryptedData = nacl.box.open.after(
    bs58.decode(data),
    bs58.decode(nonce),
    sharedSecret
  )
  if (!decryptedData) {
    throw new Error(&amp;quot;Unable to decrypt data&amp;quot;)
  }
  return JSON.parse(Buffer.from(decryptedData).toString(&amp;quot;utf8&amp;quot;))
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Here, we’re creating a helper function that will decrypt a given &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; string using the &lt;code class=&quot;language-text&quot;&gt;sharedSecret&lt;/code&gt; we just generated in our Diffie-Hellman key exchange and the &lt;code class=&quot;language-text&quot;&gt;nonce&lt;/code&gt; passed back from Phantom. With this method now in place, we can now decrypt the &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; passed back from Phantom:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Handle a `connect` response from Phantom
if (/onConnect/.test(url.pathname)) {
  console.log(&amp;quot;we received a connect response from Phantom: &amp;quot;, url)
  const sharedSecretDapp = nacl.box.before(
    bs58.decode(params.get(&amp;quot;phantom_encryption_public_key&amp;quot;)!),
    dappKeyPair.secretKey
  )
  const connectData = decryptPayload(
    params.get(&amp;quot;data&amp;quot;)!,
    params.get(&amp;quot;nonce&amp;quot;)!,
    sharedSecretDapp
  )
  console.log(&amp;quot;decrypted data received from Phantom: &amp;quot;, connectData)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Taking a look at our console, we should see that our app has decoded the &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; from Phantom to an object that has &lt;code class=&quot;language-text&quot;&gt;public_key&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; fields:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;decrypted data received from Phantom:  Object {
  &amp;quot;public_key&amp;quot;: &amp;quot;GYLkraPfvT3UtUbdxcHiVWV2EShBoZtqW1Bcq4VazUCt&amp;quot;,
  &amp;quot;session&amp;quot;: &amp;quot;22XD6EDJ4X3ALDJkHkQrdmrFdTHVHjD2noCbPrPum7xr9x5cbLN9XS5MtiVtNF5tCUFAY6XyBmyvyLatcCrzpGCGJ6kFFwYf4jKkG3YnYJYZDbTaEFPraADF2U56gtXq14ZMu7YTSA3Uge8sV51Qhs5HSv2UvP4wsdsDDhNXZJB7jUcbY4LgE6sfdP2UEEwvYxf91dmMQgEc3BwFD8ab59Lssi&amp;quot;,
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Here, the &lt;code class=&quot;language-text&quot;&gt;public_key&lt;/code&gt; that Phantom passes us is the public key of the end user. The &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; we receive is specific to this user and represents our user’s connection to our app. Our app should continue to pass this &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; param back to Phantom to authenticate all subsequent requests. As long as this &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; is valid, we should consider this user “connected” to our app.&lt;/p&gt;
&lt;p&gt;With this data now decrypted, we can go ahead and store both the &lt;code class=&quot;language-text&quot;&gt;public_key&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; received from Phantom. Let’s update our &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file with the following:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import &amp;quot;react-native-get-random-values&amp;quot;
import &amp;quot;react-native-url-polyfill/auto&amp;quot;
import { Buffer } from &amp;quot;buffer&amp;quot;
global.Buffer = global.Buffer || Buffer
import { StatusBar } from &amp;quot;expo-status-bar&amp;quot;
import React, { useEffect, useRef, useState } from &amp;quot;react&amp;quot;
import { ActivityIndicator, StyleSheet, Text, View } from &amp;quot;react-native&amp;quot;
import {
  clusterApiUrl,
  Connection,
  PublicKey,
  Transaction,
} from &amp;quot;@solana/web3.js&amp;quot;
import MovieList from &amp;quot;./components/MovieList&amp;quot;
import Button from &amp;quot;./components/Button&amp;quot;
import { SafeAreaProvider, SafeAreaView } from &amp;quot;react-native-safe-area-context&amp;quot;
import ActionSheet from &amp;quot;react-native-actions-sheet&amp;quot;
import AddReviewSheet from &amp;quot;./components/AddReviewSheet&amp;quot;
import Toast from &amp;quot;react-native-toast-message&amp;quot;
import { toastConfig } from &amp;quot;./components/ToastConfig&amp;quot;
import { COLORS } from &amp;quot;./constants&amp;quot;
import * as Linking from &amp;quot;expo-linking&amp;quot;
import nacl from &amp;quot;tweetnacl&amp;quot;
import bs58 from &amp;quot;bs58&amp;quot;
import { decryptPayload } from &amp;quot;./utils/decryptPayload&amp;quot;

const onConnectRedirectLink = Linking.createURL(&amp;quot;onConnect&amp;quot;)

const connection = new Connection(clusterApiUrl(&amp;quot;devnet&amp;quot;))

export default function App() {
  const [phantomWalletPublicKey, setPhantomWalletPublicKey] =
    useState&amp;lt;PublicKey | null&amp;gt;(null)

  const [submitting, setSubmitting] = useState(false)

  const actionSheetRef = useRef&amp;lt;ActionSheet&amp;gt;(null)

  const [dappKeyPair] = useState(nacl.box.keyPair())
  const [sharedSecret, setSharedSecret] = useState&amp;lt;Uint8Array&amp;gt;()
  const [session, setSession] = useState&amp;lt;string&amp;gt;()

  const [deepLink, setDeepLink] = useState&amp;lt;string&amp;gt;(&amp;quot;&amp;quot;)

  // On app start up, check if we were opened by an inbound deeplink. If so, track the intial URL
  // Then, listen for a &amp;quot;url&amp;quot; event
  useEffect(() =&amp;gt; {
    const initializeDeeplinks = async () =&amp;gt; {
      const initialUrl = await Linking.getInitialURL()
      if (initialUrl) {
        setDeepLink(initialUrl)
      }
    }
    initializeDeeplinks()
    const listener = Linking.addEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
    return () =&amp;gt; {
      listener.remove()
    }
  }, [])

  // When a &amp;quot;url&amp;quot; event occurs, track the url
  const handleDeepLink = ({ url }: Linking.EventType) =&amp;gt; {
    setDeepLink(url)
  }

  // Handle in-bound links
  useEffect(() =&amp;gt; {
    if (!deepLink) return

    const url = new URL(deepLink)
    const params = url.searchParams

    // Handle an error response from Phantom
    if (params.get(&amp;quot;errorCode&amp;quot;)) {
      const error = Object.fromEntries([...params])
      const message =
        error?.errorMessage ??
        JSON.stringify(Object.fromEntries([...params]), null, 2)
      console.log(&amp;quot;error: &amp;quot;, message)
      return
    }

    // Handle a `connect` response from Phantom
    if (/onConnect/.test(url.pathname)) {
      const sharedSecretDapp = nacl.box.before(
        bs58.decode(params.get(&amp;quot;phantom_encryption_public_key&amp;quot;)!),
        dappKeyPair.secretKey
      )
      const connectData = decryptPayload(
        params.get(&amp;quot;data&amp;quot;)!,
        params.get(&amp;quot;nonce&amp;quot;)!,
        sharedSecretDapp
      )
      setSharedSecret(sharedSecretDapp)
      setSession(connectData.session)
      setPhantomWalletPublicKey(new PublicKey(connectData.public_key))
      console.log(`connected to ${connectData.public_key.toString()}`)
    }
  }, [deepLink])

  // Initiate a new connection to Phantom
  const connect = async () =&amp;gt; {
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      cluster: &amp;quot;devnet&amp;quot;,
      app_url: &amp;quot;https://deeplink-movie-tutorial-dummy-site.vercel.app/&amp;quot;,
      redirect_link: onConnectRedirectLink,
    })

    const url = `https://phantom.app/ul/v1/connect?${params.toString()}`
    Linking.openURL(url)
  }

  // Initiate a disconnect from Phantom
  const disconnect = async () =&amp;gt; {
    console.log(&amp;quot;disconnect&amp;quot;)
  }

  // Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
  const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {
    console.log(&amp;quot;signAndSendTransaction&amp;quot;)
  }

  // Open the &amp;#39;Add a Review&amp;#39; sheet defined in `components/AddReviewSheet.tsx`
  const openAddReviewSheet = () =&amp;gt; {
    actionSheetRef.current?.show()
  }

  return (
    &amp;lt;SafeAreaProvider&amp;gt;
      &amp;lt;SafeAreaView style={styles.container}&amp;gt;
        &amp;lt;View style={styles.header}&amp;gt;
          {phantomWalletPublicKey ? (
            &amp;lt;&amp;gt;
              &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
                &amp;lt;View style={styles.greenDot} /&amp;gt;
                &amp;lt;Text
                  style={styles.text}
                  numberOfLines={1}
                  ellipsizeMode=&amp;quot;middle&amp;quot;
                &amp;gt;
                  {`Connected to: ${phantomWalletPublicKey.toString()}`}
                &amp;lt;/Text&amp;gt;
              &amp;lt;/View&amp;gt;
              &amp;lt;View style={styles.row}&amp;gt;
                &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
                &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
              &amp;lt;/View&amp;gt;
            &amp;lt;/&amp;gt;
          ) : (
            &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
              &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
            &amp;lt;/View&amp;gt;
          )}
        &amp;lt;/View&amp;gt;
        {submitting &amp;amp;&amp;amp; (
          &amp;lt;ActivityIndicator
            color={COLORS.WHITE}
            size=&amp;quot;large&amp;quot;
            style={styles.spinner}
          /&amp;gt;
        )}
        &amp;lt;MovieList connection={connection} /&amp;gt;
        &amp;lt;AddReviewSheet
          actionSheetRef={actionSheetRef}
          phantomWalletPublicKey={phantomWalletPublicKey}
          signAndSendTransaction={signAndSendTransaction}
        /&amp;gt;
        &amp;lt;Toast config={toastConfig} /&amp;gt;
        &amp;lt;StatusBar style=&amp;quot;auto&amp;quot; /&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/SafeAreaProvider&amp;gt;
  )
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.DARK_GREY,
    flexGrow: 1,
    position: &amp;quot;relative&amp;quot;,
  },
  greenDot: {
    height: 8,
    width: 8,
    borderRadius: 10,
    marginRight: 5,
    backgroundColor: COLORS.GREEN,
  },
  header: {
    width: &amp;quot;95%&amp;quot;,
    marginLeft: &amp;quot;auto&amp;quot;,
    marginRight: &amp;quot;auto&amp;quot;,
  },
  row: {
    flexDirection: &amp;quot;row&amp;quot;,
    justifyContent: &amp;quot;space-between&amp;quot;,
    marginBottom: 5,
  },
  spinner: {
    position: &amp;quot;absolute&amp;quot;,
    alignSelf: &amp;quot;center&amp;quot;,
    top: &amp;quot;50%&amp;quot;,
    zIndex: 1000,
  },
  text: {
    color: COLORS.LIGHT_GREY,
    width: &amp;quot;100%&amp;quot;,
  },
  wallet: {
    alignItems: &amp;quot;center&amp;quot;,
    margin: 10,
    marginBottom: 15,
  },
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Now, when we approve our &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request, our app should recognize that the request was successful and render “Add Review” and “Disconnect” buttons. We’re now officially connected!&lt;/p&gt;
&lt;h3&gt;Notes on Sessions&lt;/h3&gt;
&lt;p&gt;From here on out, all communication with Phantom will require the &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; param that our app has stored. This &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; does not expire, and will represent our connection to Phantom until it is deemed invalid. There are two scenarios in which a &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; can be deemed invalid:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It was not signed by the current wallet keypair. This could mean that the session is entirely fake, or that it was signed by another keypair in the user’s wallet.&lt;/li&gt;
&lt;li&gt;It was signed by the current wallet keypair, but the session’s JSON &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; does not pass muster. There are a few reasons why this might occur:
a. The user switched chains (or possibly networks).
b. The &lt;code class=&quot;language-text&quot;&gt;app_url&lt;/code&gt; could be blocked if malicious.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In cases where our app loses this &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; (such as if a user force closes our app) we should simply consider the user disconnected and require a new connection before continuing.&lt;/p&gt;
&lt;h2&gt;Disconnecting From Phantom&lt;/h2&gt;
&lt;p&gt;Before we continue on to adding movie reviews to our app, we should also give our users a way to disconnect. Disconnecting follows much of the same process as connecting. Namely, we will make a deeplink to Phantom that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Links to a specific base URL (in this case &lt;a href=&quot;https://phantom.app/ul/v1/disconnect&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;https://phantom.app/ul/v1/disconnect&lt;/code&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Passes additional query string parameters (including &lt;code class=&quot;language-text&quot;&gt;dapp_encryption_public_key&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;redirect_link&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;When successful, is set up with logic to decrypt and parse a redirect link received from Phantom.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We’ve already covered most of the heavy lifting here in our initial &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request. To set ourselves up for future requests, let’s refactor some of our existing connect logic.&lt;/p&gt;
&lt;p&gt;First, let’s add the following line to our &lt;code class=&quot;language-text&quot;&gt;constants/index.ts&lt;/code&gt; file:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;export const BASE_URL = &amp;quot;https://phantom.app/ul/v1/&amp;quot;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Next, create a new file within our &lt;code class=&quot;language-text&quot;&gt;utils&lt;/code&gt; folder named &lt;code class=&quot;language-text&quot;&gt;buildUrl.ts&lt;/code&gt; and add the following function. This will make it easier for us to construct different Phantom deeplinks in the future:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import { BASE_URL } from &amp;quot;../constants&amp;quot;

export const buildUrl = (path: string, params: URLSearchParams) =&amp;gt;
  `${BASE_URL}${path}?${params.toString()}`&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;If we take a look at the &lt;a href=&quot;https://docs.phantom.app/integrating/deeplinks-ios-and-android/provider-methods/disconnect#query-string-parameters&quot;&gt;query string parameters required for disconnect&lt;/a&gt;, we can see that most of it looks similar to our initial &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; request. This time, however, we will also need to encrypt a &lt;code class=&quot;language-text&quot;&gt;payload&lt;/code&gt; in our request to Phantom. Remember, our encrypted channel with Phantom works both ways!&lt;/p&gt;
&lt;p&gt;To set ourselves up for encrypting future requests, let’s create a new file under our &lt;code class=&quot;language-text&quot;&gt;utils&lt;/code&gt; folder named &lt;code class=&quot;language-text&quot;&gt;encryptPayload.ts&lt;/code&gt; and add the following:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import nacl from &amp;quot;tweetnacl&amp;quot;

export const encryptPayload = (payload: any, sharedSecret?: Uint8Array) =&amp;gt; {
  if (!sharedSecret) throw new Error(&amp;quot;missing shared secret&amp;quot;)

  const nonce = nacl.randomBytes(24)

  const encryptedPayload = nacl.box.after(
    Buffer.from(JSON.stringify(payload)),
    nonce,
    sharedSecret
  )

  return [nonce, encryptedPayload]
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Here, we’re using the &lt;code class=&quot;language-text&quot;&gt;sharedSecret&lt;/code&gt; we generated from our Diffie-Hellman key exchange to encrypt some arbitrary payload that we will send to Phantom. As part of this encryption process, we’ll also generate a &lt;code class=&quot;language-text&quot;&gt;nonce&lt;/code&gt; that we’ll send to Phantom so that Phantom can decrypt our payload.&lt;/p&gt;
&lt;p&gt;Switching over to our &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file, we can now add the necessary components to make a &lt;code class=&quot;language-text&quot;&gt;disconnect&lt;/code&gt; deeplink and handle its corresponding redirect link back from Phantom. First, we’ll need to create a redirect link:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;const onDisconnectRedirectLink = Linking.createURL(&amp;quot;onDisconnect&amp;quot;)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Then, we’ll need a way to handle this incoming redirect link. In the case of &lt;code class=&quot;language-text&quot;&gt;disconnect&lt;/code&gt;, Phantom doesn’t return us anything—we should simply forget our users &lt;code class=&quot;language-text&quot;&gt;phantomWalletPublicKey&lt;/code&gt; as our &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; would no longer be valid:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Handle a `disconnect` response from Phantom
if (/onDisconnect/.test(url.pathname)) {
  setPhantomWalletPublicKey(null)
  console.log(&amp;quot;disconnected&amp;quot;)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;With our redirect route in place, we can finally build and open our &lt;code class=&quot;language-text&quot;&gt;disconnect&lt;/code&gt; deeplink. Note that we are encrypting a payload to Phantom that includes our &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; param from earlier. We will need to pass this to Phantom to authenticate all subsequent requests!&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Initiate a disconnect from Phantom
const disconnect = async () =&amp;gt; {
  const payload = {
    session,
  }
  const [nonce, encryptedPayload] = encryptPayload(payload, sharedSecret)
  const params = new URLSearchParams({
    dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
    nonce: bs58.encode(nonce),
    redirect_link: onDisconnectRedirectLink,
    payload: bs58.encode(encryptedPayload),
  })
  const url = buildUrl(&amp;quot;disconnect&amp;quot;, params)
  Linking.openURL(url)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Once all this in place, our app should be able to quickly connect and disconnect like so:&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/j6tB18bJvao?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Before moving on, take a minute to refactor &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt; to make use of our new &lt;code class=&quot;language-text&quot;&gt;buildUrl&lt;/code&gt; helper method. Our &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file should now look like this:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import &amp;quot;react-native-get-random-values&amp;quot;
import &amp;quot;react-native-url-polyfill/auto&amp;quot;
import { Buffer } from &amp;quot;buffer&amp;quot;
global.Buffer = global.Buffer || Buffer
import { StatusBar } from &amp;quot;expo-status-bar&amp;quot;
import React, { useEffect, useRef, useState } from &amp;quot;react&amp;quot;
import { ActivityIndicator, StyleSheet, Text, View } from &amp;quot;react-native&amp;quot;
import {
  clusterApiUrl,
  Connection,
  PublicKey,
  Transaction,
} from &amp;quot;@solana/web3.js&amp;quot;
import MovieList from &amp;quot;./components/MovieList&amp;quot;
import Button from &amp;quot;./components/Button&amp;quot;
import { SafeAreaProvider, SafeAreaView } from &amp;quot;react-native-safe-area-context&amp;quot;
import ActionSheet from &amp;quot;react-native-actions-sheet&amp;quot;
import AddReviewSheet from &amp;quot;./components/AddReviewSheet&amp;quot;
import Toast from &amp;quot;react-native-toast-message&amp;quot;
import { toastConfig } from &amp;quot;./components/ToastConfig&amp;quot;
import { COLORS } from &amp;quot;./constants&amp;quot;
import * as Linking from &amp;quot;expo-linking&amp;quot;
import nacl from &amp;quot;tweetnacl&amp;quot;
import bs58 from &amp;quot;bs58&amp;quot;
import { decryptPayload } from &amp;quot;./utils/decryptPayload&amp;quot;
import { encryptPayload } from &amp;quot;./utils/encryptPayload&amp;quot;
import { buildUrl } from &amp;quot;./utils/buildUrl&amp;quot;

const onConnectRedirectLink = Linking.createURL(&amp;quot;onConnect&amp;quot;)
const onDisconnectRedirectLink = Linking.createURL(&amp;quot;onDisconnect&amp;quot;)

const connection = new Connection(clusterApiUrl(&amp;quot;devnet&amp;quot;))

export default function App() {
  const [phantomWalletPublicKey, setPhantomWalletPublicKey] =
    useState&amp;lt;PublicKey | null&amp;gt;(null)

  const [submitting, setSubmitting] = useState(false)

  const actionSheetRef = useRef&amp;lt;ActionSheet&amp;gt;(null)

  const [dappKeyPair] = useState(nacl.box.keyPair())
  const [sharedSecret, setSharedSecret] = useState&amp;lt;Uint8Array&amp;gt;()
  const [session, setSession] = useState&amp;lt;string&amp;gt;()

  const [deepLink, setDeepLink] = useState&amp;lt;string&amp;gt;(&amp;quot;&amp;quot;)

  // On app start up, check if we were opened by an inbound deeplink. If so, track the intial URL
  // Then, listen for a &amp;quot;url&amp;quot; event
  useEffect(() =&amp;gt; {
    const initializeDeeplinks = async () =&amp;gt; {
      const initialUrl = await Linking.getInitialURL()
      if (initialUrl) {
        setDeepLink(initialUrl)
      }
    }
    initializeDeeplinks()
    const listener = Linking.addEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
    return () =&amp;gt; {
      listener.remove()
    }
  }, [])

  // When a &amp;quot;url&amp;quot; event occurs, track the url
  const handleDeepLink = ({ url }: Linking.EventType) =&amp;gt; {
    setDeepLink(url)
  }

  // Handle in-bound links
  useEffect(() =&amp;gt; {
    if (!deepLink) return

    const url = new URL(deepLink)
    const params = url.searchParams

    // Handle an error response from Phantom
    if (params.get(&amp;quot;errorCode&amp;quot;)) {
      const error = Object.fromEntries([...params])
      const message =
        error?.errorMessage ??
        JSON.stringify(Object.fromEntries([...params]), null, 2)
      console.log(&amp;quot;error: &amp;quot;, message)
      return
    }

    // Handle a `connect` response from Phantom
    if (/onConnect/.test(url.pathname)) {
      const sharedSecretDapp = nacl.box.before(
        bs58.decode(params.get(&amp;quot;phantom_encryption_public_key&amp;quot;)!),
        dappKeyPair.secretKey
      )
      const connectData = decryptPayload(
        params.get(&amp;quot;data&amp;quot;)!,
        params.get(&amp;quot;nonce&amp;quot;)!,
        sharedSecretDapp
      )
      setSharedSecret(sharedSecretDapp)
      setSession(connectData.session)
      setPhantomWalletPublicKey(new PublicKey(connectData.public_key))
      console.log(`connected to ${connectData.public_key.toString()}`)
    }

    // Handle a `disconnect` response from Phantom
    if (/onDisconnect/.test(url.pathname)) {
      setPhantomWalletPublicKey(null)
      console.log(&amp;quot;disconnected&amp;quot;)
    }
  }, [deepLink])

  // Initiate a new connection to Phantom
  const connect = async () =&amp;gt; {
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      cluster: &amp;quot;devnet&amp;quot;,
      app_url: &amp;quot;https://deeplink-movie-tutorial-dummy-site.vercel.app/&amp;quot;,
      redirect_link: onConnectRedirectLink,
    })

    const url = buildUrl(&amp;quot;connect&amp;quot;, params)
    Linking.openURL(url)
  }

  // Initiate a disconnect from Phantom
  const disconnect = async () =&amp;gt; {
    const payload = {
      session,
    }
    const [nonce, encryptedPayload] = encryptPayload(payload, sharedSecret)
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      nonce: bs58.encode(nonce),
      redirect_link: onDisconnectRedirectLink,
      payload: bs58.encode(encryptedPayload),
    })
    const url = buildUrl(&amp;quot;disconnect&amp;quot;, params)
    Linking.openURL(url)
  }

  // Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
  const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {
    console.log(&amp;quot;signAndSendTransaction&amp;quot;)
  }

  // Open the &amp;#39;Add a Review&amp;#39; sheet defined in `components/AddReviewSheet.tsx`
  const openAddReviewSheet = () =&amp;gt; {
    actionSheetRef.current?.show()
  }

  return (
    &amp;lt;SafeAreaProvider&amp;gt;
      &amp;lt;SafeAreaView style={styles.container}&amp;gt;
        &amp;lt;View style={styles.header}&amp;gt;
          {phantomWalletPublicKey ? (
            &amp;lt;&amp;gt;
              &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
                &amp;lt;View style={styles.greenDot} /&amp;gt;
                &amp;lt;Text
                  style={styles.text}
                  numberOfLines={1}
                  ellipsizeMode=&amp;quot;middle&amp;quot;
                &amp;gt;
                  {`Connected to: ${phantomWalletPublicKey.toString()}`}
                &amp;lt;/Text&amp;gt;
              &amp;lt;/View&amp;gt;
              &amp;lt;View style={styles.row}&amp;gt;
                &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
                &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
              &amp;lt;/View&amp;gt;
            &amp;lt;/&amp;gt;
          ) : (
            &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
              &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
            &amp;lt;/View&amp;gt;
          )}
        &amp;lt;/View&amp;gt;
        {submitting &amp;amp;&amp;amp; (
          &amp;lt;ActivityIndicator
            color={COLORS.WHITE}
            size=&amp;quot;large&amp;quot;
            style={styles.spinner}
          /&amp;gt;
        )}
        &amp;lt;MovieList connection={connection} /&amp;gt;
        &amp;lt;AddReviewSheet
          actionSheetRef={actionSheetRef}
          phantomWalletPublicKey={phantomWalletPublicKey}
          signAndSendTransaction={signAndSendTransaction}
        /&amp;gt;
        &amp;lt;Toast config={toastConfig} /&amp;gt;
        &amp;lt;StatusBar style=&amp;quot;auto&amp;quot; /&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/SafeAreaProvider&amp;gt;
  )
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.DARK_GREY,
    flexGrow: 1,
    position: &amp;quot;relative&amp;quot;,
  },
  greenDot: {
    height: 8,
    width: 8,
    borderRadius: 10,
    marginRight: 5,
    backgroundColor: COLORS.GREEN,
  },
  header: {
    width: &amp;quot;95%&amp;quot;,
    marginLeft: &amp;quot;auto&amp;quot;,
    marginRight: &amp;quot;auto&amp;quot;,
  },
  row: {
    flexDirection: &amp;quot;row&amp;quot;,
    justifyContent: &amp;quot;space-between&amp;quot;,
    marginBottom: 5,
  },
  spinner: {
    position: &amp;quot;absolute&amp;quot;,
    alignSelf: &amp;quot;center&amp;quot;,
    top: &amp;quot;50%&amp;quot;,
    zIndex: 1000,
  },
  text: {
    color: COLORS.LIGHT_GREY,
    width: &amp;quot;100%&amp;quot;,
  },
  wallet: {
    alignItems: &amp;quot;center&amp;quot;,
    margin: 10,
    marginBottom: 15,
  },
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;h2&gt;Signing and sending transactions via Phantom&lt;/h2&gt;
&lt;p&gt;Now that our users can connect and disconnect from our app, we’re finally ready to give them the ability to write their own movie reviews. So far, we’ve just been reading reviews created by other people who have interacted with the program that’s already on devnet. Now, our users can write their own reviews and use Phantom broadcast them to the network.&lt;/p&gt;
&lt;p&gt;If you tap on our existing “Add Review” button, you’ll see a form pop up that asks for a movie’s title, review, and rating. All of this is already set up for us within &lt;code class=&quot;language-text&quot;&gt;components/AddReviewSheet.tsx&lt;/code&gt;. I won’t rehash everything in here, since the Solana Development Course already does a great job of explaining how to interact with their existing program. If we look at our &lt;code class=&quot;language-text&quot;&gt;handleSubmit&lt;/code&gt; function, however, we can see that we’re already constructing our review as a &lt;a href=&quot;https://solana-labs.github.io/solana-web3.js/classes/TransactionInstruction.html&quot;&gt;TransactionInstruction&lt;/a&gt; and then packaging it into a &lt;a href=&quot;https://solana-labs.github.io/solana-web3.js/classes/Transaction.html&quot;&gt;Transaction&lt;/a&gt;. This transaction now needs to be signed and submitted to the Solana network.&lt;/p&gt;
&lt;p&gt;Let’s zoom back out to our &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file. Here, we’ll need to add much of the same deeplinking flows that we’ve already covered. Specifically, we’ll need:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;An &lt;code class=&quot;language-text&quot;&gt;onSignAndSendTransactionRedirectLink&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;A way to react to an incoming &lt;code class=&quot;language-text&quot;&gt;onSignAndSendTransaction&lt;/code&gt; redirect.&lt;/li&gt;
&lt;li&gt;A method that properly serializes our transaction and sends it to Phantom.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Go ahead and try your hand at implementing the first two items from our list above. Afterwards, scroll down to find our &lt;code class=&quot;language-text&quot;&gt;signAndSendTransaction&lt;/code&gt; method. Here, we can add the necessary logic to pass our transaction to Phantom so that it can be signed and submitted to the network:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {
  if (!phantomWalletPublicKey) return
  setSubmitting(true)
  transaction.feePayer = phantomWalletPublicKey
  transaction.recentBlockhash = (
    await connection.getLatestBlockhash()
  ).blockhash
  const serializedTransaction = transaction.serialize({
    requireAllSignatures: false,
  })
  const payload = {
    session,
    transaction: bs58.encode(serializedTransaction),
  }
  const [nonce, encryptedPayload] = encryptPayload(payload, sharedSecret)
  const params = new URLSearchParams({
    dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
    nonce: bs58.encode(nonce),
    redirect_link: onSignAndSendTransactionRedirectLink,
    payload: bs58.encode(encryptedPayload),
  })
  const url = buildUrl(&amp;quot;signAndSendTransaction&amp;quot;, params)
  Linking.openURL(url)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;In this method, the transaction we’re dealing with is already equipped with a movie review instruction. Before we serialize it, however, we’ll first need to specify its &lt;code class=&quot;language-text&quot;&gt;feePayer&lt;/code&gt; and date it with a &lt;code class=&quot;language-text&quot;&gt;recentBlockhash&lt;/code&gt;. The &lt;code class=&quot;language-text&quot;&gt;feePayer&lt;/code&gt; portion is straightforward—we can simply set this to our user’s &lt;code class=&quot;language-text&quot;&gt;phantomWalletPublicKey&lt;/code&gt;. Whenever we’re sending a transaction to Solana, we’ll want to wait until the last possible moment to fetch and set a &lt;code class=&quot;language-text&quot;&gt;recentBlockhash&lt;/code&gt; using &lt;a href=&quot;https://solana-labs.github.io/solana-web3.js/classes/Connection.html#getLatestBlockhash&quot;&gt;connection.getLatestBlockhash&lt;/a&gt;. If you’re interested in learning more about why this is considered best practice, I highly recommend reading these posts from &lt;a href=&quot;https://www.notion.so/Transaction-confirmation-d5b8f4e09b9c4a70a1f263f82307d7ce&quot;&gt;Justin Starry&lt;/a&gt; and the &lt;a href=&quot;https://solanacookbook.com/guides/retrying-transactions.html#facts&quot;&gt;Solana Cookbook&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;When serializing our transaction, it’s very important to pass an additional options object that sets &lt;code class=&quot;language-text&quot;&gt;requireAllSignatures: false&lt;/code&gt;. This is because our transaction has not been signed yet! Once its serialized, we can then base58-encode it and add it to our &lt;code class=&quot;language-text&quot;&gt;payload&lt;/code&gt;. From here, everything else should be review from our &lt;code class=&quot;language-text&quot;&gt;disconnect&lt;/code&gt; section: we’ll encrypt our payload, specify the necessary query string params, and build and open our deeplink.&lt;/p&gt;
&lt;p&gt;With this method in place, we’re now finally ready to submit our movie review! If you haven’t done so already, feel free to customize your &lt;code class=&quot;language-text&quot;&gt;onSignAndSendTransaction&lt;/code&gt; redirect handler in whatever way you see fit. In my case, I simply triggered a “Success” popup that links the user to the transaction id on a block explorer. All in all, your &lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt; file should now look something like this:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;tsx&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import &amp;quot;react-native-get-random-values&amp;quot;
import &amp;quot;react-native-url-polyfill/auto&amp;quot;
import { Buffer } from &amp;quot;buffer&amp;quot;
global.Buffer = global.Buffer || Buffer
import { StatusBar } from &amp;quot;expo-status-bar&amp;quot;
import React, { useEffect, useRef, useState } from &amp;quot;react&amp;quot;
import { ActivityIndicator, StyleSheet, Text, View } from &amp;quot;react-native&amp;quot;
import {
  clusterApiUrl,
  Connection,
  PublicKey,
  Transaction,
} from &amp;quot;@solana/web3.js&amp;quot;
import MovieList from &amp;quot;./components/MovieList&amp;quot;
import Button from &amp;quot;./components/Button&amp;quot;
import { SafeAreaProvider, SafeAreaView } from &amp;quot;react-native-safe-area-context&amp;quot;
import ActionSheet from &amp;quot;react-native-actions-sheet&amp;quot;
import AddReviewSheet from &amp;quot;./components/AddReviewSheet&amp;quot;
import Toast from &amp;quot;react-native-toast-message&amp;quot;
import { toastConfig } from &amp;quot;./components/ToastConfig&amp;quot;
import { COLORS } from &amp;quot;./constants&amp;quot;
import * as Linking from &amp;quot;expo-linking&amp;quot;
import nacl from &amp;quot;tweetnacl&amp;quot;
import bs58 from &amp;quot;bs58&amp;quot;
import { decryptPayload } from &amp;quot;./utils/decryptPayload&amp;quot;
import { encryptPayload } from &amp;quot;./utils/encryptPayload&amp;quot;
import { buildUrl } from &amp;quot;./utils/buildUrl&amp;quot;

const onConnectRedirectLink = Linking.createURL(&amp;quot;onConnect&amp;quot;)
const onDisconnectRedirectLink = Linking.createURL(&amp;quot;onDisconnect&amp;quot;)
const onSignAndSendTransactionRedirectLink = Linking.createURL(
  &amp;quot;onSignAndSendTransaction&amp;quot;
)

const connection = new Connection(clusterApiUrl(&amp;quot;devnet&amp;quot;))

export default function App() {
  const [phantomWalletPublicKey, setPhantomWalletPublicKey] =
    useState&amp;lt;PublicKey | null&amp;gt;(null)

  const [submitting, setSubmitting] = useState(false)

  const actionSheetRef = useRef&amp;lt;ActionSheet&amp;gt;(null)

  const [dappKeyPair] = useState(nacl.box.keyPair())
  const [sharedSecret, setSharedSecret] = useState&amp;lt;Uint8Array&amp;gt;()
  const [session, setSession] = useState&amp;lt;string&amp;gt;()

  const [deepLink, setDeepLink] = useState&amp;lt;string&amp;gt;(&amp;quot;&amp;quot;)

  // On app start up, check if we were opened by an inbound deeplink. If so, track the intial URL
  // Then, listen for a &amp;quot;url&amp;quot; event
  useEffect(() =&amp;gt; {
    const initializeDeeplinks = async () =&amp;gt; {
      const initialUrl = await Linking.getInitialURL()
      if (initialUrl) {
        setDeepLink(initialUrl)
      }
    }
    initializeDeeplinks()
    const listener = Linking.addEventListener(&amp;quot;url&amp;quot;, handleDeepLink)
    return () =&amp;gt; {
      listener.remove()
    }
  }, [])

  // When a &amp;quot;url&amp;quot; event occurs, track the url
  const handleDeepLink = ({ url }: Linking.EventType) =&amp;gt; {
    setDeepLink(url)
  }

  // Handle in-bound links
  useEffect(() =&amp;gt; {
    setSubmitting(false)
    if (!deepLink) return

    const url = new URL(deepLink)
    const params = url.searchParams

    // Handle an error response from Phantom
    if (params.get(&amp;quot;errorCode&amp;quot;)) {
      const error = Object.fromEntries([...params])
      const message =
        error?.errorMessage ??
        JSON.stringify(Object.fromEntries([...params]), null, 2)
      console.log(&amp;quot;error: &amp;quot;, message)
      return
    }

    // Handle a `connect` response from Phantom
    if (/onConnect/.test(url.pathname)) {
      const sharedSecretDapp = nacl.box.before(
        bs58.decode(params.get(&amp;quot;phantom_encryption_public_key&amp;quot;)!),
        dappKeyPair.secretKey
      )
      const connectData = decryptPayload(
        params.get(&amp;quot;data&amp;quot;)!,
        params.get(&amp;quot;nonce&amp;quot;)!,
        sharedSecretDapp
      )
      setSharedSecret(sharedSecretDapp)
      setSession(connectData.session)
      setPhantomWalletPublicKey(new PublicKey(connectData.public_key))
      console.log(`connected to ${connectData.public_key.toString()}`)
    }

    // Handle a `disconnect` response from Phantom
    if (/onDisconnect/.test(url.pathname)) {
      setPhantomWalletPublicKey(null)
      console.log(&amp;quot;disconnected&amp;quot;)
    }

    // Handle a `signAndSendTransaction` response from Phantom
    if (/onSignAndSendTransaction/.test(url.pathname)) {
      actionSheetRef.current?.hide()
      const signAndSendTransactionData = decryptPayload(
        params.get(&amp;quot;data&amp;quot;)!,
        params.get(&amp;quot;nonce&amp;quot;)!,
        sharedSecret
      )
      console.log(&amp;quot;transaction submitted: &amp;quot;, signAndSendTransactionData)
      Toast.show({
        type: &amp;quot;success&amp;quot;,
        text1: &amp;quot;Review submitted 🎥&amp;quot;,
        text2: signAndSendTransactionData.signature,
      })
    }
  }, [deepLink])

  // Initiate a new connection to Phantom
  const connect = async () =&amp;gt; {
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      cluster: &amp;quot;devnet&amp;quot;,
      app_url: &amp;quot;https://deeplink-movie-tutorial-dummy-site.vercel.app/&amp;quot;,
      redirect_link: onConnectRedirectLink,
    })

    const url = buildUrl(&amp;quot;connect&amp;quot;, params)
    Linking.openURL(url)
  }

  // Initiate a disconnect from Phantom
  const disconnect = async () =&amp;gt; {
    const payload = {
      session,
    }
    const [nonce, encryptedPayload] = encryptPayload(payload, sharedSecret)
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      nonce: bs58.encode(nonce),
      redirect_link: onDisconnectRedirectLink,
      payload: bs58.encode(encryptedPayload),
    })
    const url = buildUrl(&amp;quot;disconnect&amp;quot;, params)
    Linking.openURL(url)
  }

  // Initiate a new transaction via Phantom. We call this in `components/AddReviewSheet.tsx` to send our movie review to the Solana network
  const signAndSendTransaction = async (transaction: Transaction) =&amp;gt; {
    if (!phantomWalletPublicKey) return
    setSubmitting(true)
    transaction.feePayer = phantomWalletPublicKey
    transaction.recentBlockhash = (
      await connection.getLatestBlockhash()
    ).blockhash
    const serializedTransaction = transaction.serialize({
      requireAllSignatures: false,
    })
    const payload = {
      session,
      transaction: bs58.encode(serializedTransaction),
    }
    const [nonce, encryptedPayload] = encryptPayload(payload, sharedSecret)
    const params = new URLSearchParams({
      dapp_encryption_public_key: bs58.encode(dappKeyPair.publicKey),
      nonce: bs58.encode(nonce),
      redirect_link: onSignAndSendTransactionRedirectLink,
      payload: bs58.encode(encryptedPayload),
    })
    const url = buildUrl(&amp;quot;signAndSendTransaction&amp;quot;, params)
    Linking.openURL(url)
  }

  // Open the &amp;#39;Add a Review&amp;#39; sheet defined in `components/AddReviewSheet.tsx`
  const openAddReviewSheet = () =&amp;gt; {
    actionSheetRef.current?.show()
  }

  return (
    &amp;lt;SafeAreaProvider&amp;gt;
      &amp;lt;SafeAreaView style={styles.container}&amp;gt;
        &amp;lt;View style={styles.header}&amp;gt;
          {phantomWalletPublicKey ? (
            &amp;lt;&amp;gt;
              &amp;lt;View style={[styles.row, styles.wallet]}&amp;gt;
                &amp;lt;View style={styles.greenDot} /&amp;gt;
                &amp;lt;Text
                  style={styles.text}
                  numberOfLines={1}
                  ellipsizeMode=&amp;quot;middle&amp;quot;
                &amp;gt;
                  {`Connected to: ${phantomWalletPublicKey.toString()}`}
                &amp;lt;/Text&amp;gt;
              &amp;lt;/View&amp;gt;
              &amp;lt;View style={styles.row}&amp;gt;
                &amp;lt;Button title=&amp;quot;Add Review&amp;quot; onPress={openAddReviewSheet} /&amp;gt;
                &amp;lt;Button title=&amp;quot;Disconnect&amp;quot; onPress={disconnect} /&amp;gt;
              &amp;lt;/View&amp;gt;
            &amp;lt;/&amp;gt;
          ) : (
            &amp;lt;View style={{ marginTop: 15 }}&amp;gt;
              &amp;lt;Button title=&amp;quot;Connect Phantom&amp;quot; onPress={connect} /&amp;gt;
            &amp;lt;/View&amp;gt;
          )}
        &amp;lt;/View&amp;gt;
        {submitting &amp;amp;&amp;amp; (
          &amp;lt;ActivityIndicator
            color={COLORS.WHITE}
            size=&amp;quot;large&amp;quot;
            style={styles.spinner}
          /&amp;gt;
        )}
        &amp;lt;MovieList connection={connection} /&amp;gt;
        &amp;lt;AddReviewSheet
          actionSheetRef={actionSheetRef}
          phantomWalletPublicKey={phantomWalletPublicKey}
          signAndSendTransaction={signAndSendTransaction}
        /&amp;gt;
        &amp;lt;Toast config={toastConfig} /&amp;gt;
        &amp;lt;StatusBar style=&amp;quot;auto&amp;quot; /&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/SafeAreaProvider&amp;gt;
  )
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.DARK_GREY,
    flexGrow: 1,
    position: &amp;quot;relative&amp;quot;,
  },
  greenDot: {
    height: 8,
    width: 8,
    borderRadius: 10,
    marginRight: 5,
    backgroundColor: COLORS.GREEN,
  },
  header: {
    width: &amp;quot;95%&amp;quot;,
    marginLeft: &amp;quot;auto&amp;quot;,
    marginRight: &amp;quot;auto&amp;quot;,
  },
  row: {
    flexDirection: &amp;quot;row&amp;quot;,
    justifyContent: &amp;quot;space-between&amp;quot;,
    marginBottom: 5,
  },
  spinner: {
    position: &amp;quot;absolute&amp;quot;,
    alignSelf: &amp;quot;center&amp;quot;,
    top: &amp;quot;50%&amp;quot;,
    zIndex: 1000,
  },
  text: {
    color: COLORS.LIGHT_GREY,
    width: &amp;quot;100%&amp;quot;,
  },
  wallet: {
    alignItems: &amp;quot;center&amp;quot;,
    margin: 10,
    marginBottom: 15,
  },
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;h2&gt;Wrapping Up&lt;/h2&gt;
&lt;p&gt;Our movie reviews app is now complete! All together, our new flow should look a little something like this:&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/tiYizz9h3YE?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Once we’ve added our review, it will live forever on Solana. Try finding for your review by either scrolling or searching in our app!&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div class=&quot;embedVideo-container&quot;&gt; &lt;iframe title=&quot;&quot; src=&quot;https://www.youtube.com/embed/7ijYr_q7E_s?rel=0&quot; class=&quot;embedVideo-iframe&quot; style=&quot;border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot; loading=&quot;eager&quot; allowfullscreen=&quot;&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;&gt;&lt;/iframe&gt; &lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;If you enjoyed this tutorial or you have any feedback, please let me know via &lt;a href=&quot;https://twitter.com/bfriel_&quot;&gt;Twitter&lt;/a&gt;! Make sure to also check out our Developer Discord where you can stay up to date on the latest from Phantom.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Resending Dropped Transactions]]></title><description><![CDATA[This article was originally published on The Solana Cookbook. Introduction On some occasions, a seemingly valid transaction may be dropped…]]></description><link>https://brianfriel.xyz/resending-dropped-transactions-on-solana/</link><guid isPermaLink="false">https://brianfriel.xyz/resending-dropped-transactions-on-solana/</guid><pubDate>Sat, 15 Jan 2022 20:46:37 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;This article was originally published on &lt;a href=&quot;https://solanacookbook.com/guides/retrying-transactions.html#retrying-transactions&quot;&gt;The Solana Cookbook&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;On some occasions, a seemingly valid transaction may be dropped before it is included in a block. This most often occurs during periods of network congestion, when an RPC node fails to rebroadcast the transaction to the &lt;a href=&quot;https://docs.solana.com/terminology#leader&quot;&gt;leader&lt;/a&gt;. To an end-user, it may appear as if their transaction disappears entirely. While RPC nodes are equipped with a generic rebroadcasting algorithm, application developers are also capable of developing their own custom rebroadcasting logic.&lt;/p&gt;
&lt;h2&gt;The Journey of a Transaction&lt;/h2&gt;
&lt;h3&gt;How Clients Submit Transactions&lt;/h3&gt;
&lt;p&gt;In Solana, there is no concept of a mempool. All transactions, whether they are initiated programmatically or by an end-user, are efficiently routed to leaders so that they can be processed into a block. There are two main ways in which a transaction can be sent to leaders:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;By proxy via an RPC server and the &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction&quot;&gt;sendTransaction&lt;/a&gt; JSON-RPC method&lt;/li&gt;
&lt;li&gt;Directly to leaders via a &lt;a href=&quot;https://docs.rs/solana-client/1.7.3/solana_client/tpu_client/index.html&quot;&gt;TPU Client&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The vast majority of end-users will submit transactions via an RPC server. When a client submits a transaction, the receiving RPC node will in turn attempt to broadcast the transaction to both the current and next leaders. Until the transaction is processed by a leader, there is no record of the transaction outside of what the client and the relaying RPC nodes are aware of. In the case of a TPU client, rebroadcast and leader forwarding is handled entirely by the client software.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c3a612dc41e73a10adf444aee60bce60/c7443/tx-journey.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkElEQVQoz32TS27UQBCGcxoOwB04BDeAbW4QsR0FwYpFIpHHkkhIZAcDiygRbIgSDWEB4pEBjzwOGeNH97gf9aFp28mMM6SkUj+q/fVfXeUVABHBi4Sxtfl5126LrcgSULu21pIkY/4kMVk6YTyOUUotnJsdbT0AW9CFSZco8UwyTXRZkfytUErjnOuolMbrvQDci/rcO3jA9nA/BJRWKD0N872PwtpLzeM3MM5rhJcWAOJALIiXa4XPfrzgbv8+va87YbMoC/KiDDdvHVpWdyc8euUYXnrAYYwLMRULn59POdusSD7UagNQO837dEBuyxtpj1IY/IYvsWBco9DN1Hiyn57jdcXxuiZ63QC7FRNk4cG7NnvDsihxYqkyIT6AqA/Z97mUy/Mjfu0/JP/Wr6HeXUG9F1zj9dpjKoPgKSPPYFPzaUMTH82lfHHY46R3h/jdWqiXczZ8+H+vK1sMhZOnU06fVIzezgFtPiI93cWk51yV7zZrwt6AiqAcgsnkurG7f4EsNO4Sp21+udGH/wAYvU7QRR3jiwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Transaction Journey&quot;
        title=&quot;Transaction Journey&quot;
        src=&quot;/static/c3a612dc41e73a10adf444aee60bce60/fcda8/tx-journey.png&quot;
        srcset=&quot;/static/c3a612dc41e73a10adf444aee60bce60/12f09/tx-journey.png 148w,
/static/c3a612dc41e73a10adf444aee60bce60/e4a3f/tx-journey.png 295w,
/static/c3a612dc41e73a10adf444aee60bce60/fcda8/tx-journey.png 590w,
/static/c3a612dc41e73a10adf444aee60bce60/efc66/tx-journey.png 885w,
/static/c3a612dc41e73a10adf444aee60bce60/c83ae/tx-journey.png 1180w,
/static/c3a612dc41e73a10adf444aee60bce60/c7443/tx-journey.png 3488w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;How RPC Nodes Broadcast Transactions&lt;/h3&gt;
&lt;p&gt;After an RPC node receives a transaction via &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt;, it will convert the transaction into a &lt;a href=&quot;https://en.wikipedia.org/wiki/User_Datagram_Protocol&quot;&gt;UDP&lt;/a&gt; packet before forwarding it to the relevant leaders. UDP allows validators to quickly communicate with one another, but does not provide any guarantees regarding transaction delivery.&lt;/p&gt;
&lt;p&gt;Because Solana’s leader schedule is known in advance of every &lt;a href=&quot;https://docs.solana.com/terminology#epoch&quot;&gt;epoch&lt;/a&gt; (~2 days), an RPC node will broadcast its transaction directly to the current and next leaders. This is in contrast to other gossip protocols such as Ethereum that propagate transactions randomly and broadly across the entire network.  By default, RPC nodes will try to forward transactions to leaders every two seconds until either the transaction is finalized or the transaction’s blockhash expires (150 blocks or ~1 minute 19 seconds as of the time of this writing). If the outstanding rebroadcast queue size is greater than &lt;a href=&quot;https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/send-transaction-service/src/send_transaction_service.rs#L20&quot;&gt;10,000 transactions&lt;/a&gt;, newly submitted transactions are dropped.  There are command-line &lt;a href=&quot;https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/validator/src/main.rs#L1172&quot;&gt;arguments&lt;/a&gt; that RPC operators can adjust to change the default behavior of this retry logic.&lt;/p&gt;
&lt;p&gt;When an RPC node broadcasts a transaction, it will attempt to forward the transaction to a leader’s &lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/validator.rs#L867&quot;&gt;Transaction Processing Unit (TPU)&lt;/a&gt;. The TPU processes transactions in five distinct phases:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/fetch_stage.rs#L21&quot;&gt;Fetch Stage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L91&quot;&gt;SigVerify Stage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/banking_stage.rs#L249&quot;&gt;Banking Stage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/poh/src/poh_service.rs&quot;&gt;Proof of History Service&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L136&quot;&gt;Broadcast Stage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2df9a40c7cc865c061c8256d0299fecf/2d912/tpu-jito-labs.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCUlEQVQoz23SeU/iQBgGcL//Z9i/zK4giIkYjIsHPWkriBqMWkRh7mmhpYXpgYV2Ix7rHm+e5Ene5JeZSWar2MzLaj0R6e8sNhGpK5auWH7unUUSLbPiY7byTQXRsgVEC0YtGEko3lH7tc6TihMdBBoIP/ZRcyQep3FRFPkfOF4qOFJIrNJEQuLbz3bZuO846R1kfTJVSKKQRKXJGYqG3v+wBF8kmEkwk9H62A4adnhN0wHybRJqID4bpy2Qnoxfhl76N54thDzuKrArI0tChowtGXY0YKpDRRvpCrBkcCGNzJNnc+CyDc7f8Gv586BNS4bzvYcbfSTdoFODls1JSac7bV42nbLplAy2I+PtR9f+gvPXmoYzAx1esMNL0uzT9g1RWsPds6cfGtnVWdXgtTbf02lFwqWB+1isiiRN8jzfKopivV5PvIkXTrwF64Hze3R5hzvquKLBqonrFq0brGaxgwtcV1HNdgZplAZh8I6zLCOUIIzoFBh8T2cV06mdj7Zt0hOLOAhnV/yE+kDMI+A8P5CHNP6CV9mKOcz3vUBMuqB5i41boquwYtGDK97s8WOL73d545o3DVy3+UMsknf89nR3Nu1Brc9MY3x0CaUuPFfhvoKrCq4ouKKiPQVXVVI9HZcGzjDP8jiO309+vflqxQKPhZ4zD3jo89B3w/m/4UEo0uXn9/wFaBZ+cFotC40AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;TPU Overview&quot;
        title=&quot;TPU Overview&quot;
        src=&quot;/static/2df9a40c7cc865c061c8256d0299fecf/fcda8/tpu-jito-labs.png&quot;
        srcset=&quot;/static/2df9a40c7cc865c061c8256d0299fecf/12f09/tpu-jito-labs.png 148w,
/static/2df9a40c7cc865c061c8256d0299fecf/e4a3f/tpu-jito-labs.png 295w,
/static/2df9a40c7cc865c061c8256d0299fecf/fcda8/tpu-jito-labs.png 590w,
/static/2df9a40c7cc865c061c8256d0299fecf/efc66/tpu-jito-labs.png 885w,
/static/2df9a40c7cc865c061c8256d0299fecf/c83ae/tpu-jito-labs.png 1180w,
/static/2df9a40c7cc865c061c8256d0299fecf/2d912/tpu-jito-labs.png 1772w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;small style=&quot;display:block;text-align:center;&quot;&gt;Image Courtesy of Jito Labs&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;Of these five phases, the Fetch Stage is responsible for receiving transactions. Within the Fetch Stage, validators will categorize incoming transactions according to three ports:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L27&quot;&gt;tpu&lt;/a&gt; handles regular transactions such as token transfers, NFT mints, and program instructions&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L31&quot;&gt;tpu_vote&lt;/a&gt; focuses exclusively on voting transactions&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L29&quot;&gt;tpu_forwards&lt;/a&gt; forwards unprocessed packets to the next leader if the current leader is unable to process all transactions&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For more information on the TPU, please refer to &lt;a href=&quot;https://jito-labs.medium.com/solana-validator-101-transaction-processing-90bcdc271143&quot;&gt;this excellent writeup by Jito Labs&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;How Transactions Get Dropped&lt;/h2&gt;
&lt;p&gt;Throughout a transaction’s journey, there are a few scenarios in which the transaction can be unintentionally dropped from the network.&lt;/p&gt;
&lt;h3&gt;Before a transaction is processed&lt;/h3&gt;
&lt;p&gt;If the network drops a transaction, it will most likely do so before the transaction is processed by a leader. UDP &lt;a href=&quot;https://en.wikipedia.org/wiki/Packet_loss&quot;&gt;packet loss&lt;/a&gt; is the simplest reason why this might occur. During times of intense network load, it’s also possible for validators to become overwhelmed by the sheer number of transactions required for processing. While validators are equipped to forward surplus transactions via &lt;code class=&quot;language-text&quot;&gt;tpu_forwards&lt;/code&gt;, there is a limit to the amount of data that can be &lt;a href=&quot;https://github.com/solana-labs/solana/blob/master/core/src/banking_stage.rs#L389&quot;&gt;forwarded&lt;/a&gt;. Furthermore, each forward is limited to a single hop between validators. That is, transactions received on the &lt;code class=&quot;language-text&quot;&gt;tpu_forwards&lt;/code&gt; port are not forwarded on to other validators.&lt;/p&gt;
&lt;p&gt;There are also two lesser known reasons why a transaction may be dropped before it is processed. The first scenario involves transactions that are submitted via an RPC pool. Occasionally, part of the RPC pool can be sufficiently ahead of the rest of the pool. This can cause issues when nodes within the pool are required to work together. In this example, the transaction’s &lt;a href=&quot;https://docs.solana.com/developing/programming-model/transactions#recent-blockhash&quot;&gt;recentBlockhash&lt;/a&gt; is queried from the advanced part of the pool (Backend A). When the transaction is submitted to the lagging part of the pool (Backend B), the nodes will not recognize the advanced blockhash and will drop the transaction. This can be detected upon transaction submission if developers enable &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction&quot;&gt;preflight checks&lt;/a&gt; on &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3d427e937ae83e53d430094eecc4cdce/bfbcf/dropped-via-rpc-pool.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABnklEQVQoz4WTy0ocQRSG+6nyOD6HkGXATXAhZCFkESRMRGQI5kZcGAmTBESNM4i5jEZsTSaTOOPc7GvVOV/oru6ZDphYUFWn+j/996mvqj3+01R1FudrN5RxRZ7mev8yKhMknCDjAUQBxNFMK3o1N5u92yozg0tMr4sZDLHXAVl9mW4ERFwsIrcYFnP2QtaOOrDwImLlvc3V3TPl3rOI+seyQikw3GBY3YLNDYXmhXK3HrP81j3/cKLMr8fUdspcnRlWcPzVpdy2QjAOGQcpiXGiFQgiITWKihDHyfSAvOL8qmeJ4pgcjL4wf7TE8cQvIRQYMoYxqg6BYGcM0wkkQzChklyBCSAaCVxD3d/mztYcjV+tfB0O3Ickhaivea4JIb5SJHEFef5z4dOypduAwyVDZ0s5rlnaj4QfDcubBz/pHUD7seXzQ1fJ+BRai4bOtnL+SmjeT+ntF4bdd8rZU6XfgtM15XJP+b6pnL9U+k3wazBqw8Vrxd9waIIOfFtVevvK7x3l5Ikw/FoYlgjVDVWUjmb+Z2gF9VS88bL9AQJ9T3djs+G+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Dropped via RPC Pool&quot;
        title=&quot;Dropped via RPC Pool&quot;
        src=&quot;/static/3d427e937ae83e53d430094eecc4cdce/fcda8/dropped-via-rpc-pool.png&quot;
        srcset=&quot;/static/3d427e937ae83e53d430094eecc4cdce/12f09/dropped-via-rpc-pool.png 148w,
/static/3d427e937ae83e53d430094eecc4cdce/e4a3f/dropped-via-rpc-pool.png 295w,
/static/3d427e937ae83e53d430094eecc4cdce/fcda8/dropped-via-rpc-pool.png 590w,
/static/3d427e937ae83e53d430094eecc4cdce/efc66/dropped-via-rpc-pool.png 885w,
/static/3d427e937ae83e53d430094eecc4cdce/c83ae/dropped-via-rpc-pool.png 1180w,
/static/3d427e937ae83e53d430094eecc4cdce/bfbcf/dropped-via-rpc-pool.png 4416w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Temporarily network forks can also result in dropped transactions. If a validator is slow to replay its blocks within the Banking Stage, it may end up creating a minority fork. When a client builds a transaction, it’s possible for the transaction to reference a &lt;code class=&quot;language-text&quot;&gt;recentBlockhash&lt;/code&gt; that only exists on the minority fork.  After the transaction is submitted, the cluster can then switch away from its minority fork before the transaction is processed. In this scenario, the transaction is dropped due to the blockhash not being found.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/57f7063803f92b7e729e872abb2365aa/924b7/dropped-minority-fork-pre-process.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpElEQVQoz4WTwW4TMRCG96V4Gt6CKxKXcuEAhx64cEBCQrkUgQQHShFFohQEUpsAVUlplChNILCbpkvwZhN75kNrZ7OJiKilWds7439+e/6JuGSo6mURhJAQF/0PSFT8em9YZ6N5j0E+LBz0R8LD/Zwnh4KZlqDBonAYirOL2ZviXADcbNW4snuVD8kRTKfUuzOu1QwbzxxDU/IMI6roKpVLV/4dHDe4v1MjjmO/zyaOZndCq5dh8xlqLeqcj4+Kj/kOv09hEqufi73pQ3oCbgKnJ9/Ye/WGJElCTlEYxZDGoAZkjM5MdeXOY6Vx2/LjNTTuWNqPlPaWUL9lGXcKlg7Bocj8FoKqw00dyaEy2Id8nssDDutKb0dIm9B/KSQH6q23rRR1uGgGf34O2UA52xbSliAOPt3N+HjTMPocnitalcV6iXSeOt7fyBi34fyL8u66ob/rvO/nW+g9D4kWDMuS+yprJYGi0uUbj47AGpileDbZL0Wscvwgp7GZc/GVsihzuay1ZdH+a2Kh+8LS2rL8OVsCXC/sqktKtoskstodyx3zF5Z1Tce5UlzxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Dropped due to Minority Fork (Before Processed)&quot;
        title=&quot;Dropped due to Minority Fork (Before Processed)&quot;
        src=&quot;/static/57f7063803f92b7e729e872abb2365aa/fcda8/dropped-minority-fork-pre-process.png&quot;
        srcset=&quot;/static/57f7063803f92b7e729e872abb2365aa/12f09/dropped-minority-fork-pre-process.png 148w,
/static/57f7063803f92b7e729e872abb2365aa/e4a3f/dropped-minority-fork-pre-process.png 295w,
/static/57f7063803f92b7e729e872abb2365aa/fcda8/dropped-minority-fork-pre-process.png 590w,
/static/57f7063803f92b7e729e872abb2365aa/efc66/dropped-minority-fork-pre-process.png 885w,
/static/57f7063803f92b7e729e872abb2365aa/c83ae/dropped-minority-fork-pre-process.png 1180w,
/static/57f7063803f92b7e729e872abb2365aa/924b7/dropped-minority-fork-pre-process.png 4154w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;After a transaction is processed and before it is finalized&lt;/h3&gt;
&lt;p&gt;In the event a transaction references a &lt;code class=&quot;language-text&quot;&gt;recentBlockhash&lt;/code&gt; from a minority fork, it’s still possible for the transaction to be processed. In this case, however, it would be processed by the leader on the minority fork. When this leader attempts to share its processed transactions with the rest of the network, it would fail to reach consensus with the majority of validators that do not recognize the minority fork. At this time, the transaction would be dropped before it could be finalized.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/250c822278d34b6ecfafac937ebb6da0/bbb71/dropped-minority-fork-post-process.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABoklEQVQoz4WSy27TUBCG/Wy8C2+BWCEECzYgdUkrVuy4NMKrgqo2ILUqSauUFBzTBhoncQqu69x8OfMhn5w4dlqJkcbj8Rn/859/xuIOE5EiLh2kXFH6vqrPzfofoDJg8xRe1WM29xNGEZWG5X+sNaRboEsLxgmPt6c82o65DECyuOBcYZi/V33VdRQHPGhv8HF4QDZLGcfCLAXXdanX9/F9/xZTSyfKaKIjZErpQyf6zb3d+2ydvzfKZTq2Wi1s26bb7epcZcpcTu7ScDmAlOuex1v7He3vZ/okTReAnY5LrVZjOBiuDQqsq6Yw/CyEjuB9UoQODOpCeDJnPOhx+vWIft9bMDHM86senzSJJjdcOwrnww3jX4ah+1rxbSOjtyM0n6Z4O9B6kXLxRiEqQwUhklZXBqUvoO2nPWXv4R/8L2Yo0wFMLmH+F6KLPIruFud5F46fJ3i7C2YqWQD39xSNZ3MmHlw1FI0nCcFpsTZC1Vc6TvrC2VaCf2gAMzP9I0X7ZcJsBGEHfmwK0bmU1kaZlVmP+kExwbL4FCu2qs81/AebxUy28IqbggAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Dropped due to Minority Fork (After Processed)&quot;
        title=&quot;Dropped due to Minority Fork (After Processed)&quot;
        src=&quot;/static/250c822278d34b6ecfafac937ebb6da0/fcda8/dropped-minority-fork-post-process.png&quot;
        srcset=&quot;/static/250c822278d34b6ecfafac937ebb6da0/12f09/dropped-minority-fork-post-process.png 148w,
/static/250c822278d34b6ecfafac937ebb6da0/e4a3f/dropped-minority-fork-post-process.png 295w,
/static/250c822278d34b6ecfafac937ebb6da0/fcda8/dropped-minority-fork-post-process.png 590w,
/static/250c822278d34b6ecfafac937ebb6da0/efc66/dropped-minority-fork-post-process.png 885w,
/static/250c822278d34b6ecfafac937ebb6da0/c83ae/dropped-minority-fork-post-process.png 1180w,
/static/250c822278d34b6ecfafac937ebb6da0/bbb71/dropped-minority-fork-post-process.png 4580w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Handling Dropped Transactions&lt;/h2&gt;
&lt;p&gt;While RPC nodes will attempt to rebroadcast transactions, the algorithm they employ is generic and often ill-suited for the needs of specific applications. To prepare for times of network congestion, application developers should customize their own rebroadcasting logic.&lt;/p&gt;
&lt;h3&gt;An In-Depth Look at sendTransaction&lt;/h3&gt;
&lt;p&gt;When it comes to submitting transactions, the &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt; RPC method is the primary tool available to developers. &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt; is only responsible for relaying a transaction from a client to an RPC node. If the node receives the transaction, &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt; will return the transaction id that can be used to track the transaction. A successful response does not indicate whether the transaction will be processed or finalized by the cluster.&lt;/p&gt;
&lt;h4&gt;Request Parameters&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;transaction&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;string&lt;/code&gt; - fully-signed Transaction, as encoded string&lt;/li&gt;
&lt;li&gt;(optional) &lt;code class=&quot;language-text&quot;&gt;configuration object&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;object&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;skipPreflight&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;boolean&lt;/code&gt; - if true, skip the preflight transaction checks (default: false)&lt;/li&gt;
&lt;li&gt;(optional) &lt;code class=&quot;language-text&quot;&gt;preflightCommitment&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;string&lt;/code&gt; - &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment&quot;&gt;Commitment&lt;/a&gt; level to use for preflight simulations against the bank slot (default: “finalized”).&lt;/li&gt;
&lt;li&gt;(optional) &lt;code class=&quot;language-text&quot;&gt;encoding&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;string&lt;/code&gt; - Encoding used for the transaction data. Either “base58” (slow), or “base64”. (default: “base58”).&lt;/li&gt;
&lt;li&gt;(optional) &lt;code class=&quot;language-text&quot;&gt;maxRetries&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;usize&lt;/code&gt; - Maximum number of times for the RPC node to retry sending the transaction to the leader. If this parameter is not provided, the RPC node will retry the transaction until it is finalized or until the blockhash expires.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Response&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;transaction id&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;string&lt;/code&gt; - First transaction signature embedded in the transaction, as base-58 encoded string. This transaction id can be used with &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#getsignaturestatuses&quot;&gt;getSignatureStatuses&lt;/a&gt; to poll for status updates.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Customizing Rebroadcast Logic&lt;/h2&gt;
&lt;p&gt;In order to develop their own rebroadcasting logic, developers should take advantage of &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt;’s &lt;code class=&quot;language-text&quot;&gt;maxRetries&lt;/code&gt; parameter. If provided, &lt;code class=&quot;language-text&quot;&gt;maxRetries&lt;/code&gt; will override an RPC node’s default retry logic, allowing developers to manually control the retry process &lt;a href=&quot;https://github.com/solana-labs/solana/blob/master/validator/src/main.rs#L1316-L1332&quot;&gt;within reasonable bounds&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A common pattern for manually retrying transactions involves temporarily storing the &lt;code class=&quot;language-text&quot;&gt;lastValidBlockHeight&lt;/code&gt; that comes from &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#getlatestblockhash&quot;&gt;getLatestBlockhash&lt;/a&gt;. Once stashed, an application can then &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#getblockheight&quot;&gt;poll the cluster’s blockheight&lt;/a&gt; and manually retry the transaction at an appropriate interval. In times of network congestion, it’s advantageous to set &lt;code class=&quot;language-text&quot;&gt;maxRetries&lt;/code&gt; to 0 and manually rebroadcast via a custom algorithm. While some applications may employ an &lt;a href=&quot;https://en.wikipedia.org/wiki/Exponential_backoff&quot;&gt;exponential backoff&lt;/a&gt; algorithm, others such as &lt;a href=&quot;https://www.mango.markets/&quot;&gt;Mango&lt;/a&gt; opt to &lt;a href=&quot;https://github.com/blockworks-foundation/mango-ui/blob/b6abfc6c13b71fc17ebbe766f50b8215fa1ec54f/src/utils/send.tsx#L713&quot;&gt;continuously resubmit&lt;/a&gt; transactions at a constant interval until some timeout has occurred.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;typescript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;(async () =&amp;gt; {
while (!done &amp;amp;&amp;amp; getUnixTs() - startTime &amp;lt; timeout) {
    connection.sendRawTransaction(rawTransaction, {
        skipPreflight: true,
    });
    await sleep(300);
}
})();&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;When polling via &lt;code class=&quot;language-text&quot;&gt;getLatestBlockhash&lt;/code&gt;, applications should specify their intended &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment&quot;&gt;commitment&lt;/a&gt; level. By setting its commitment to &lt;code class=&quot;language-text&quot;&gt;confirmed&lt;/code&gt; (voted on) or &lt;code class=&quot;language-text&quot;&gt;finalized&lt;/code&gt; (~30 blocks after &lt;code class=&quot;language-text&quot;&gt;confirmed&lt;/code&gt;), an application can avoid polling a blockhash from a minority fork.&lt;/p&gt;
&lt;p&gt;If an application has access to RPC nodes behind a load balancer, it can also choose to divide its workload amongst specific nodes. RPC nodes that serve data-intensive requests such as &lt;a href=&quot;https://solanacookbook.com/guides/get-program-accounts.html#get-program-accounts&quot;&gt;getProgramAccounts&lt;/a&gt; may be prone to falling behind and can be ill-suited for also forwarding transactions. For applications that handle time-sensitive transactions, it may be prudent to have dedicated nodes that only handle &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;The Cost of Skipping Preflight&lt;/h3&gt;
&lt;p&gt;By default, &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt; will perform three preflight checks prior to submitting a transaction. Specifically, &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt; will:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Verify that all signatures are valid&lt;/li&gt;
&lt;li&gt;Check that the referenced blockhash is within the last 150 blocks&lt;/li&gt;
&lt;li&gt;Simulate the transaction against the bank slot specified by the &lt;code class=&quot;language-text&quot;&gt;preflightCommitment&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In the event that any of these three preflight checks fail, &lt;code class=&quot;language-text&quot;&gt;sendTransaction&lt;/code&gt; will raise an error prior to submitting the transaction. Preflight checks can often be the difference between losing a transaction and allowing a client to gracefully handle an error. To ensure that these common errors are accounted for, it is recommended that developers keep &lt;code class=&quot;language-text&quot;&gt;skipPreflight&lt;/code&gt; set to &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;When to Re-Sign Transactions&lt;/h3&gt;
&lt;p&gt;Despite all attempts to rebroadcast, there may be times in which a client is required to re-sign a transaction. Before re-signing any transaction, it is &lt;strong&gt;very important&lt;/strong&gt; to ensure that the initial transaction’s blockhash has expired. If the initial blockhash is still valid, it is possible for both transactions to be accepted by the network. To an end-user, this would appear as if they unintentionally sent the same transaction twice.&lt;/p&gt;
&lt;p&gt;In Solana, a dropped transaction can be safely discarded once the blockhash it references is older than the &lt;code class=&quot;language-text&quot;&gt;lastValidBlock&lt;/code&gt; received from &lt;code class=&quot;language-text&quot;&gt;getRecentBlockhash&lt;/code&gt;. Developers can conveniently check this for a given blockhash via &lt;a href=&quot;https://docs.solana.com/developing/clients/jsonrpc-api#isblockhashvalid&quot;&gt;isBlockhashValid&lt;/a&gt;. Once a blockhash is invalidated, clients may re-sign with a newly-queried blockhash.&lt;/p&gt;
&lt;h2&gt;Acknowledgements&lt;/h2&gt;
&lt;p&gt;Many thanks to Trent Nelson, &lt;a href=&quot;https://twitter.com/jacobvcreech&quot;&gt;Jacob Creech&lt;/a&gt;, White Tiger, Le Yafo, &lt;a href=&quot;https://twitter.com/buffalu__&quot;&gt;Buffalu&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/jito_labs&quot;&gt;Jito Labs&lt;/a&gt; for their review and feedback.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Creating Tokens on Solana]]></title><description><![CDATA[Introduction For many newcomers, Solana can at first appear confusing. Terms like accounts, programs, mints, and authorities are often…]]></description><link>https://brianfriel.xyz/how-to-create-a-token-on-solana/</link><guid isPermaLink="false">https://brianfriel.xyz/how-to-create-a-token-on-solana/</guid><pubDate>Wed, 17 Nov 2021 01:22:04 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;For many newcomers, &lt;a href=&quot;https://solana.com/&quot;&gt;Solana&lt;/a&gt; can at first appear confusing. Terms like accounts, programs, mints, and authorities are often misunderstood, as each refers to something unique to the Solana ecosystem. In contrast to most other blockchains, Solana declined to build on the &lt;a href=&quot;https://ethereum.org/en/developers/docs/evm/&quot;&gt;Ethereum Virtual Machine (EVM)&lt;/a&gt; and instead built its own &lt;a href=&quot;https://github.com/solana-labs/solana&quot;&gt;Rust-based architecture&lt;/a&gt; entirely from scratch. As a result, Solana is one of the most performant, yet least well-understood, blockchains in the world.&lt;/p&gt;
&lt;p&gt;To better understand the intricacies of Solana, I decided to create my own token and document the process for others to follow. My token is called &lt;a href=&quot;https://explorer.solana.com/address/BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&quot;&gt;BUG&lt;/a&gt; and if you can’t tell by its official logo it has absolutely zero value so please do not try and buy it.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3cbea8dc2d837608e5d3b7564d07893c/eb390/logo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEuElEQVQ4y61Ue0xTZxQ/vXUCM9nmY4YRR5gmc2bRRTcTl2WJOMzcy8wZdUYdGSwxRhPifMB0Os0Y+AKESxF6+y5t72159NbSNwWKIKjQCiKWAWoxgsijIuro456lncsWx9w/+yVfcs73nfP7fuc7+Q6YriIyrjGmbQTBdsc+Q+T+jCe6mgyijmSQdqX8ffH+tJ/BywDwwVObB+zlKaQMPSmahvugbb7JL2tbEyWbhhCmIeQ9yw5iY9/X9m6Ea4+Qh4ggbF8DBc0bYO78P84Le0ieZFROSMdkfOGQmPilJRcicc+Q/kWccVwEjcYRgpWUE6aTV4iKzQ9BoNLBofNHgOEq+TmtJ0AyKgOZXwlld0XRHOGghLiLgaht24i86sNthKnESRgyb/AgfkFComZXB5gpO7C7B+AcINCskh8JZrACsh2nXy3qEXxc3F+yudBbvDKyXzZEQcWomY+AoF2FwB7wQk2hC/S7fdFLUlr34ULDyQsp1emDy84AvljFSKNllQ5Qh2WTslE6zCAd0GH5YzVKJiSXSa/gfc0gC+RJ5DGr8E12b+9aY+6l9frdvjfATjWkOz35E3W9P6Oz89QTRwN1xXDMulo6IT8r8J3DIrcElRO6EI10SOpXhgvbxCh7pAwIXOWfmLI60i2VunpHU4nH6c732AxqMdTYyaQ2XBrvxsQ5bpwV34uJryuukQeUATUaBxpCkyMYHrj1GNV9Js7tu82F/ThV7+1E0Yj8+glqfVz55+NgoWxQQ9YD/Q4CGDJvLDeVOo6aiut+On+69VsH4Gz5A41YESrH9s47QW/Hdez1erl2xwTXYrvG1deb0dc1GZIP61DQJU4x7+z/yCSynjEV16XpkvElcDSVOF0P9jobHmaQF7pK9u/fmrml9BZ1XY00Oofc4R2b9nDxSQlY7XWhoIzhvtt6gDN5LofVyKCshTlVy2h21t05esReT31fnXZvMVRtG4dm3AIbAWOLEKLNENwuvaTlKlGFqhDzhOXyPXlckS8bK0NGzhCoRTVHhzRBLZL3C7/SW/TgtFHRktVJCMBm9L9tt8qba9sLxq1mhcdx6kKGtIcmNUgj3WMLMP7zqEYJJxos4jRBBlUhDceEKrD8seY3kcD+qfWsK9VU5thVtWNskeHHTgCz0L7O5d/3TQtuercRty1uDW6fl8vmJCqmFMPamzbUHh+YYhqbQwynj6gK0kFdIKKOuichNYCxNotqndOTV2xlNbqKL4ILoU7ggSZ/FnRjGtC+LyF1z1xQ3lNAvof8UBGSj9GjBmQam5H265FGLaqnGBSPyKpWrFs+s/SYEZwsDRamEi5hcpwhs3seJL22KHb1+rfilrw3f9a8hFmvxMTx5zzESUI2rIJj+hMLKL8wT47Si4pJlUfmV1oEt0pTI+98kM0CIasjaqsYwlqpm9GE28GQ2f2PWfECACREPrsLLxI5TaeBQXW0USvWroz5FW+CcEgc9c90FvCK+8+BolscVVjbng+Gg16YFpEEH96FQi/JY8IV/Ii/NGUZeLGPoIbE/MjEyessALKvZNp83r/OtqfIMh6C7Iu5kFaUHi31h5rD8DzEAMBMAJgBALMBYD78z1jyPLX/hd8BzYjbXT7sQIEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;BugLogo&quot;
        title=&quot;BugLogo&quot;
        src=&quot;/static/3cbea8dc2d837608e5d3b7564d07893c/fcda8/logo.png&quot;
        srcset=&quot;/static/3cbea8dc2d837608e5d3b7564d07893c/12f09/logo.png 148w,
/static/3cbea8dc2d837608e5d3b7564d07893c/e4a3f/logo.png 295w,
/static/3cbea8dc2d837608e5d3b7564d07893c/fcda8/logo.png 590w,
/static/3cbea8dc2d837608e5d3b7564d07893c/efc66/logo.png 885w,
/static/3cbea8dc2d837608e5d3b7564d07893c/eb390/logo.png 935w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;All in, it cost me a grand total of 0.0035 SOL, or $0.75, to create BUG and mint myself one billion units. Sending BUG between two established parties costs less than one-tenth of one penny, further underscoring Solana’s potential to let everyday people interact with one another on-chain.&lt;/p&gt;
&lt;p&gt;My goal in writing this tutorial is to help others gain a better understanding of Solana, and in the process deliver a practical guide to creating tokens.&lt;/p&gt;
&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This walkthrough does not require you to have prior coding experience, but it does assume some basic understanding of how to use a &lt;a href=&quot;https://en.wikipedia.org/wiki/Command-line_interface&quot;&gt;Command Line Interface (CLI)&lt;/a&gt;. We’ll cover three main sections:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Creating our token via the SPL Token Program&lt;/li&gt;
&lt;li&gt;Adding an official name and logo to our token for the rest of the world to see&lt;/li&gt;
&lt;li&gt;Interacting with our token via transfers, burns, and account freezes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In each section, we’ll go over the concepts behind what is happening under the hood, with the goal of gaining a better understanding of how tokens work on Solana.&lt;/p&gt;
&lt;h2&gt;Creating a Token&lt;/h2&gt;
&lt;p&gt;All tokens on Solana, whether they are fungible tokens or NFTs, are created using the &lt;a href=&quot;https://spl.solana.com/token&quot;&gt;SPL Token Program&lt;/a&gt;. SPL stands for &lt;a href=&quot;https://spl.solana.com/&quot;&gt;Solana Program Library&lt;/a&gt;, and is a set of programs (aka smart contracts) that serve as core building blocks for the Solana ecosystem.&lt;/p&gt;
&lt;p&gt;If you’re familiar with Ethereum, you can think of SPL tokens as a token standard such as &lt;a href=&quot;https://ethereum.org/en/developers/docs/standards/tokens/erc-20/&quot;&gt;ERC-20&lt;/a&gt; or &lt;a href=&quot;https://ethereum.org/en/developers/docs/standards/tokens/erc-20/&quot;&gt;ERC-721&lt;/a&gt;. One key difference, however, is that Solana does not require you to deploy a new contract for each token you create. Instead, it simply requires you to send instructions to the Token Program and it will create and mint tokens on your behalf.&lt;/p&gt;
&lt;p&gt;We can interact with the Token Program in both on-chain and off-chain applications via &lt;a href=&quot;https://crates.io/crates/spl-token&quot;&gt;Rust crates&lt;/a&gt;, &lt;a href=&quot;https://github.com/solana-labs/solana-program-library/blob/master/token/program/inc/token.h&quot;&gt;C bindings&lt;/a&gt;, and &lt;a href=&quot;https://github.com/solana-labs/solana-program-library/blob/master/token/js/client/token.js&quot;&gt;JavaScript bindings&lt;/a&gt;. For the purposes of this tutorial we’ll be using &lt;a href=&quot;https://spl.solana.com/token#command-line-utility&quot;&gt;Solana’s CLI Toolkit&lt;/a&gt; which is the easiest and most straightforward way to get started. I may explore how you can integrate the Token Program with Rust and JavaScript in a future tutorial.&lt;/p&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;Before we can create anything, we first have to install the necessary command line tools. Namely: &lt;a href=&quot;https://docs.solana.com/cli/install-solana-cli-tools&quot;&gt;Solana&lt;/a&gt; and the &lt;a href=&quot;https://spl.solana.com/token#command-line-utility&quot;&gt;SPL-Token Library&lt;/a&gt;. I’ve linked to guides on how to install them which include installing their necessary dependencies such as Rust.&lt;/p&gt;
&lt;p&gt;You’ll also need to set up a &lt;a href=&quot;https://docs.solana.com/wallet-guide/cli&quot;&gt;command line wallet&lt;/a&gt; and fund it with SOL in order to pay for the creation of your token. For the purposes of this demonstration, I used a simple &lt;a href=&quot;https://docs.solana.com/wallet-guide/file-system-wallet&quot;&gt;file system wallet&lt;/a&gt;. Make sure you properly backup your recovery phrase.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;🚨 WARNING: This tutorial covers using real funds on mainnet. Do not fund your wallet with more SOL than you are willing to lose.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Section two of this tutorial (Naming and Logos) is only applicable to Solana’s mainnet. If you’re not already familiar with using the command line or recovering a wallet from its seed phrase, I recommend skipping this section and following this tutorial using fake money on Solana’s devnet. I’ll cover how you can switch to devnet later on in the tutorial.&lt;/p&gt;
&lt;p&gt;Before proceeding, you should be able to run the following commands in your terminal:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana --version
spl-token --version&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;I created my token with the following versions:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana-cli 1.7.14
spl-token-cli 2.0.15&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;You should also have already set up a command line wallet, whose address you can check by running:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana address&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;At the time of this writing, my setup runs on MacOS 12.0.1. For the purposes of this walkthrough, I won’t be covering anything related to other operating systems such as Linux or Windows.&lt;/p&gt;
&lt;h3&gt;Understanding What our Address Signifies&lt;/h3&gt;
&lt;p&gt;One of the most important concepts to understand in Solana is the &lt;a href=&quot;https://solana.wiki/zh-cn/docs/account-model/#account-storage&quot;&gt;account model&lt;/a&gt;. &lt;strong&gt;Accounts&lt;/strong&gt; can be thought of as storage buckets, capable of storing nearly everything Solana touches: from tokens such as SOL and SRM, to a program’s state (e.g. integers, strings, public keys), and even entire programs themselves. Every account has a specified owner, and a single owner can own many different kinds of accounts. In addition to its owner’s address, each account also has its own address making it easily identifiable.&lt;/p&gt;
&lt;p&gt;To make this all a little easier to follow, I completed this tutorial using vanity addresses that are more human-readable (NB: Vanity addresses are entirely optional, but I’ve added a quick guide on how you can generate your own at the end of this tutorial). In this walkthrough, we’ll refer to &lt;code class=&quot;language-text&quot;&gt;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T&lt;/code&gt;, or “Friel”, as the address for our command-line wallet. Note that even if you generate your own vanity address, you won’t be able to generate the exact same address I did.&lt;/p&gt;
&lt;h4&gt;Funding our Wallet&lt;/h4&gt;
&lt;p&gt;Let’s go ahead and fund our command line wallet with a little bit of SOL. I did 0.2 SOL, but ~$5 worth should be plenty. If you’re on mainnet, you can send SOL from an exchange like &lt;a href=&quot;https://ftx.us/home/#a=1490381&quot;&gt;FTX&lt;/a&gt; or &lt;a href=&quot;https://www.coinbase.com/join/friel_t3&quot;&gt;Coinbase&lt;/a&gt;. If you want to proceed on devnet, open up your terminal and run:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana config set --url devnet&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;And then airdrop yourself 0.2 SOL with:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana airdrop 0.2&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Once funded, we can visualize our main account with the below diagram:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5fed788e7a7dad08a6975ef3c93d2532/6d2da/friel-diagram.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 110.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC9UlEQVQ4y+WUyU8TYRTAnwx/ikcP3kz0aky86MEENdFLowYNFCgtbWc6nU43NmNAoQhFtkBb2plubI24RKNRQRINRkMQlBiEspaWlrZT55kPauJl4A/gS16+N/lefvN2gON96gZ+QW3PAtS454AZ3izhgrsUF0pTllC6lAjRuWCKon3rJZUds6B+/AW0fT+VgZon3+HeoxlQ1T8nQLCEMgcSLkrx2+iNw7krWrjOCEDAiqe2dxEq2j+DquEFZRhaOUt719Qm/1YTG0i42ECi3eTfqqe9a+X6weXTxP6CqhGqOr8qA5nhDRIO6AeXLVwojfbRP2gf+19ktI0WkAumUNe/dMPoiQMJXxFoFlOlZjFFwu2zRvNojeaz1mhe4iM5iY/m9m9rNJ8jb0ZPnDaLSTCLSUoRyEeylGMCgQuluxjvCtb1zEmG/h+yoX9RruuZk/Xk7p0vmAObyAo7Wvs4giW8pwwkj44YAWbc+r4FrGx9K1W1Tck1rhmsapvC6rZpWf3wXYEeWkZWTOmIrSWUOcTD8B5lHZGAFZJuPpRGky8uaTo+ydXtHwkMa7tmZU7cKfDhDDLDmzo+mjsaaAnvARtIuB0TiM4JlDgxQSBIhA+nZWcMC45xRNq3riu20eFAPpIFVki4i5WVHBMoOw/g6BhH2T4mF0i1Gd+Grtibh+eQJx4KiU4CbHiKUtMkygRUBBP9H1B7JJCPZEuJhyb/9kDjJOKdB++zF9Wugm1EkjghIZkD2wSWIyEzvg2G/PzQKpuFJMUKCTAMreidMUSV8yWeVzUjH8kg411FxrOCtpE88pEsGgZ/l5n82yTfyo19q/k1nLlUUZzrhVN8ZO9m/TjSrJB0msVdByum9AbP6lVN9/zJgQUERIQyvUd59G7ffwOX1Z37urZvCRqfIbS8QiCtZBuVwT6GwAV39zdSLI/7dtfogDKQrKLqrm9Q6Zolc11i8m9RtHeNIonngmR17VJk1Iye1RN3W6ehvOUDaLrnj/nSh7+ipyQLI/YWmQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Friel Account Diagram&quot;
        title=&quot;Friel Account Diagram&quot;
        src=&quot;/static/5fed788e7a7dad08a6975ef3c93d2532/fcda8/friel-diagram.png&quot;
        srcset=&quot;/static/5fed788e7a7dad08a6975ef3c93d2532/12f09/friel-diagram.png 148w,
/static/5fed788e7a7dad08a6975ef3c93d2532/e4a3f/friel-diagram.png 295w,
/static/5fed788e7a7dad08a6975ef3c93d2532/fcda8/friel-diagram.png 590w,
/static/5fed788e7a7dad08a6975ef3c93d2532/efc66/friel-diagram.png 885w,
/static/5fed788e7a7dad08a6975ef3c93d2532/6d2da/friel-diagram.png 936w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;So far, there’s not a lot going on. The account holds some SOL that we deposited from an external source. It also has an address (in my case, &lt;code class=&quot;language-text&quot;&gt;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T&lt;/code&gt;) that we can use to identify it. If you paste your address into a &lt;a href=&quot;https://explorer.solana.com/&quot;&gt;block explorer&lt;/a&gt;, it should look something like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ae2564d5fc93b1db8ac7add1f6fe0d10/d777c/friel0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.21621621621621%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQoz33QW27DIBAF0O6hso2ZGYYBBhw/6iRS+9FuoGvoSrr8ynEezUORzgcYru6YFwwehUlDmUbWuGzPomAUSsEX9SV7Efz+xN8f/NqhI4zyUkNbQ9uglayhaCg5lBy7Ijm1TEfuhBAQa2vW1BKurAHvUper09dVZc0DcLlz1QzeWaaHzlNYpqtwZY1xOO13XhOneC+PQ7+dh3nut3Mehwbtv2ZrDMG03+nQUwwuxSfKNDYI9WH4dewlvP14n/Y7lyJruucOZNOltzV8/c9p04F4EAb/DAZ/PTa0DQEK1wSG6dEjNyfm1dQ1mLvmvsvDBjxbdrf8EYr3mmq4aYY2jb3OIySxwa/awO2yWEa1wiCeonBJVXvXTBpJo+uUi3LJXHIYNjL0yzary8q6HFGOt80X9rI2BIbgyYU/Lv5bpO2YVfkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Starting Friel account&quot;
        title=&quot;Starting Friel account&quot;
        src=&quot;/static/ae2564d5fc93b1db8ac7add1f6fe0d10/fcda8/friel0.png&quot;
        srcset=&quot;/static/ae2564d5fc93b1db8ac7add1f6fe0d10/12f09/friel0.png 148w,
/static/ae2564d5fc93b1db8ac7add1f6fe0d10/e4a3f/friel0.png 295w,
/static/ae2564d5fc93b1db8ac7add1f6fe0d10/fcda8/friel0.png 590w,
/static/ae2564d5fc93b1db8ac7add1f6fe0d10/efc66/friel0.png 885w,
/static/ae2564d5fc93b1db8ac7add1f6fe0d10/c83ae/friel0.png 1180w,
/static/ae2564d5fc93b1db8ac7add1f6fe0d10/d777c/friel0.png 1555w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Creating our Token&lt;/h3&gt;
&lt;p&gt;Let’s make things more interesting and create our first token. In our terminal, let’s run:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token create-token --enable-freeze&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;You should immediately see the message: &lt;code class=&quot;language-text&quot;&gt;Creating token &amp;lt;SOME-ADDRESS&gt;&lt;/code&gt;. Copy that address as we’ll be using it later.&lt;/p&gt;
&lt;p&gt;What just happened? Recall that if we were creating a token on Ethereum, we would have had to write a new ERC20 contract and then deploy it to mainnet. Here on Solana, all we had to do to create a token was to send instructions to the Token Program. Specifically, our &lt;code class=&quot;language-text&quot;&gt;create-token&lt;/code&gt; command sent two instructions:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;To create a new account (this is carried out by the &lt;a href=&quot;https://docs.solana.com/developing/runtime-facilities/programs#system-program&quot;&gt;System Program&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;To recognize this new account as a Token &lt;a href=&quot;https://docs.solana.com/integrations/exchange#token-mints&quot;&gt;Mint&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Solana lets us bundle both of these instructions into a single transaction. We can visualize this transaction like so:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3758784940ce310bd892d8bcd496b0f9/ed8a2/friel-creates-bug.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 92.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEzklEQVQ4y42UfUyTVxTGn/bFTceYTp0xbi7OZZlGBUU23bQziBP69n3bukkYJG5+oFKobRVn+NAWKhI3p2wTM3QCUqAtWD7KhyKgFjraYo0oVBEEQdmHU6coKi2Id3lJJC4umyd5cu8f5/7y3HPuPUgsuI14w03E5f0Otek+X1PykNIU91EJxlu8lMohcIr+8SxeOHYc7UViwR1s0/UgqbQf2rIBJJs9SDDewq7jBLuOETxOA5JX+yI+YhYuH2H47TqWas9hqZZMEa8thwWnkUgs+Atx+huIze56TVP8YFlSaX9oUskjNl7/51SNeRBbD7eBenMJAhfMRKwAaDvCoCNXjA4dC1emCO05LNp1zwCTSh9RyaX92GG6tzu5tJ8kmz0k2ewmmuIHDe2EjOQt9J8JJcA5XNKZKxZf0bHSlsOi6VfzxLiYJeJfzGK4FYjTdVPxeT3YXnB7f+whF1GlO/u3ZFwgiYYb51P37KX8/f29GOGyl0aNf4+KWx8ypjNP2nY1X0I4teWwCs6tZV8QLmUzw+KKTqVWEWjLPGlas5sk5P/m1hTdJykVg+f2JslfnTf/w3GCxYvGT5n67ljN1nVvtOV+dsWVxZJL2WLSeoTd03RQOPP8IXpa82EanMB1VV3UB3XR/Z+SzG6y6xgZTKkcItryQRd55srBi2fja5EP1a2XOH8tkA71GKWeq/kSz3WjlHTkig9eN0hxzSClsCrpGH/lljxEpTlVkd9ZBzSm3gfbjTeH1KbewgoXwVPo3LnvD++d++ZPsORum9SctcLWnMmSlqxhp5muLK6WYgpp5QSWcwRrGvuw0/Ro3HZT3zR1+cPJ4qoiLw7Q5ezwSUzX+vgFzJ04e9bs140lVa8QH6AjT1J5TS8l3XopuaITH+zWS9Gll1DQ5vciNesOFOsqoC68hX1lBJFlVkRZv8H+upxJ2fUFk79oSsBCvMX3C/7Ay3I0fRTnuTkjcHqLLkLg0oULLmQETW099AkuZoqAjd/asCqxHFt29yDC+DP/7UovLM+Ve9MW+fdsg/I606DoEtbFpHxcGEEFpIpAHATle8LQbIwCCAEHbzLI0VSiRivX5acRVLIGYd1qXvhtLUQ2hZ6u2EiCDWtJsH4toatkRGRXHFjduRPryAEelx+qbcCZU8Xe9tqj3gWEoLqVgHuLI0HXxfBDTsoQUhM1g21UPWYdqiG6OvoxfUI2yDpUhG1U3Quv3jpdQtIhCFv2MgB+TU2Nj81mG2O322G1Wv/5p2mrnE9bYiC0xASwjUrC2pSD9InoJ6LamCesXfmEbVS5o+u0H40GeAGBCyb6+fmN1ev13oQQHte854DB1Rt5gpxwLMoIHcM4lO2MRU7o47IBuko2wNRvIoxd6eQO+s+Zh1mj34Gvry8MBgPu3r0Lt9v9PJB1KCFq2MQXWeUQnpIJGIfyD9apIpwYh7IrpDZq3tLT6yEs3cCfM2XGCLC3txcej+dfgGdUWOHaBvHZzTzRL5u4Jk2g62LC6LqYlYGFX/rQ9XIwdgVf7NwM4eno/5+LS01fIZL8gM8vx4GxK/mfVkZydR1WkHktGJuCLzkfi9DORAh0ES82bJdXbYDkXCwkTbEIOSnj0fVyilNIbRSPcSjBNqrwaUXkf0L+BpiNbFL8pykBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Friel creates BUG&quot;
        title=&quot;Friel creates BUG&quot;
        src=&quot;/static/3758784940ce310bd892d8bcd496b0f9/fcda8/friel-creates-bug.png&quot;
        srcset=&quot;/static/3758784940ce310bd892d8bcd496b0f9/12f09/friel-creates-bug.png 148w,
/static/3758784940ce310bd892d8bcd496b0f9/e4a3f/friel-creates-bug.png 295w,
/static/3758784940ce310bd892d8bcd496b0f9/fcda8/friel-creates-bug.png 590w,
/static/3758784940ce310bd892d8bcd496b0f9/efc66/friel-creates-bug.png 885w,
/static/3758784940ce310bd892d8bcd496b0f9/c83ae/friel-creates-bug.png 1180w,
/static/3758784940ce310bd892d8bcd496b0f9/ed8a2/friel-creates-bug.png 1972w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If you take a look at &lt;a href=&quot;https://explorer.solana.com/tx/2wAaKQw2vhraXqM8beFkKm3fgG11zpRrVa3V9XYA6eKfgVn2YmKppQCCgsbstRYHgsib9jz97F4nUZy4EsTVM2bM&quot;&gt;my transaction&lt;/a&gt;, you’ll see that the entire transaction cost my “Friel” account 0.0014716 SOL or ~$0.31. If you scroll to the “Instructions” section at the bottom of the explorer, you’ll see that the vast majority of this fee (0.0014616 SOL) was used to fund the new account we created. This new account is called a &lt;strong&gt;mint&lt;/strong&gt; because it will hold all the metadata that describes our token’s features, such as its supply, number of decimals, and the various addresses that have authority over parts of it.&lt;/p&gt;
&lt;p&gt;In keeping with the human-readable theme, I initialized this mint at &lt;code class=&quot;language-text&quot;&gt;BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&lt;/code&gt; or “BUG”. If you ran the last command on your own, you initialized your mint at a randomly generated address. I cover how you can use vanity addresses at the end of this tutorial.&lt;/p&gt;
&lt;p&gt;Why did it cost us so much to create an account relative to other transactions on Solana? By creating a new account, we’re asking all Solana validators to keep track of the information it stores in memory. To make up for this resource consumption, Solana charges us a time-and-space based fee called &lt;a href=&quot;https://docs.solana.com/implemented-proposals/rent&quot;&gt;rent&lt;/a&gt;, and will close our account if we fail to meet the minimum rent requirements. To get around this, nearly everyone opts to pay a one-time fee to mark their account as “rent-exempt”, allowing it to live on in perpetuity.&lt;/p&gt;
&lt;p&gt;If we had looked up our token’s mint before we actually made any instructions, it would have just appeared as a standard, empty account:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e227a39b0f53dd167ce9701333903607/a4f81/bug0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.432432432432435%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVQoz33RWU6EQBAG4LmDQy+19d4wG5iMTyY+ewgv4vENIBMQNflS6ZD+U0X1gYJH71xb6vXCMdAOp+hrdW31PtDbnT4/6P2ViCiGg0LbgAHh1LWpq1Md+ZLBycwKg/BYmRBJg1U4GsNHq0PNvqTGaoWmATPX36FpcBVuwFghX7MVWuEHI7SmCTadJcX+5S45uZL32tv1/Dx0/e009OdhAMfTdEtncNLdrhwDBr/HKUqOnEahFiu0DXsBL0pQMx6NOlr9lyej5uTmn+vlHNtq5/VuPdYOXnzJhvFn+DT05XKi6Cl6cDyaxvk+L19cjpqgwWVshVYTaEbDtNwbY5ITpwjrztObK1xte/Lv2+7M4S/q50rhFOWm5wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Empty BUG account&quot;
        title=&quot;Empty BUG account&quot;
        src=&quot;/static/e227a39b0f53dd167ce9701333903607/fcda8/bug0.png&quot;
        srcset=&quot;/static/e227a39b0f53dd167ce9701333903607/12f09/bug0.png 148w,
/static/e227a39b0f53dd167ce9701333903607/e4a3f/bug0.png 295w,
/static/e227a39b0f53dd167ce9701333903607/fcda8/bug0.png 590w,
/static/e227a39b0f53dd167ce9701333903607/efc66/bug0.png 885w,
/static/e227a39b0f53dd167ce9701333903607/c83ae/bug0.png 1180w,
/static/e227a39b0f53dd167ce9701333903607/a4f81/bug0.png 1508w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Now, after telling the Token Program to create our account and initialize it as a token mint, the network will recognize it as a mint:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a2d3eb72b610b6c9f15056409dcd6718/d777c/bug1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.21621621621621%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVQoz3WSa3LcIAyAc4gYYyQk8TbgXTeT5E96gZ6hJ+nxO15v9uFpZ74fAs2HAOkFvaBjSr6cFk7BBtl2doLD4Gz0UpKUzM7hry/88xt/viFZDO5FwaRgGsBwSi5Hl5MvOcxZcpzYXiGcyG5YBERl9G5t8uukOOX0+VWW6nMavnOD0f9kz17lwUzI09yDEdYEo72iv1FoFBiFZrQAQk+yAj0i1HV1JVPwHMOBWOfUW6xzWXpbz5ez7pW1trC8/fAl2+AphgOx1dRbqHNdz+vnx/go75VP7++pt4scH02OwfVKp8bnxqdGfT7I02ihrWfJCZygd+idDf4G5Ugl7XBJI8KzjEZbGNBotpNYTfC/r37V6qlV6vLmvPTUK3oHTozwvbdbsMdomCj4w29v+DnHXo3QPhiPAQiDkBFCJ5zjUR7RcC3UCtV8pRVZqvRKNXPJ22tzkppsjVvPD5Unixv3q1pwAo5vy9uE3ir/BaQsXO4vEouOAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Tokenized BUG account&quot;
        title=&quot;Tokenized BUG account&quot;
        src=&quot;/static/a2d3eb72b610b6c9f15056409dcd6718/fcda8/bug1.png&quot;
        srcset=&quot;/static/a2d3eb72b610b6c9f15056409dcd6718/12f09/bug1.png 148w,
/static/a2d3eb72b610b6c9f15056409dcd6718/e4a3f/bug1.png 295w,
/static/a2d3eb72b610b6c9f15056409dcd6718/fcda8/bug1.png 590w,
/static/a2d3eb72b610b6c9f15056409dcd6718/efc66/bug1.png 885w,
/static/a2d3eb72b610b6c9f15056409dcd6718/c83ae/bug1.png 1180w,
/static/a2d3eb72b610b6c9f15056409dcd6718/d777c/bug1.png 1555w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A few things to note:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Right away, you should notice that this mint is for an “Unknown Token”. This is expected and we will correct this later on in the tutorial&lt;/li&gt;
&lt;li&gt;Our mint already comes with &lt;code class=&quot;language-text&quot;&gt;Mint Authority&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Freeze Authority&lt;/code&gt; fields. By default, our “Friel” account is the Mint Authority for this token because it paid for the mint’s creation. If you recall back to our last command, we added an &lt;code class=&quot;language-text&quot;&gt;--enable-freeze&lt;/code&gt; flag which also gave our “Friel” account the authority to freeze tokens. If we had not added that special flag, our mint would not have a Freeze Authority and we would not be able to add one in the future. More on that later.&lt;/li&gt;
&lt;li&gt;The token currently has no supply. Remember, the mint account just holds the metadata that describes our token, it does not hold the tokens themselves. We haven’t actually minted any units yet that we can send around. Let’s change that.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Minting our Token&lt;/h3&gt;
&lt;p&gt;It’s time to make ourselves billionaires. Copy the mint address you just created, open up your terminal, and run the following command:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token mint &amp;lt;PASTE-YOUR-MINT-ADDRESS-HERE&amp;gt; 1000000000&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;You should be met with the following:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;Minting 1000000000 tokens
  Token: &amp;lt;YOUR-MINT-ADDRESS&amp;gt;
  Recipient: &amp;lt;SOME-NEW-ADDRESS&amp;gt;
Account could not be parsed as token account: pubkey=&amp;lt;SOME-NEW-ADDRESS&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;What’s that, an error? Yes. Sorry to lead us astray (I won’t do it again) but I can’t pass up a good teaching moment.&lt;/p&gt;
&lt;p&gt;We just tried to mint ourselves a bunch of tokens, but the recipient appeared to be some new address we hadn’t seen before (not “Friel”). Furthermore, the transaction failed because the Token Program told us that it could not parse this new address as a token account. What’s going on here?&lt;/p&gt;
&lt;p&gt;On Solana, our token balances are each stored in their own unique accounts. These accounts are called &lt;a href=&quot;https://spl.solana.com/associated-token-account&quot;&gt;Associated Token Accounts&lt;/a&gt;, and their addresses are derived from the addresses of their owner and the mint itself. In my case, I derived &lt;code class=&quot;language-text&quot;&gt;Et3bNDxe2wP1yE5ao6mMvUByQUHg8nZTndpJNvfKLdCb&lt;/code&gt; from my main “Friel” account. The issue is that when we asked the Token Program to mint us some tokens, it derived this new address but did not recognize it as an Associated Token Account for our newly created mint. Instead, it just appeared as a standard empty account. Let’s go ahead and fix this with:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token create-account &amp;lt;PASTE-YOUR-MINT-ADDRESS-HERE&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Here’s a quick visualization of what just happened:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9ff134d16c0ee4da0488947891a4356d/0faf1/friel-create-ata.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 98.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAE/ElEQVQ4y5WUe1CUZRTGn90vMcvblGVNF9MprSxvKKl5ydRQ4NtvIbUcm4TxCpolQgrsfVcUgdRFURPYOyzsLiIsieAUiiKiEsvsKuwu4KKTqYBcNkAg3+bbGmeaKaaemXfOvH+8v/PMec85wP/QhUPLkbp1FhI3zECDmua6tDzKpaUpe2Ywx6ml4dTQgMjS5TsJua0Q53shyHvIEVm6ITR3IqmMIPEMQZTy2hPgvk0zIQ2fjgYNjSY9D24dD/bMYN/dB4zV3EZU2s9ILScQmjpYoC+uV5xFdIYL0ZluKA7rIVk/DT+mLAXpi4Vmz3xuvTok0K3jfe7S0mvrMoLfuqmmUa+mOfh0x1EQQrC/lGBXRv3TsaqmcTGqxlHlhGCb8irW7dbgxTF+mBcwE5VpK1CStARTXhvFvZXNOG9l84knh09cWjrmjpGPlhw+BUlBL1dyqgcC08NIWWH/Q7n19w5Z0UCPON+ryu8lvmSsPl48H3W52zhV6SEjKg8vfd6eRdsr0oLJ1eMhxKXlRbcY+XDrGAoC4z1KkPsAQlP78Xj9HbJH5xmM098mwrx2Bwv7cNln2LbpCy6Gx2D5RFDNBl7lbSP/kSeb6Xdqed2Neqb/piokslHPoFHPcCHKa6Mk+V6ILd0H47QesjP9et+3KhcRWzpqHNfLn1m4aPGEOXNmT53yznsTVEfkLzh1YW5HFk0cKh65oaKl1Uc/GVv7fdDoupNBsJ0MAuTWQUpmHYSkoEe59wdCFMWPexLP+GJtQhC4iz5aNmbuBwHj3546fawset2zTQa+u8nAkGYD/3GzgeloMfJ7GzT0Vk8OA082w8WaOBMVFJmOzamXU6LSaoj0lJeITO1EbOmqHvyrfq++8hICZr2Pzc8BTk3IikYdHWHPom/VZTxxGt2gZVCv4VHYmlKNcHEptiRXjYtVe0KlltbIBGPr2oS89jdlWVVYuOsCJ0KYzeFHxHNs6tWoO7kSxLaRrVdDs4EhTXqG1KvpmGYDgyYDQyFCeg6rvzEiXH4esRkNWKgkmHTA58xPnbzdjzWZVNQJWlyFYwfleGDmcc99t3KYUxO80p29OsJtWLXBkRE4uVGzAi4tzcGW1Cv4UnoW25XXODuzWiihxUudsLr83p38xlPxmbWjj5++MSVe1zyG/fGvlJexMSbZ10r1xnCQDQDZAdhyomC37OKwU/NEFRUVsNlskBT0ceWnvRCau76WFfZ3K6yDXlnRQJ8435upvE6Q1UQ4RzJzQVYB1WX6UdWl2pFphCDvHgE7z38D1tbWQpBzlxIY77N9qYrTtZA4XcsAG4V5bbWFdgJl0V0O67Czs5N9M+LixYsj2Lfs+UexjS4ytUNk7kzfrXaTnek1fbFZTiLL76gxH9s9ctoM/9f9/WdPXrBgwcsul2tkQUEBNSRQUfyYUhQTSE/3npAXDRBZ4aMeuXWQKKwD11hnS3gRw/wD5vmFhYVRbW1tHLvdjiGBh87XUGmXKpFS4lAeKHGTOP2vRGRqI5JTv1XobH/O9sTxwxEaGorW1lY4HI6hgfvP3EBKWTUU+VfG7S2+z4jM3eslBb1rBKaOSdJidiM5MTtgLgIDA+HxeHwJ/hXG6uBPNTh6qRzJ1ks4UPoLhOZuSAsfQWTxYl8Zwd4SgsjDV//7mlcUOZFYbIPMUgd54T1KaO6ixJZuSpDXzpFbByEr7B8S+AdhrccPFxqtrwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Create Associated Token Account&quot;
        title=&quot;Create Associated Token Account&quot;
        src=&quot;/static/9ff134d16c0ee4da0488947891a4356d/fcda8/friel-create-ata.png&quot;
        srcset=&quot;/static/9ff134d16c0ee4da0488947891a4356d/12f09/friel-create-ata.png 148w,
/static/9ff134d16c0ee4da0488947891a4356d/e4a3f/friel-create-ata.png 295w,
/static/9ff134d16c0ee4da0488947891a4356d/fcda8/friel-create-ata.png 590w,
/static/9ff134d16c0ee4da0488947891a4356d/efc66/friel-create-ata.png 885w,
/static/9ff134d16c0ee4da0488947891a4356d/c83ae/friel-create-ata.png 1180w,
/static/9ff134d16c0ee4da0488947891a4356d/0faf1/friel-create-ata.png 1956w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If we take a look at this &lt;a href=&quot;https://explorer.solana.com/tx/D93obissbSVsZpgpRBNrD8HWNBbpyd7yJAAoHce4AZrqw2nrLP43eVBo7eg7CwotpTBxyp6ExXxHjHLqgsMMrfb&quot;&gt;latest transaction&lt;/a&gt;, we’ll see that we are once again paying a relatively large sum to make this new account rent-exempt. In my case, I paid 0.00204428 SOL or ~$0.44 cents. Looking at this newly created account on a block explorer confirms that it is indeed registered as a “Token Account”:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4ce60accde3e540f4117cbdad19ea225/d777c/friel-bug-account0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.21621621621621%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQoz22SfW6DMAzFe4gWSOLY+XISCBSx/bddYGfYSXb8iUJRgUo/WcqTnmI/+wLOgCXNLg09sZ+fG96Ctzo4k9ikaKyFny/4+4XvCVCDt5dKiUqJGqSN7BK7FF1in6ONQZBewScaFEAlm8U1m2+yURZDTldRL+rCTTZnrk/nal5+dokxOEn6zNaCNIjeVUrufm60un9+cOnQOwr+QOr7Mo5lHIdp6j+mGvZmgeDbDM5i8GfcUMxYzH2uVNqduVKi0aob72ko2lnt3QGKjGmFcqxBHWcWpGutGg2VFAd2gYn6tgvsMXPsu9C14IxAONA8qySN3h7TrpRwbeKulQY3toSVpUUBawyHN6uiHLHL2CXMcYFKopKxZUqMmSkytQw57Fa1sDb5stXHkdpXZbm2N22/uSdRz5z0zfwPyyZatRtViR0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;New Token Account&quot;
        title=&quot;New Token Account&quot;
        src=&quot;/static/4ce60accde3e540f4117cbdad19ea225/fcda8/friel-bug-account0.png&quot;
        srcset=&quot;/static/4ce60accde3e540f4117cbdad19ea225/12f09/friel-bug-account0.png 148w,
/static/4ce60accde3e540f4117cbdad19ea225/e4a3f/friel-bug-account0.png 295w,
/static/4ce60accde3e540f4117cbdad19ea225/fcda8/friel-bug-account0.png 590w,
/static/4ce60accde3e540f4117cbdad19ea225/efc66/friel-bug-account0.png 885w,
/static/4ce60accde3e540f4117cbdad19ea225/c83ae/friel-bug-account0.png 1180w,
/static/4ce60accde3e540f4117cbdad19ea225/d777c/friel-bug-account0.png 1555w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;With our token account now properly configured, let’s try minting ourselves some tokens again:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token mint &amp;lt;PASTE-YOUR-MINT-ADDRESS-HERE&amp;gt; 1000000000&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;This time, we should see our transaction go through. If we pull up our “Friel” account in a block explorer and navigate the “Tokens” tab, we’ll also confirm that we now own one billion tokens. We’re rich!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ab60263bdb5a7a99dc003dac47d3f0e5/5ba90/friel2bugs.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 74.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhklEQVQoz3WTDW7kIAyF5xCbBDA2PwYHkkyybaVqD7Bn6BV6lz31islMVptOpU8gBM82z3BBjo3M8+sLl9HGcLBvUeJQS5hKYMaP3/bPJ/76ic5h4ssAZgc5BMlxFC4SRwmSjXd3HN2JAYQHC7vk0oPujFJkUx01WYVw0IM+Y3Rv1LG87NNgTRwFvBssKLQ7mu4ohJZtB6G3/4s7o6Zt5VqI2aX0gHfyPNVtresybass8zlzB7pcr2mqu0MnfPNiDJJlmadt+yI2an17fXl/b6dzOvOI4oqk6zxYcxanWnxuDkPw32G59e+cuYFgPCmHnVHfoocfenhStsxTXRfjHy31ZzQhpegldY9u/RNTZsqsPZngGg5vUW4joQ3eS74FxSeZ/ZhdHSEHK2yFITho92+jceQyl+tCKWIMT8RcJOS0P0ZtwRBC9Ma3NwzBa0TH0aVIHM9l96BtilaSm7IrYouQpLqtPFWqI1XBkrFkOyYrqT+1qgetHTZXDoccYWq/Sn9x7ij7L4doatsf2tXDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Friel minted bugs&quot;
        title=&quot;Friel minted bugs&quot;
        src=&quot;/static/ab60263bdb5a7a99dc003dac47d3f0e5/fcda8/friel2bugs.png&quot;
        srcset=&quot;/static/ab60263bdb5a7a99dc003dac47d3f0e5/12f09/friel2bugs.png 148w,
/static/ab60263bdb5a7a99dc003dac47d3f0e5/e4a3f/friel2bugs.png 295w,
/static/ab60263bdb5a7a99dc003dac47d3f0e5/fcda8/friel2bugs.png 590w,
/static/ab60263bdb5a7a99dc003dac47d3f0e5/efc66/friel2bugs.png 885w,
/static/ab60263bdb5a7a99dc003dac47d3f0e5/c83ae/friel2bugs.png 1180w,
/static/ab60263bdb5a7a99dc003dac47d3f0e5/5ba90/friel2bugs.png 1604w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Naming and Logos&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: This section only applies to tokens on mainnet. The steps outlined here are subject to change and do not cover other registries such as the one maintained by &lt;a href=&quot;https://docs.bonfida.org/collection/v/help/tokens#token-name-registry&quot;&gt;Bonfida&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So far, we’ve been working with our new token mint “BUG”, but Solana keeps referring to it as some “Unknown Token”. Let’s go ahead and change that. At the time of this writing, the official registry of all SPL Tokens lives on &lt;a href=&quot;https://github.com/solana-labs/token-list&quot;&gt;this GitHub repository&lt;/a&gt; hosted by the Solana Labs team. To get our token recognized, we have to make a pull request in a very specific manner.&lt;/p&gt;
&lt;p&gt;First, head on over to the previously mentioned &lt;a href=&quot;https://github.com/solana-labs/token-list&quot;&gt;GitHub repo&lt;/a&gt; and click the “Fork” button in the top right corner. This will create a forked version that lives on your GitHub account (If you don’t already have a GitHub account, please create one now). We’ll be using this forked GitHub repo going forward.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7eeb078d598d9cc06d89f2d181950240/7db30/fork.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.675675675675674%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4ElEQVQY0yWOy3bCMAwFs26bGL9kybYsOyYJgdCy6P9/WwucM9u5c4fz9cH9RrKZIA6lrffSr3U56nKE3C3KExIXa8g9pBnSjGle2iLL92CAoewgN+DVk0yGJkvKRmXp5OIbZejj0/tYIVZHEpEvuYLDQTtyEDE1G9iReJK3oH1SlpA78Rlrh5/mqChDyj7XJw2jDsPXCUaDbXu09SjzXvoey9kAa58tcKobt0vb7+X3xn0j7iE1zLOycdQwjDpMBtt6xzxrnwxwbhfkDq+TEJtB8SgUu5PD1cdoaHxl/8t//vEfOJT9cfkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Fork the repo&quot;
        title=&quot;Fork the repo&quot;
        src=&quot;/static/7eeb078d598d9cc06d89f2d181950240/fcda8/fork.png&quot;
        srcset=&quot;/static/7eeb078d598d9cc06d89f2d181950240/12f09/fork.png 148w,
/static/7eeb078d598d9cc06d89f2d181950240/e4a3f/fork.png 295w,
/static/7eeb078d598d9cc06d89f2d181950240/fcda8/fork.png 590w,
/static/7eeb078d598d9cc06d89f2d181950240/efc66/fork.png 885w,
/static/7eeb078d598d9cc06d89f2d181950240/c83ae/fork.png 1180w,
/static/7eeb078d598d9cc06d89f2d181950240/7db30/fork.png 1494w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Once forked, head back to your personal GitHub page and locate the newly forked repo. This is where we’ll be making our additions. If you’re not familiar with &lt;a href=&quot;https://git-scm.com/&quot;&gt;Git&lt;/a&gt;, the easiest way to add your token is to open the forked repo with GitHub Desktop like so:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bf12f708906e9302888982a62f0b2338/25c1c/open-with-github-desktop.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmElEQVQoz12S2W7bMBBF9RrHskVx3zeR2mk5MZCk/Ys+9f+/pLCU9qHABTHEzMG9GLJa7p/9vHHlpI0t1YAoqkK/vMfhFvoyrI80bWm6UxWJDP+pQtyp9CaHD9a9YeEuLbtAjpiBVEOqEbfPk5kr5M/Wrivkza6qpVqGBZqF+NJSs/dEDegFshrQc0Mu7bM4mAOrAX1t6KmhVYu4NQFAypTD3LZE4d2NSH+YU+kRM0Q4xAziFgt3bgiDREFcPZM0BBBl03JMACyJcA2Wpws6XdHrFdeAvtSQ6+jSrMOY0/T4dSu/79WRrcEyDsV2s89LGEroS+yP6ypsJjKkcdNhECYxFZkKuYtjjt8wZMamVble2sx090/cJCI80932+Dndv7r53aTF5tX4ickDvmIs/HT/8nlhKgKi2n3PWDgiPZGeST+kqfTLNq63YY1plr4n0v+NjUTMRZjuWO+5IUQ488zZMZuzCT/mUqZtHm9bHiehifCI228YYClsli5jbmtAa0AhM5jb43khM/24lbF02gvh6P5DEHd/ANCyQrwimwwmAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Open with GitHub Desktop&quot;
        title=&quot;Open with GitHub Desktop&quot;
        src=&quot;/static/bf12f708906e9302888982a62f0b2338/fcda8/open-with-github-desktop.png&quot;
        srcset=&quot;/static/bf12f708906e9302888982a62f0b2338/12f09/open-with-github-desktop.png 148w,
/static/bf12f708906e9302888982a62f0b2338/e4a3f/open-with-github-desktop.png 295w,
/static/bf12f708906e9302888982a62f0b2338/fcda8/open-with-github-desktop.png 590w,
/static/bf12f708906e9302888982a62f0b2338/efc66/open-with-github-desktop.png 885w,
/static/bf12f708906e9302888982a62f0b2338/25c1c/open-with-github-desktop.png 1047w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In GitHub Desktop, choose to “Clone a Repository” and then find your newly forked repo.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b0ad637a38516d746d93d2391f42b765/3d22e/gettokenlist.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 67.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYklEQVQoz1XPSW/TQAAFYP+ApEviZfbxzHg8M17jOInTNKYUEGvhwKWqELTixhkkuFSCa1XEif+LmtIUpE/v9qT3vIlrNKgUWVKyZuiQwhUFWwcULO90FMwZ7Dha0qilYFbvfPbGJIoojwiJCAkxDhC6TR/CWwHaQjxRyjrI2BhEbufCQ5zbrMyK2uWVLZq269uuT7MmcROdNYmtlalu0tZc2cSVyhQyzQJI7PDc8zEJiQ5I4mPFXVsuju20F67N63nVrtJiKkxpiqktZ5groa0yGWLSh8gOL7x93e0dXw77rzv9Nzk5UnZCVBUnhouEiySWWijNRVLULWZi5Id+hIS2gDI7uPCiWLGyp9kKuw49/95/ulp8vNx7+Wt8cj0++Tl+db1xtf/m97g6CUN/FOL58pCrxAzOvYhgITWLJROS1Y/s4tjMH7DpCz59dq95Gs9fw2QSADgK0XLVc6Xt4IMXYEy4ZjJl0iqTqzRTOtfG/c+mLsdxEgA8CmG3KbvBew/HcV61TKZCW+Ea6RqVTbeSvE3ymcymKp8jYe7Ka6HTbPjOCzHGTALCI8x0VlftSmcTnU3SvNGuFqYUOk9d5aoZ4iqAeD8Aq/6hKat8cOYFCPuA+ICMAVamqKZdXs+zelZMFlk9U6bgaZU2fdk9Rnw7e61dXg1PPUA517lIi1jnMi1FWkrzl63ndTNji7foxQ/05AuMbQDQfggP1keurJvhqRcRhrmm0lCZYp4gru4xsbnDIyoAjUNEAkR8gF1Z41gsdk+9AJIA0NvlIaD/Cm6SRRvgBgeQAxiHEYMoPtg9+wM1EX+IzFfbcwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Get Token List&quot;
        title=&quot;Get Token List&quot;
        src=&quot;/static/b0ad637a38516d746d93d2391f42b765/fcda8/gettokenlist.png&quot;
        srcset=&quot;/static/b0ad637a38516d746d93d2391f42b765/12f09/gettokenlist.png 148w,
/static/b0ad637a38516d746d93d2391f42b765/e4a3f/gettokenlist.png 295w,
/static/b0ad637a38516d746d93d2391f42b765/fcda8/gettokenlist.png 590w,
/static/b0ad637a38516d746d93d2391f42b765/efc66/gettokenlist.png 885w,
/static/b0ad637a38516d746d93d2391f42b765/c83ae/gettokenlist.png 1180w,
/static/b0ad637a38516d746d93d2391f42b765/3d22e/gettokenlist.png 2010w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;There are two places where we must add information about our token:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;In the &lt;code class=&quot;language-text&quot;&gt;assets/mainnet&lt;/code&gt; directory, create a new folder named after your token mint address. In my case, this would be &lt;code class=&quot;language-text&quot;&gt;assets/mainnet/BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&lt;/code&gt;. Once created, place your logo within this newly created folder and name it &lt;code class=&quot;language-text&quot;&gt;logo.png&lt;/code&gt; (SVG format is also ok). Solana will crop your logo to a square, so make sure you design it appropriately.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Locate &lt;code class=&quot;language-text&quot;&gt;src/tokens/solana.tokenlist.json&lt;/code&gt; and open this file with a simple text editor. In this file, locate the &lt;code class=&quot;language-text&quot;&gt;tokens&lt;/code&gt; array and add an object that describes your token like so:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code language=&quot;json&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;    {
      &amp;quot;chainId&amp;quot;: 101,
      &amp;quot;address&amp;quot;: &amp;quot;YOUR-MINT-ADDRESS&amp;quot;,
      &amp;quot;symbol&amp;quot;: &amp;quot;BUG&amp;quot;,
      &amp;quot;name&amp;quot;: &amp;quot;Bug&amp;quot;,
      &amp;quot;decimals&amp;quot;: 9,
      &amp;quot;logoURI&amp;quot;: &amp;quot;https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/YOUR-MINT-ADDRESS/logo.png&amp;quot;
    }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;blockquote&gt;
&lt;p&gt;🚨 WARNING: Do not delete or modify any existing info in this file. Only commit additions. If you commit any deletions, your merge request will fail.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is the part which will cause the majority of issues. Solana Labs uses a bot to automatically test and merge updates to the Token List without requiring human review. To avoid any issues, it’s important to take time to ensure that you are not committing any deletions or potential syntax errors. The two mistakes that trip people up the most are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Leaving a trailing comma after the last field in their JSON object (i.e. ”,” after the string in “logoURI” above).&lt;/li&gt;
&lt;li&gt;Letting their formatter delete the last line at the bottom of the JSON file. &lt;strong&gt;DO NOT DELETE THIS LINE.&lt;/strong&gt; If your IDE is giving you a hard time you can always use Mac’s built-in TextEdit app.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Make sure you update the JSON fields with your relevant information. Namely, replace &lt;code class=&quot;language-text&quot;&gt;YOUR-MINT-ADDRESS&lt;/code&gt; with your actual mint address in the &lt;code class=&quot;language-text&quot;&gt;address&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;logoURI&lt;/code&gt; fields. Be sure to also update &lt;code class=&quot;language-text&quot;&gt;symbol&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt; with values that you want. &lt;code class=&quot;language-text&quot;&gt;decimals&lt;/code&gt; is by default 9, and &lt;code class=&quot;language-text&quot;&gt;chainId&lt;/code&gt; should remain the same. If you are worried about adding more fields like &lt;code class=&quot;language-text&quot;&gt;twitter&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;website&lt;/code&gt;, you can always come back and make more additions later on.&lt;/p&gt;
&lt;p&gt;In GitHub Desktop, double check that you are only making additions (only green, no red!). If everything looks good, write a simple commit summary and commit your work in the bottom left corner. Then click “Push Origin”.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 494px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6d0585642ffa71bea5f665ec8822d0d5/d72d4/commit.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxElEQVQ4y53STW/TMBgHcH+NEWd5sRM7sZPYCXX6Sle6MbXSaNnSlBsDCaYKuHAFiQttJK5w4LJKowOJz8EXQ33RtIEapkk/Wc/h/5ctPQY0iE1MMQ1oEF8h1+ZtCJcgaewf5S/q+0PChMsE4dJlwuWSlHKZ8IUCh/nLr79+n374RlnYf3y81z3sHQ3b3UeaYd/btbbZgYbl+KDW6b39+OXg6RvKRZhUuVDLUyrHi0pgGnrhfRAktV0LWZg4foRosIa90PVFCceLfFEBXKaVejttdpK0WWs9TJsdyqVmIGgiaGyl6Zbt+oAJZWKKKLddhgizXd/EVLecctBAiHDApNIMG5r4uluXhYIm+m+6pIx1y71TWaodaGoGukvZiypBrCiX0HRW998KNPDm2bJSDWRF063NJswt/loVYUCo5vLT+IIGyRrhsXsTZrHD4qvAEo+ZVCBsZ2hY4MEMDaZoMLUHU+94xrKCr7CTwj+ZibwIR8U6sPLJfvKZHkwA7z6D+YU+OtdHc30017J59PyiMblsTBbq1ffq2SI9W/Te/dx7fWmO5zBbZvTsHI5/oP57EKYd/0H+L9rKvRXa2sw3A+Og3v8DrV+9KKKF1HgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Commit&quot;
        title=&quot;Commit&quot;
        src=&quot;/static/6d0585642ffa71bea5f665ec8822d0d5/d72d4/commit.png&quot;
        srcset=&quot;/static/6d0585642ffa71bea5f665ec8822d0d5/12f09/commit.png 148w,
/static/6d0585642ffa71bea5f665ec8822d0d5/e4a3f/commit.png 295w,
/static/6d0585642ffa71bea5f665ec8822d0d5/d72d4/commit.png 494w&quot;
        sizes=&quot;(max-width: 494px) 100vw, 494px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d91a7d9ecdb047e0bfb2c37624642b19/f1901/pushorigin.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz32SbWsTQRSFCyLih9bY1EDUNN23eX/bmdnJ7CabbJqGpk01LbQixgj+Dv+Bv1q2C20XgnA+XObehzkczkGMRYxFQiSRlsiMSEuVo8rFWIaIR48KEQ9hPQSANfeNDmIsIsQhS5dXXy7Xm8Xlerm6Wa03aZZTaZiyLM2EdkI7Ik05X2KhI8Sf4VpEUjOh2RRIHxAbUgvECAgPpYcqx2kBVQ6Yma++QmFbcIJFgOSJuh0U28/5j7Nyd1psj/jtIdu8RTevk+tXydUhuB7abZ/fnyKX4DZ8BmXPfhtOfw+KX/189zHf9Ubbvv95rL8fyYc35O4E3w3Xf4OLPwHKYty2HWHZI9UHPO+i2buk7IBpB8zeg9kxrLpo3gGzLigHof0U+yG2SRuWIWTa5ZPqYlIt7GSRFVXmx5CIBFOAudROWq/cmKgsQqyVdhM4S0fGl/WFHsesTiWqHdVblo4e5ZAwT2k9wyFk3Hg3rowvs7zUrhDGP90FgAKqhM2xtHvgCHHENVUZVXVPENeQpQmRL7fC+P1wCJm0uS/PR+V587/KCuNLxHVTMiys8VOauj1w01DAUkAVILKuJGQhbJWxMbIfrl8bvQD+r38tGosK00abuwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Push Origin&quot;
        title=&quot;Push Origin&quot;
        src=&quot;/static/d91a7d9ecdb047e0bfb2c37624642b19/fcda8/pushorigin.png&quot;
        srcset=&quot;/static/d91a7d9ecdb047e0bfb2c37624642b19/12f09/pushorigin.png 148w,
/static/d91a7d9ecdb047e0bfb2c37624642b19/e4a3f/pushorigin.png 295w,
/static/d91a7d9ecdb047e0bfb2c37624642b19/fcda8/pushorigin.png 590w,
/static/d91a7d9ecdb047e0bfb2c37624642b19/efc66/pushorigin.png 885w,
/static/d91a7d9ecdb047e0bfb2c37624642b19/f1901/pushorigin.png 942w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Your changes should now be visible on the forked token list your GitHub account is hosting. To get these changes merged into the official Solana Labs version, head over to the “Pull Request” tab of their repository &lt;a href=&quot;https://github.com/solana-labs/token-list/pulls&quot;&gt;here&lt;/a&gt;. Then, click on the big green “New pull request” button. On the following screen, click “compare across forks” and then change the “head repository” dropdown option to the &lt;code class=&quot;language-text&quot;&gt;token-list&lt;/code&gt; repository at your personal GitHub. These steps are outlined below:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/29b3f01b79fc9d28f8f9958bdb80ec58/a3a5c/mergeconfirmgreen.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACwElEQVQ4y5WSyZLkNBRFva3OwelJsmxL8jyUM2vK6qyoIuiJDQEL2PSC4G/5C3Z8AL/QeQjbVU00BBAsTtz7NDw96ckRuqIcrin6K7JqYBsmn9lEKV6oZvwwIZX6Uyo1yhe/rtzol4ud4NVOfHq16IzjS42pBop2T91fU7QHdDmQlQN93nDV7RmHa47NwHU9nNtqQMf691Ca33yh8YU+e1LjSzMX4ewijSo6kqZHVyOm2qPLEV3taYqe2jRUtqWxLa2pibL2HCYVUVIhkuosVUUsC5Qs8SON4+sRvf9AOrwhu3w7qx7fzRp274i694jma1xzj5efzl7+Gj8/nf3idHbNCXs4nh9/esPDzx8wfYuzCTVbUbAROZHu8JOGrSxwZbloXBGZgUj3czyt24p81p2qiW2HyHIqbQlEirP2JFGaEyqLGyasdtHfWHtiZrUTX855gk0Qs/IUU56VJ3Gmzpj2CmVbXJGxCRIu3D+7NnHx4p83vTDFYZIT24Eoq+aCnLUfo2xDOA3me2w9YuoR24zz4p3I5g7uomz5TsGXbAJFmvdkRc/ai3Gmk+KsILYlsalQuiaxDcrUM4lplljXBNLgRRm+yPBeiDKiZHmy+cqrqcLymmx/S1pekuQDyg5I3RGoEj9+RpUEqvoXSqbbOmtfIdq3hPUTwh6o9k+U4xO2f8D0D8jiBld1C/E/oPpZp+KclS+Jbyv0sce1KV6p2RUZfmVmtjZhY9R/oxVTLmcVSoofbzh8/Ap5WzO8P2EfD8i7GnnXoI4t6ese/yrHHTW7Z/7q3UvNKpgSBpL8uz3jDw+Iq5LDN4+Y04i6bUiPHcldOzPF8U0968TL2Gd/07AO4qUpQd7h2xYvLfDTklWUshF6Zj39zWc/Ixe20ixeLN6N7fKG6yChvP+e8u5b8uEBO5zQ3f3/ImuPRGacu/wH/nSqif+eccoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Confirm all is green&quot;
        title=&quot;Confirm all is green&quot;
        src=&quot;/static/29b3f01b79fc9d28f8f9958bdb80ec58/fcda8/mergeconfirmgreen.png&quot;
        srcset=&quot;/static/29b3f01b79fc9d28f8f9958bdb80ec58/12f09/mergeconfirmgreen.png 148w,
/static/29b3f01b79fc9d28f8f9958bdb80ec58/e4a3f/mergeconfirmgreen.png 295w,
/static/29b3f01b79fc9d28f8f9958bdb80ec58/fcda8/mergeconfirmgreen.png 590w,
/static/29b3f01b79fc9d28f8f9958bdb80ec58/efc66/mergeconfirmgreen.png 885w,
/static/29b3f01b79fc9d28f8f9958bdb80ec58/c83ae/mergeconfirmgreen.png 1180w,
/static/29b3f01b79fc9d28f8f9958bdb80ec58/a3a5c/mergeconfirmgreen.png 1277w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If all the changes are green, go ahead and click “Create pull request” and then submit it with a title of your choosing. Once submitted, you’ll see the bot run its tests. This process will take a few minutes. If you accidentally made any errors, the bot will provide you with feedback. Otherwise, you should see your tests pass.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6de4a5834589780796772387e8c09acc/42de8/testscomplete.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVQoz3XSyW7bMBAGYKWwEluUKJLDfae1eUuc9FYgff/XaqUUgS8FPsyJwAz/mQr1EhMjdGY6gEmgo/JH5Y86Dmm66jB0TGMw3zqmvrRUVTAn87nAmMN03lxkKFiYXjqwkSjXgnrU20L82HHbElmR4OGS4JzjeM3TLZQFdMRge+56sC1dO3RUf8PcYxE6btbOBwTPTS/uxzRfy/walo9yep+u78P5Pt9+mjhhMIhIRDdEIiIQEesUVFW2nKf7r15ZsIm7zExmOjITmQ5MB+EKd3nNwqT1gc3cZW5TL2xLVOWG2/Lxm3InTFZuIMxR7gg4slVQkcnAVQIZuUpcJaEzV4kIh6isGgx7RHY1evqxr57qqtr9R/1g12Boma7WPJhusWhaQB3fwIY3Lewbum/oy4HUe1y/4LXW+OWZdFSvf97y1MIW6Y4qDHJbsvSD8oOwmQhHhOM6lfF6PL3l8WZfT/nzDiGiXv7rDDoxFZiKTEUi/Ep6rEpv506mjgjjsi+LS7OYiroPWG+BfW3y8YZ8WcJw1mFQYdJxVmEENxN/aag+YEBYNq1oifw79h8y1zhdhKNxBAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Show tests complete&quot;
        title=&quot;Show tests complete&quot;
        src=&quot;/static/6de4a5834589780796772387e8c09acc/fcda8/testscomplete.png&quot;
        srcset=&quot;/static/6de4a5834589780796772387e8c09acc/12f09/testscomplete.png 148w,
/static/6de4a5834589780796772387e8c09acc/e4a3f/testscomplete.png 295w,
/static/6de4a5834589780796772387e8c09acc/fcda8/testscomplete.png 590w,
/static/6de4a5834589780796772387e8c09acc/efc66/testscomplete.png 885w,
/static/6de4a5834589780796772387e8c09acc/42de8/testscomplete.png 1033w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Congrats! You just created a token on Solana. In a few hours, your changes will be merged into the official token registry. These changes won’t be reflected overnight: it may take some services like &lt;a href=&quot;https://phantom.app/&quot;&gt;Phantom&lt;/a&gt; or the block explorer a few days to pick up the new metadata. You’ll know the changes went through when you can view your logo at the &lt;code class=&quot;language-text&quot;&gt;logoUrl&lt;/code&gt; you provided in the JSON object. After a few days, the rest of Solana will pick up on your new branding.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2405d84b1d9be15a5c4360c1f5e700c5/8cdda/bugupdated.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVQoz63TSW6DMBgFYM7QNoEYY2MGDwmGEKBdVeppKvUqXfTKr/rttpGSLIjUxSczyM8PyyTd6QilG3AlkSsJVoogJ0qG57/veFWiNC2kbiBNi7KqwBcP9vkO9vUB/jYjqa1G4wyavUV7obIaTBZ/iwR0f4kxcM6xyVIkolWhDSuLIP9B1zvJkXKGtGDn8RaRIxM5NixDMr7OqK3BQ7rBY7a98rRL75Js8x3+S2z4PKN2Jmx4Uau70Tzbd9AHFxsexgGyrSGaahXjD+jnE2heNw7wpxHDPMH1PjakY+MGH1ZaG0qoHZ2C4zJhfFlCRgj00xhWPQeqG2IAjcoZSO8g+0h4C9lZFLbFlgKp/v7Yr2pFW0OBpXdXpNMxUHf78CfEcyhWKG7ilQyf/A3ZvC9V9MC8JQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Bug updated block explorer&quot;
        title=&quot;Bug updated block explorer&quot;
        src=&quot;/static/2405d84b1d9be15a5c4360c1f5e700c5/fcda8/bugupdated.png&quot;
        srcset=&quot;/static/2405d84b1d9be15a5c4360c1f5e700c5/12f09/bugupdated.png 148w,
/static/2405d84b1d9be15a5c4360c1f5e700c5/e4a3f/bugupdated.png 295w,
/static/2405d84b1d9be15a5c4360c1f5e700c5/fcda8/bugupdated.png 590w,
/static/2405d84b1d9be15a5c4360c1f5e700c5/efc66/bugupdated.png 885w,
/static/2405d84b1d9be15a5c4360c1f5e700c5/8cdda/bugupdated.png 1168w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Transferring, Freezing, and Burning&lt;/h2&gt;
&lt;p&gt;Ok, we just created a stylish new token. Now what?&lt;/p&gt;
&lt;p&gt;If we turn our attention back to the Token Program, we can see there’s a few things we can do right away.&lt;/p&gt;
&lt;h3&gt;Transferring Tokens&lt;/h3&gt;
&lt;p&gt;The first thing we can do is to send some tokens to a friend. If you’ve used a web wallet like Phantom before, you’re probably already familiar with doing this via a UI. But how does this work behind the scenes?&lt;/p&gt;
&lt;p&gt;Once again, we’ll be sending instructions to the Token Program. Specifically, we’ll be using the &lt;a href=&quot;https://spl.solana.com/token#example-transferring-tokens-to-another-user&quot;&gt;transfer&lt;/a&gt; command. But there’s a catch! Remember back to when we first minted ourselves one billion units: we ran into an issue because we did not already have an associated token account to store our token balances. If we try to just transfer a new token to our friend’s address, we’ll run into the same problem. The issue is that our friend has not already set up an associated token account for our mint.&lt;/p&gt;
&lt;p&gt;There are two ways to get around this. The first way is to ask our friend to create and fund their own account just like we did. They could do this by running &lt;code class=&quot;language-text&quot;&gt;spl-token create-account &amp;lt;OUR-MINT-ADDRESS&gt;&lt;/code&gt;. This method, however, is impractical. Our friend may be offline, or we may want to send them some tokens as a surprise gift. To do this, we can choose to create and fund their associated token account for them by adding a &lt;code class=&quot;language-text&quot;&gt;--fund-recipient&lt;/code&gt; flag:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token transfer &amp;lt;YOUR-MINT-ADDRESS&amp;gt; 1 &amp;lt;YOUR-FRIENDS-ADDRESS&amp;gt; --fund-recipient&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;This is what happens every time you receive an unexpected airdrop. If you receive a new token without making a transaction, it means the sender is paying the account rent on your behalf! We can visualize this transaction like so:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2e1f06d90599c32fb8bb272c87d7307c/6660b/transfer.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 95.94594594594595%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAFVUlEQVQ4y1VUa0yTZxg9/QqIiGMy4w/3Y8pcMmd0BDRkWzaVGY0IBcUpaDbnNDg3vGQZA0XGrQpSZMUiYIHaq/WC3OuggDJAFLkUxGIvtIrljjIVK0LFZ/lwM9mbnD9P8p6c57zvOYhIb8QPqdeQqiXG2f0d+G7ci5M1xLCziFM3cCD7Dv47NzNG0CgYQIOgH4MqYtL3KkFEMOYRQ5UEukbAnpRq7ErSQHCd2Dscz/c8GEEd4ZDkITZsO4ClHy6Ej4/PDG4Lx1Av6EN9mg1PLhF+DIrmsoSWgjdkdIOACSJMEiGhZILP17xu42uoNaFkQlg6SJgDYPEC5xkVvr6+aDo1DC3fxMLjbs6UwiimFoP4dVtHlj3SKiFYJcQg+TqBX0/cWPWQPlpmpWiphY5dfNS//ts4108WeTqt/NzfmZU+dDmE6RJnOrVnEjqyXng1Zgw4rqVZqU7wgJqFo5qu3Al05U5wsTO1CVuOabhJpS8bjyr76Ii8lxJLXnR99uXXXt6frvjIz89viUha7tZVEIjhKz7ozJWjNfPxIl3Ws8G/0nun6tNtpMsaV92XEnokxEWejiDrJu6v0l59QvEL4le8oqSyyX6/tbw5X6xaNnu1/3rntvJTC61K3nKb+htvvWyWZ4+YPmg5/cRxS/iYjHlE3bmOikcXCaMXiAswTjMv+B1fezBa/rAq7uKoNlY9EhMpqAHRMPSSTdBfjFhrVvDIJA8mszzgdGwCUHnCkFGWrNfqsp5V6kTjYaZ8gkE8zcwYzmLDbj78IiuxLGYM8WobmqskqErf6GySBS62XNoVpcsLotazgWSU8aQWeQRSDz2CBzbjTjyhK9+OkVICq3KGbIgI+Ggfp6Cw3qWwssU1QVTM3BT4ojFznXuPgmfqUQaTRRk8YlXylCZ5UJhNvRrqw1FOl1UVrs0l91xsvxGHQPj7MgEpVYTQ0C3Yvm0rgoJ4s8PDd7gB8TDk+6Mle727WRFsM7KrKoL7rEpenFkeuKZWGAS4+iEgIGBOeFi4S/iOMGzfvg3tomcAm5T8wgbsVBLnfLXJuaj27qwj5+4x15M+Rm36Olerkpd0XxWsvSflvTbKeGRWhJwjOodNa77yKlJo5hpqh1wavicOCGx6gLAYFeD2C05WPEdoKQHnCALNOIhqYDkfyliUPHQVBPqa3qgkkzwkn7UJwNytZe+79vMId6XjeFA6jTHWw+KnhGI7Ib7IfjC53FHNL5+qjS9+EVNPhParIk5D2iqYZIHzrcqgkAeq4FCTzH9Zaxxxu3Mdqd1iR+3d3EmtTvQ8zCQmmPKIQRKblAbixp4f1LMpiZZa6diF4f7D2a3OwE6oJFkMPd2DiauhGC/1hiFXjLasx0saTvU5qlNNxKbllnCkojPHjs4cOxcHz48iUtbL/b3weWOM7AHFyO9TYvG4XlWknXdH1+IukancVvqseHfTWl9PjUoyr/lxhmuLom9Fm+jJaE2KZbIxo586z9hVNgXBKiUueOGZ2LBFyE2tsutTqohO/EnEr5geWOC9mXs0JQesXcuXL5/BYDJxmkXDaE4b8zLkTzsMildkFBPpcx2aETVhRE1cdPz7sTPr9PyEK7a2I8qB1qOqfiE7M00S4s/WvSVsEPVyWmOnoIub8mgvGFM0XeptaT/9rK3jzPNIcz7BlE8Mfk40YHeUHmpjDzB/mrNf0sEcL3+JfX804yeRDgeyO98WLNuHt088RUvyOPorCe0gLtkJZrYPqwjEdur+xHvYFdUFZXcvg6WTOKC0gF82wewT3n5DeOb/hM0pT3D7+FMMXCWmCW+2M0uIIS2B6gj/AI15Levnart8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Transfer&quot;
        title=&quot;Transfer&quot;
        src=&quot;/static/2e1f06d90599c32fb8bb272c87d7307c/fcda8/transfer.png&quot;
        srcset=&quot;/static/2e1f06d90599c32fb8bb272c87d7307c/12f09/transfer.png 148w,
/static/2e1f06d90599c32fb8bb272c87d7307c/e4a3f/transfer.png 295w,
/static/2e1f06d90599c32fb8bb272c87d7307c/fcda8/transfer.png 590w,
/static/2e1f06d90599c32fb8bb272c87d7307c/efc66/transfer.png 885w,
/static/2e1f06d90599c32fb8bb272c87d7307c/c83ae/transfer.png 1180w,
/static/2e1f06d90599c32fb8bb272c87d7307c/6660b/transfer.png 2278w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;For &lt;a href=&quot;https://explorer.solana.com/tx/4uDR3BQTMaX25FFsam2o8hXpvE8xut2Z8j5fvQQmjTbMpUHK5pxdfF9ikbDHCKNtycp6mCfgsdyLShfkopDxYDbQ&quot;&gt;my transaction&lt;/a&gt;, I chose to transfer one BUG token from my “Friel” wallet to another wallet I created called “Brian”. Here, I replaced &lt;code class=&quot;language-text&quot;&gt;&amp;lt;YOUR-FRIENDS-ADDRESS&gt;&lt;/code&gt; with the address on the “Brian” wallet. Because “Brian” did not already have a token account for “BUG”, I funded the account for him. If “Brian” already had a token account for “BUG”, I could have dropped the &lt;code class=&quot;language-text&quot;&gt;--fund-recipient&lt;/code&gt; flag and either kept the same &lt;code class=&quot;language-text&quot;&gt;&amp;lt;YOUR-FRIENDS-ADDRESS&gt;&lt;/code&gt; or replaced it with his associated token account address. In both cases, Solana would have transferred the tokens to his associated token account.&lt;/p&gt;
&lt;p&gt;By plugging my “Brian” wallet into Phantom, we can see that we are now the proud owner of 1 BUG!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 355px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1c98db5ae2796314d8faaa8e14854629/526ee/phantom.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 152.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEDklEQVRIx41Wy24jRRTtT5jdkBm7q+td/bDdttt2jGU8AU/sxGEiSBZRJi8xQjx2iGEQCLFGSGxZ8S9Z8V0H3epuywmeTBZH9bh1T92ue+61A2MMsiwD5xxRFKFfFJjNZhiPxxiNRvh4MsFwOPRn0jRFkiTQWvux3W77ecgjjJVGKiUCZy26eQ5BhIzhk+kUx6+O8XI+x4vZDEerFQ6WS0/a7XaR5zmSOEan3UZRFCD/54zhlYlRSIWAW4XISAinPULF8ZyHaAqGBg/xLGqiIRiYFmvUPvVcOo2GVWCWCFODO8gMRGb93HYzuF4LJk8hW87vq3aMKNF3fKLUQFTzgJPxHmRqsSOaePvLO/zw81ucXb3G0ckx/vjrT1y8ucFzxUqCLb4BjxXuQyQGO7yJr7//Br/+/hsuv7rBy8MFfnz3E15fXaAhGQQRbPENuFP4HywZNZiTCK1AGEuwtsFOHKHRUohaBlv9HBEaCW4lhFV3wBc5+NkI/LgA/7QDdraL6M0U0XczsFUfQt/1IQ7iCriW4FogUhUoc7R2ElFM2azmLQ1WIUp1eWbDr+QhQiWhrEacJh42djDOwjoLF8dI0gTGGg/SXxzH3mZjC5fEaz9pFIgr4FIgTmIMB0Mv1PPzc1xdXflxOp36PaqIdqfjxd3v93F6eorr62vs7e2h1+v5fesciMsTaqPL0spS9It+6Vj00Wq1/D4ddrFblx+RFIPyIlrTvtKqJBRCIOIRWMQ8wjAswcJqL/I1TqA1jWRvhiEYY2sb9QIuKkJqEM5YWGMgpATtEZRSvvjfB6P1+qys/AIySKXwpPEUQivsjnYxmUx8t6FPoiRQZ9kGso0GQ4xHu+jm3ZJQSoGPnjLkX36LJ80GDvb3cXF56ZNC7Yuir503QXvWWsxXCyw+P8RovAsecQT+MZsC+lkXIeM+qk6n49vUgxHGCZIshd7rQr/I4QYtKCEpQgnnHISK4Eh7rtKatY8Cvb2r5kKKklApDc4EtCofmbJGn/pYUi98Y3xiPGEx7GF5cuC1t1wusVqtvL4eSsgmSIekWU/IGcfhF/v4+99/sDpZYTqZ+oRQu6enuJ+MbajF7QlJa3RLXuTIsvJHiG6jxDwmuk2sP5m0SBnyYjXGC/pDot4Gr0NfMlXZ1HN/gVL+xrWdc+9Qj2Lj/CaC2rh5iIqfPps6DXUXEji9Kc3JRnOykxru+wflDzwD56wa+bou62g21x+Cj9DZLozuwZoWOI/udpDqH8VDJLXdR0hp7/eHmH+2QJa1kSTxuvQocySJuu9t6q5e00jn67X/5Juba9ze3mIwGPhkzOdzHB0drYVNDZfes24S1I1qnRIZFQKtyVZF2Mf+/mJdHRQdHdiMiKJ8X4R0to7wP2bphR0uReM8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Bug updated Phantom&quot;
        title=&quot;Bug updated Phantom&quot;
        src=&quot;/static/1c98db5ae2796314d8faaa8e14854629/526ee/phantom.png&quot;
        srcset=&quot;/static/1c98db5ae2796314d8faaa8e14854629/12f09/phantom.png 148w,
/static/1c98db5ae2796314d8faaa8e14854629/e4a3f/phantom.png 295w,
/static/1c98db5ae2796314d8faaa8e14854629/526ee/phantom.png 355w&quot;
        sizes=&quot;(max-width: 355px) 100vw, 355px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Freezing Tokens&lt;/h3&gt;
&lt;p&gt;You may recall that when we first created our token, we added an &lt;code class=&quot;language-text&quot;&gt;--enable-freeze&lt;/code&gt; flag. By adding that flag, Solana recognized our “Friel” account as the &lt;strong&gt;Freeze Authority&lt;/strong&gt; for our mint “BUG”. This grants us the power to disable anyone’s BUG token account.&lt;/p&gt;
&lt;p&gt;When we gifted 1 BUG to “Brian”, we created and funded a token account for him at &lt;code class=&quot;language-text&quot;&gt;CMSC2GeWDsTPjfnhzCZHEqGRjKseBhrWaC2zNcfQQuGS&lt;/code&gt;. Let’s freeze that account now:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token freeze &amp;lt;TOKEN-ACCOUNT-TO-FREEZE&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Now Brian’s 1 BUG is frozen in place. If we switch over to Phantom and try to transfer it out of our wallet, we’ll run into an error:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 354px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6380e7d803073f5c475e86921a07bc70/8f50f/freeze.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 151.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsTAAALEwEAmpwYAAADV0lEQVRIx51W21IbRxDlK1AhtOxlZi9oV1pJSwigcJFACFACAgS4isI2drmSqrz4Q/wLeUz+J6kkFafibzmp02I2KyETmYeunu2ZOdOnp7t3FsIwRL1eh+u6cBwHm5ub6Pf72N3dxfb2Njqdruhms4larYYkSRAEgWjawiCA5TjY8wM0lMbC5wA7nQ62trZweHiI/f19ZFmGRqOBNE1RrVZlDwGjMETFcdAPImRaY8HzPAGjVkrBtm2Uy2UsLi6iVCqJXlpaEhuF4+XlZRE64D7sq3gubM8bAxpQA9zr9XB2doaTkxOMRiPxcDgciueXl5c4Pz8XBgQy+xRxXPc/wCIwqR0cHAjdo6MjtNttAaWNh1F4mAEs7p/pIWkbWqRZqVQmvqkty8rXF0Fnemjimcv0t1KP1n8WcHqh3P6DzPJoLsDpjaueQuTRq9mgc3tIqpkK0FQBWiL+k2BPApJiTWls6RDfr9bxKkrwtQ4Re1rmngXYVD6+UgF+StfxoZaJp6ny5wOcpsFNjN03OkTHj9DzV9HWIUJPzXcpxYlietS0j0yHaOkAsdLwplJnJmDx5pjUTOS8dstlrFgWrEoFFcvK65l6ZWXlUVFMeOj7vpTYxcUFTk9PcXd3h9vbW3S7Xalldp/BYCD1zHmW5iMPJxLYcaQPcvH19bUA3tzcYG9vT2zUbAxXV1eieZDx0mDklLXW0jSjKMpjZOqVDdWs4VipMQAZsTcWwzYRQy5mV47jWBrqxsYGWq2WHMTv9fV1meeYHYgh4J4JwCJlesVOzFPX1tby1kVAdnK2L7Y22kiXIWCYZlIuxtHcNuNDTRvHFDPHcEzH78nE/hKZ2Q+fCzh3P3yufAEgS03/jzzcMoNuLqMoRbvjlGHbi7DtEmynBMcZ67FtbHddGwtMFf7smdAmp0yDoI3i+wpJ9Ttk6Tu00nuk8Wsk0WvRrfp9Lr6ujV8O5lWws7OT1+nx8bG8DLJsDUlSxX77F1z0P2HQ+RVvXnzE+x8+4f7FR5z1fhcZ9v5AUh1MAjLzWaP8yTOpG42mJPgY8GcB/Lb7G16O/sKPb//Bu9u/MTw0gH+OAUmNVAnM2jRxI23aKForVKMDpMkN0mSEJBph1b9EHI1Qj0dIkyvRWsX4F31VhHbaLgKjAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Frozen BUG&quot;
        title=&quot;Frozen BUG&quot;
        src=&quot;/static/6380e7d803073f5c475e86921a07bc70/8f50f/freeze.png&quot;
        srcset=&quot;/static/6380e7d803073f5c475e86921a07bc70/12f09/freeze.png 148w,
/static/6380e7d803073f5c475e86921a07bc70/e4a3f/freeze.png 295w,
/static/6380e7d803073f5c475e86921a07bc70/8f50f/freeze.png 354w&quot;
        sizes=&quot;(max-width: 354px) 100vw, 354px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;To unfreeze “Brian”, we can run the aptly named &lt;code class=&quot;language-text&quot;&gt;thaw&lt;/code&gt; command:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;spl-token thaw &amp;lt;TOKEN-ACCOUNT-TO-UNFREEZE&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;This is a useful feature to combat illegal activity, but by default it is turned off in Solana. Importantly, if a token is created without setting a freeze authority then it can never be added back in later. This is why we added the &lt;code class=&quot;language-text&quot;&gt;--enable-freeze&lt;/code&gt; flag to our &lt;code class=&quot;language-text&quot;&gt;create-token&lt;/code&gt; command: it gave us optionality. Once we are an authority, we can add or transfer authority to other addresses by using the &lt;code class=&quot;language-text&quot;&gt;authorize&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;revoke&lt;/code&gt; commands. Once we &lt;code class=&quot;language-text&quot;&gt;revoke&lt;/code&gt; all authorities, however, there’s no going back.&lt;/p&gt;
&lt;h3&gt;Burning Tokens&lt;/h3&gt;
&lt;p&gt;The other type of token mint authority is known as &lt;strong&gt;Mint Authority&lt;/strong&gt;. This one is pretty straightforward, as we used it earlier to mint ourselves 1 billion tokens. When someone creates a new token, their address is granted mint authority by default.&lt;/p&gt;
&lt;p&gt;In addition to minting new tokens, the mint authority can also burn existing tokens. Burning in Solana is very explicit: there is no burn address that tokens are sent to. Instead, the Token Program reduces the units in a given token account. When burning tokens, the mint authority must provide the token account address they would like to burn from, otherwise they will by default burn from their own balances.&lt;/p&gt;
&lt;p&gt;If we want to follow in Bitcoin’s footsteps, we can put a hard cap on the supply of our token by calling &lt;code class=&quot;language-text&quot;&gt;revoke&lt;/code&gt; on all mint authorities. This will prevent anyone from altering our token’s supply ever again.&lt;/p&gt;
&lt;h2&gt;Next Steps&lt;/h2&gt;
&lt;p&gt;We covered a lot of material here, but this is all just dependent on Solana’s core Token Program. There’s a lot more you can do with tokens on Solana, including but not limited to: &lt;a href=&quot;https://docs.projectserum.com/serum-ecosystem/building-on-our-vision/add-a-market-on-serum-serum-academy&quot;&gt;Creating Serum Markets&lt;/a&gt;, &lt;a href=&quot;https://spl.solana.com/token-lending&quot;&gt;Lending&lt;/a&gt;, and &lt;a href=&quot;https://spl.solana.com/token-swap&quot;&gt;AMM-like swaps&lt;/a&gt;. I may explore some of these in a future tutorial.&lt;/p&gt;
&lt;p&gt;If you found this tutorial helpful, please let me know via &lt;a href=&quot;https://twitter.com/bfriel_&quot;&gt;Twitter&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Bonus: Generating Vanity Addresses&lt;/h2&gt;
&lt;p&gt;Your seed phrase grants you access to many different private keys, each with their own corresponding public key. We can search these for a public key that looks cool by using the &lt;code class=&quot;language-text&quot;&gt;solana-keygen grind&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;To find an address that starts with “BUG”, I ran:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana-keygen grind --starts-with bug:1 --ignore-case&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;--starts-with&lt;/code&gt; flag will search for words that start with the next argument (in my case, bug). You can replace bug with a word that you want. The &lt;code class=&quot;language-text&quot;&gt;:1&lt;/code&gt; option tells the CLI to just return the first result it finds. You should keep it at &lt;code class=&quot;language-text&quot;&gt;:1&lt;/code&gt; for now. The &lt;code class=&quot;language-text&quot;&gt;--ignore-case&lt;/code&gt; flag tells the CLI that we don’t care if letters are uppercase or lowercase. Keeping it at &lt;code class=&quot;language-text&quot;&gt;--ignore-case&lt;/code&gt; will greatly reduce search time.&lt;/p&gt;
&lt;p&gt;Once a result is found, the CLI will print a JSON file with your new vanity address. In my case, it printed &lt;code class=&quot;language-text&quot;&gt;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T.json&lt;/code&gt;. This JSON file will live wherever your terminal current is located. You can find that path by running &lt;code class=&quot;language-text&quot;&gt;pwd&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To use your new vanity address from the CLI you can run:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana config set --keypair &amp;lt;PATH/TO/YOUR-VANITY-ADDRESS&amp;gt;.json&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Note that on Mac, Solana stores your default &lt;code class=&quot;language-text&quot;&gt;id.json&lt;/code&gt; keypair at &lt;code class=&quot;language-text&quot;&gt;.config/solana&lt;/code&gt;. You can check your keypair anytime by running:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana config get&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;If you’re planning on launching a token on Solana, using a vanity address makes it easy for your users to verify that they are interacting with the correct token mint. A number of established projects have already adopted this technique, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://saber.so/&quot;&gt;Saber&lt;/a&gt;: &lt;a href=&quot;https://explorer.solana.com/address/Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1&quot;&gt;Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.jetprotocol.io/&quot;&gt;Jet&lt;/a&gt;: &lt;a href=&quot;https://explorer.solana.com/address/JET6zMJWkCN9tpRT2v2jfAmm5VnQFDpUBCyaKojmGtz&quot;&gt;JET6zMJWkCN9tpRT2v2jfAmm5VnQFDpUBCyaKojmGtz&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.orca.so/&quot;&gt;Orca&lt;/a&gt;: &lt;a href=&quot;https://explorer.solana.com/address/orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE&quot;&gt;orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Acknowledgements&lt;/h2&gt;
&lt;p&gt;Many thanks to &lt;a href=&quot;https://twitter.com/pencilflip&quot;&gt;Pencilflip&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/cryptogosu&quot;&gt;Jacob CG&lt;/a&gt; for their review and feedback.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Understanding Program Derived Addresses]]></title><description><![CDATA[This is a follow up to my previous post Learning How to Build on Solana. Check out the live app and its updated code. Picking Up Where We…]]></description><link>https://brianfriel.xyz/understanding-program-derived-addresses/</link><guid isPermaLink="false">https://brianfriel.xyz/understanding-program-derived-addresses/</guid><pubDate>Thu, 21 Oct 2021 01:22:04 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;This is a follow up to my previous post &lt;a href=&quot;https://brianfriel.xyz/learning-how-to-build-on-solana/&quot;&gt;Learning How to Build on Solana&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Check out the &lt;a href=&quot;https://www.pbvote.com/&quot;&gt;live app&lt;/a&gt; and its &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth-v2&quot;&gt;updated code&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Picking Up Where We Left Off&lt;/h2&gt;
&lt;p&gt;In my &lt;a href=&quot;https://www.brianfriel.xyz/learning-how-to-build-on-solana/&quot;&gt;last post&lt;/a&gt;, we built a simple &lt;a href=&quot;https://www.pbvote.com/&quot;&gt;app&lt;/a&gt; that let &lt;a href=&quot;https://solana.com/&quot;&gt;Solana&lt;/a&gt; users vote for their favorite type of peanut butter: Crunchy or Smooth?&lt;/p&gt;
&lt;p&gt;Working with &lt;a href=&quot;https://project-serum.github.io/anchor/getting-started/introduction.html&quot;&gt;Anchor&lt;/a&gt; made our lives a lot easier. In less than 50 lines of &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt;, we could write our own program and have confidence that it would meet the demanding serialization and deserialization requirements set forth by its &lt;a href=&quot;https://docs.solana.com/developing/on-chain-programs/overview#input-parameter-serialization&quot;&gt;BPF Loader&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We deployed our program and spun up a frontend to interact with it, but something was missing. Our app worked, but the &lt;a href=&quot;https://docs.solana.com/terminology#keypair&quot;&gt;keypair&lt;/a&gt; that held all our data was stored on some &lt;a href=&quot;https://nodejs.org/en/&quot;&gt;Node&lt;/a&gt; server maintained by &lt;a href=&quot;https://www.heroku.com/&quot;&gt;Heroku&lt;/a&gt;. This didn’t feel very web3. Furthermore, it created a lot of headaches around storing and securing our keypair. Anytime our server restarted, we’d generate a new keypair thus reset all our data.&lt;/p&gt;
&lt;p&gt;How do production apps get around this issue? Instead of storing a keypair somewhere, most apps use something called a &lt;a href=&quot;https://docs.solana.com/developing/programming-model/calling-between-programs#program-derived-addresses&quot;&gt;Program Derived Address (PDA)&lt;/a&gt;. To understand how PDAs work, let’s first take a step back and get a quick refresher on how Solana programs read and write data.&lt;/p&gt;
&lt;h2&gt;How Solana Stores Data&lt;/h2&gt;
&lt;p&gt;As you may recall, Solana completely separates code from data. In Solana, all programs are stateless: any data that they work with must be passed in by reference from the outside.&lt;/p&gt;
&lt;p&gt;In the case of our app, this means there is no way for our voting program to internally update its own vote count for crunchy or smooth. So where do these votes live? The answer is something called an &lt;a href=&quot;https://docs.solana.com/developing/programming-model/accounts&quot;&gt;account&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Accounts&lt;/h3&gt;
&lt;p&gt;Accounts can be thought of as collections of related information, similar to a file in an operating system. Accounts are both used by and owned by programs, and a single program can own many different accounts.&lt;/p&gt;
&lt;p&gt;If you’re familiar with &lt;a href=&quot;https://ethereum.org/en/developers/docs/accounts/&quot;&gt;Ethereum&lt;/a&gt;, this terminology may confuse you. To quote &lt;a href=&quot;https://2501babe.github.io/posts/solana101.html&quot;&gt;hana&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;accounts are buffers. i dont know why they call them accounts it confuses the shit out of everyone.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Like a file, accounts can store arbitrary kinds of data (e.g. integers, strings, pubkeys) as well as SOL. Accounts also have metadata which describes who is allowed to access its data and &lt;a href=&quot;https://docs.solana.com/developing/programming-model/accounts#rent&quot;&gt;how long the account can live for&lt;/a&gt;. Anyone can read or credit an account, but only the account owner can debit it or modify its data.&lt;/p&gt;
&lt;p&gt;Accounts are created by simply generating a new keypair and registering its public key with the &lt;a href=&quot;https://docs.solana.com/developing/programming-model/accounts#creating&quot;&gt;System Program&lt;/a&gt;. Each account is identified by its unique address (aka public key), the same kind which is used to identify your &lt;a href=&quot;https://phantom.app/&quot;&gt;Phantom&lt;/a&gt; wallet. In our case, we can lookup our vote account at &lt;a href=&quot;https://explorer.solana.com/address/9pKBrUtJU9GNmct6T2BQtiKqvubtjS9D2if2bm1P8TQd&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;9pKBrUtJU9GNmct6T2BQtiKqvubtjS9D2if2bm1P8TQd&lt;/code&gt;&lt;/a&gt;. This begs the question: if our vote account can be looked up with what looks like a public key, who holds the private key for this account? The answer is nobody! How then is our program able to record votes as they occur? Enter: PDAs.&lt;/p&gt;
&lt;h3&gt;Program Derived Addresses (PDAs)&lt;/h3&gt;
&lt;p&gt;A Program Derived Address (PDA) is home to an account that’s designed to be controlled by a specific program. With PDAs, programs can programatically sign for certain addresses without needing a private key. At the same time, PDAs ensure that no external user could also generate a valid signature for the same address. These addresses serve as the foundation for &lt;a href=&quot;https://docs.solana.com/developing/programming-model/calling-between-programs&quot;&gt;Cross-Program Invocation&lt;/a&gt;, which allows Solana apps to be composable with one another.&lt;/p&gt;
&lt;p&gt;The secret sauce behind PDAs is that while they look like standard public keys, they don’t actually lie on the ed25519 elliptic curve at all. This means they have no associated private key. You might be asking yourself, “How can a program sign for an account that has no private key?” The answer lies in how PDAs are derived.&lt;/p&gt;
&lt;h4&gt;Seeds and Bumps&lt;/h4&gt;
&lt;p&gt;PDAs are derived from a program id (in our case, &lt;a href=&quot;https://explorer.solana.com/address/6a2GdmttJdanBkoHt7f4Kon4hfadx4UTUgJeRkCaiL3U&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;6a2GdmttJdanBkoHt7f4Kon4hfadx4UTUgJeRkCaiL3U&lt;/code&gt;&lt;/a&gt;) and a collection of seeds such as the string &lt;code class=&quot;language-text&quot;&gt;&quot;vote_account&quot;&lt;/code&gt;. This combination of seeds and a program id is then run through a sha256 hash function to see whether or not they generate a public key that lies on the elliptic curve.&lt;/p&gt;
&lt;p&gt;It may be helpful to consider that PDAs are not technically &lt;em&gt;created&lt;/em&gt;, but rather &lt;em&gt;found&lt;/em&gt;. In running our program id and seeds through a hash function, there is a ~50% chance that we actually end up with a valid public key that does lie on the elliptic curve. In this case, we simply add something to fudge our input a little bit and try again. The technical term for this fudge factor is a &lt;code class=&quot;language-text&quot;&gt;bump&lt;/code&gt;. In Solana, we start with &lt;code class=&quot;language-text&quot;&gt;bump = 255&lt;/code&gt; and simply iterate down through &lt;code class=&quot;language-text&quot;&gt;bump = 254&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;bump = 253&lt;/code&gt;, etc. until we get an address that is not on the elliptic curve. This may seem rudimentary, but once found it gives us a deterministic way of deriving the same PDA over and over again. This also allows our program to now sign for an account using &lt;a href=&quot;https://docs.solana.com/developing/programming-model/calling-between-programs#program-signed-accounts&quot;&gt;Solana’s &lt;code class=&quot;language-text&quot;&gt;invoke_signed&lt;/code&gt; function&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It’s important to note that our seed does not have to be static. In fact, a common practice is to generate PDAs using the public key of an end user, allowing our program to store information about that user in its own standalone account.&lt;/p&gt;
&lt;h2&gt;Refactoring Our Program&lt;/h2&gt;
&lt;p&gt;Armed with this knowledge, we can now go about refactoring &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth&quot;&gt;our original Anchor program&lt;/a&gt; to make use of PDAs. We’ll retain the same structure of having an &lt;code class=&quot;language-text&quot;&gt;Initialize&lt;/code&gt; instruction and a &lt;code class=&quot;language-text&quot;&gt;Vote&lt;/code&gt; instruction, but modify them to record votes on a PDA owned by our program rather than a standard account generated by a keypair.&lt;/p&gt;
&lt;p&gt;Starting off with the &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; method, we’ll now pass in a second parameter &lt;code class=&quot;language-text&quot;&gt;vote_account_bump&lt;/code&gt; and record that on the account itself. This will make it easy for Anchor to handle all future account validations. Check out the diff between our first version and this updated version below:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;diff&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;-    pub fn initialize(ctx: Context&amp;lt;Initialize&amp;gt;) -&amp;gt; ProgramResult {
-        let vote_account = &amp;amp;mut ctx.accounts.vote_account;
-       vote_account.crunchy = 0;
-        vote_account.smooth = 0;
-        Ok(())
-    }
+    pub fn initialize(ctx: Context&amp;lt;Initialize&amp;gt;, vote_account_bump: u8) -&amp;gt; ProgramResult {
+        ctx.accounts.vote_account.bump = vote_account_bump;
+        Ok(())
+    }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;You’ll notice that we’re also no longer manually setting both &lt;code class=&quot;language-text&quot;&gt;crunchy = 0&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;smooth = 0&lt;/code&gt;. We can skip this by using Rust’s &lt;a href=&quot;https://doc.rust-lang.org/std/default/trait.Default.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;#[derive(Default)]&lt;/code&gt; macro&lt;/a&gt; on the struct that defines what our &lt;code class=&quot;language-text&quot;&gt;vote_account&lt;/code&gt; looks like. If you’re following along from my last example, I renamed this struct from &lt;code class=&quot;language-text&quot;&gt;VoteAccount&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;VotingState&lt;/code&gt;.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;rust&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;#[account]
#[derive(Default)]
pub struct VotingState {
    crunchy: u64,
    smooth: u64,
    bump: u8,
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;We’ll also update our &lt;code class=&quot;language-text&quot;&gt;Initialize&lt;/code&gt; instruction to make use of our PDA. Here, we’re deriving a PDA from the static seed &lt;code class=&quot;language-text&quot;&gt;&quot;vote_account&quot;&lt;/code&gt; and the &lt;code class=&quot;language-text&quot;&gt;vote_account_bump&lt;/code&gt; passed in by whoever first calls &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt;. I’ve added comments that explain what each line is doing below.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;rust&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;#[derive(Accounts)]
#[instruction(vote_account_bump: u8)]
pub struct Initialize&amp;lt;&amp;#39;info&amp;gt; {

    /// The #[account(...)] macro enforces that our `vote_account` is owned by the currently executing program.
    ///
    /// We mark `vote_account` with the `init` attribute, which creates a new account owned by the program
    /// When using `init`, we must also provide:
    /// `payer`, which funds the account creation
    /// and the `system_program` which is required by the runtime
    ///
    /// If our account were to use variable length types like String or Vec we would also need to allocate `space` to our account
    /// Since we are only dealing with fixed-sized integers, we can leave out `space` and Anchor will calculate this for us automatically
    ///
    /// `seeds` and `bump` tell us that our `vote_account` is a PDA that can be derived from their respective values
    /// Account&amp;lt;&amp;#39;info, VotingState&amp;gt; tells us that it should be deserialized to the VotingState struct defined below at #[account]
    #[account(init, seeds = [b&amp;quot;vote_account&amp;quot;.as_ref()], bump = vote_account_bump, payer = user)]
    vote_account: Account&amp;lt;&amp;#39;info, VotingState&amp;gt;,
    user: Signer&amp;lt;&amp;#39;info&amp;gt;,
    system_program: Program&amp;lt;&amp;#39;info, System&amp;gt;,
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;We’ll then repeat a similar pattern for our &lt;code class=&quot;language-text&quot;&gt;Vote&lt;/code&gt; instruction and its two methods, &lt;code class=&quot;language-text&quot;&gt;vote_crunchy&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;vote_smooth&lt;/code&gt;. I’ve pasted my entire program below, complete with comments. Take note of how we can now access &lt;code class=&quot;language-text&quot;&gt;bump = vote_account.bump&lt;/code&gt; thanks to our new &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; method.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;rust&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;use anchor_lang::prelude::*;

declare_id!(&amp;quot;6a2GdmttJdanBkoHt7f4Kon4hfadx4UTUgJeRkCaiL3U&amp;quot;);
/// The Program ID can be found in /target/idl/[your_project_name].json
//
/// This is where the magic happens. We define our program!
/// Each method inside here defines an RPC request handler (aka instruction handler) which can be invoked by clients
#[program]
mod crunchy_vs_smooth {
    use super::*;

    /// The first parameter for every RPC handler is the Context struct. We define Initialize and Vote below at #[derive(Accounts)]
    /// When `initialize` is called, we&amp;#39;ll store the `vote_account_bump` that was used to derive our PDA so that others can easily derive it on their clients
    /// We no longer have to manually set both `crunchy` and `smooth` to 0 because we opted to use the `default` trait on our VotingState struct at the bottom of this file
    /// This a Rust trait that is used via #[derive(Default)]. More info on that here: https://doc.rust-lang.org/std/default/trait.Default.html
    pub fn initialize(ctx: Context&amp;lt;Initialize&amp;gt;, vote_account_bump: u8) -&amp;gt; ProgramResult {
        ctx.accounts.vote_account.bump = vote_account_bump;
        Ok(())
    }

    /// All our account validation logic is handled below at the #[account(...)] macros, letting us just focus our business logic
    pub fn vote_crunchy(ctx: Context&amp;lt;Vote&amp;gt;) -&amp;gt; ProgramResult {
        ctx.accounts.vote_account.crunchy += 1;
        Ok(())
    }

    pub fn vote_smooth(ctx: Context&amp;lt;Vote&amp;gt;) -&amp;gt; ProgramResult {
        ctx.accounts.vote_account.smooth += 1;
        Ok(())
    }
}

/// The #[derive(Accounts)] macro specifies all the accounts that are required for a given instruction
/// Here, we define two structs: Initialize and Vote
#[derive(Accounts)]
#[instruction(vote_account_bump: u8)]
pub struct Initialize&amp;lt;&amp;#39;info&amp;gt; {

    /// The #[account(...)] macro enforces that our `vote_account` is owned by the currently executing program.
    ///
    /// We mark `vote_account` with the `init` attribute, which creates a new account owned by the program
    /// When using `init`, we must also provide:
    /// `payer`, which funds the account creation
    /// and the `system_program` which is required by the runtime
    ///
    /// If our account were to use variable length types like String or Vec we would also need to allocate `space` to our account
    /// Since we are only dealing with fixed-sized integers, we can leave out `space` and Anchor will calculate this for us automatically
    ///
    /// `seeds` and `bump` tell us that our `vote_account` is a PDA that can be derived from their respective values
    /// Account&amp;lt;&amp;#39;info, VotingState&amp;gt; tells us that it should be deserialized to the VotingState struct defined below at #[account]
    #[account(init, seeds = [b&amp;quot;vote_account&amp;quot;.as_ref()], bump = vote_account_bump, payer = user)]
    vote_account: Account&amp;lt;&amp;#39;info, VotingState&amp;gt;,
    user: Signer&amp;lt;&amp;#39;info&amp;gt;,
    system_program: Program&amp;lt;&amp;#39;info, System&amp;gt;,
}

#[derive(Accounts)]
pub struct Vote&amp;lt;&amp;#39;info&amp;gt; {
    #[account(mut, seeds = [b&amp;quot;vote_account&amp;quot;.as_ref()], bump = vote_account.bump)]
    vote_account: Account&amp;lt;&amp;#39;info, VotingState&amp;gt;,
}

/// Here we define what what the state of our `vote_account` looks like
/// We define a struct with three public properties: crunchy, smooth, and bump
/// The `crunchy` and `smooth` properties will keep track of their respective votes as unsigned 64-bit integers
/// `bump` will store the `vote_account_bump` we passed in when we initialized our program
/// This `bump` combined with our static &amp;quot;vote_account&amp;quot; seed will make it easy for anyone to derive the same PDA we use use to keep track of our state
/// All of this will be passed inside each Transaction Instruction to record votes as they occur
#[account]
#[derive(Default)]
pub struct VotingState {
    crunchy: u64,
    smooth: u64,
    bump: u8,
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;h4&gt;Updating our Frontend&lt;/h4&gt;
&lt;p&gt;With our program now making use of a PDA, it’s time to hook up our frontend. If you’re following along in your own repo, make sure to follow the necessary steps involved with rebuilding and deploying your program locally. I outlined the steps I use my &lt;a href=&quot;https://www.brianfriel.xyz/learning-how-to-build-on-solana/&quot;&gt;last post&lt;/a&gt;, which are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Set your Solana configuration&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;# replace devnet with your desired network (i.e. localhost, testnet, mainnet-beta)
solana config set --url devnet&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;
&lt;p&gt;Copy this network to your &lt;code class=&quot;language-text&quot;&gt;Anchor.toml&lt;/code&gt; file&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Rebuild your Anchor program and make sure your program ID matches what’s in &lt;code class=&quot;language-text&quot;&gt;Anchor.toml&lt;/code&gt; (it usually does)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor build&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;Deploy your program&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor deploy&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;
&lt;p&gt;In our frontend directory, update the network url to your desired network (i.e. &lt;code class=&quot;language-text&quot;&gt;clusterApiUrl(&quot;devnet&quot;)&lt;/code&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Update network settings in your Phantom wallet&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I won’t be going through every update to my React app, but you are welcome to copy the entire directory from &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth-v2/tree/master/app&quot;&gt;my Github&lt;/a&gt;. I will however go over a few PDA-specific updates that should drive home how one can work with these addresses.&lt;/p&gt;
&lt;p&gt;The biggest update is to our &lt;code class=&quot;language-text&quot;&gt;getVoteAccount()&lt;/code&gt; function. In our previous app, we stored the keypair to our account on our Node server and requested this keypair anytime we needed it (bad!). Now, we’re deriving a PDA ourselves from our &lt;code class=&quot;language-text&quot;&gt;&quot;vote_account&quot;&lt;/code&gt; seed, our &lt;code class=&quot;language-text&quot;&gt;programID&lt;/code&gt;, and an &lt;code class=&quot;language-text&quot;&gt;accountBump&lt;/code&gt;. To find this bump, we’ll use &lt;a href=&quot;https://solana-labs.github.io/solana-web3.js/classes/PublicKey.html#findProgramAddress&quot;&gt;Solana web3js’s &lt;code class=&quot;language-text&quot;&gt;findProgramAddress&lt;/code&gt;&lt;/a&gt; to iterate through all possibilities.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// In src/App.js

useEffect(() =&amp;gt; {
  const getVoteAccount = async () =&amp;gt; {
    let account,
      accountBump = null
    ;[account, accountBump] = await web3.PublicKey.findProgramAddress(
      [Buffer.from(&amp;quot;vote_account&amp;quot;)],
      programID
    )
    setVoteAccount({ account, accountBump })
  }
  getVoteAccount()
}, [])&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Once we find a &lt;code class=&quot;language-text&quot;&gt;voteAccountBump&lt;/code&gt; that kicks us off the elliptic curve, we can then pass it as an argument to the &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; method we created earlier.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// In src/components/Main.jsx

async function initializeVoting() {
  const provider = await getProvider()
  const program = new Program(idl, programID, provider)
  try {
    await program.rpc.initialize(new BN(voteAccountBump), {
      accounts: {
        user: provider.wallet.publicKey,
        voteAccount: voteAccount,
        systemProgram: web3.SystemProgram.programId,
      },
    })
    const account = await program.account.votingState.fetch(voteAccount)
    setVotes({
      crunchy: account.crunchy?.toNumber(),
      smooth: account.smooth?.toNumber(),
    })
    enqueueSnackbar(&amp;quot;Vote account initialized&amp;quot;, { variant: &amp;quot;success&amp;quot; })
  } catch (error) {
    console.log(&amp;quot;Transaction error: &amp;quot;, error)
    console.log(error.toString())
    enqueueSnackbar(`Error: ${error.toString()}`, { variant: &amp;quot;error&amp;quot; })
  }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Once &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; is called, we’ll be all set up with a PDA to handle our crunchy and smooth voting needs. The rest of our frontend should be straightforward if you’ve read through my &lt;a href=&quot;https://www.brianfriel.xyz/learning-how-to-build-on-solana/&quot;&gt;previous walkthrough&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Wrapping Up&lt;/h3&gt;
&lt;p&gt;If you’re new to Solana, I hope this walkthrough helped shed a little light on what PDAs are and how you can go about implementing them in your own projects. If you have questions or feedback on this post, please reach out to me via &lt;a href=&quot;https://twitter.com/bfriel_&quot;&gt;Twitter&lt;/a&gt;. Special thanks to everyone in the Anchor discord who helped me gain a better understanding of PDAs, especially &lt;a href=&quot;https://twitter.com/cqfdee&quot;&gt;@cqfd (Alan)&lt;/a&gt; and @donderper.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Learning How to Build on Solana]]></title><description><![CDATA[Check out the live app and its code. Introduction About a week ago I was scrolling through Twitter when I came across the following tweet…]]></description><link>https://brianfriel.xyz/learning-how-to-build-on-solana/</link><guid isPermaLink="false">https://brianfriel.xyz/learning-how-to-build-on-solana/</guid><pubDate>Mon, 27 Sep 2021 20:46:37 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;Check out the &lt;a href=&quot;https://www.pbvote.com/&quot;&gt;live app&lt;/a&gt; and its &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth&quot;&gt;code&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;About a week ago I was scrolling through Twitter when I came across the following tweet from Armani Ferrante, a software engineer at &lt;a href=&quot;https://www.alameda-research.com/&quot;&gt;Alameda Research&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://twitter.com/armaniferrante/status/1434554725093949452&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHvQqaAAA//xAAbEAABBAMAAAAAAAAAAAAAAAABAAIQESAhMf/aAAgBAQABBQImlcO4BvD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAACAQUAAAAAAAAAAAAAAAAAAREQICExcf/aAAgBAQABPyGBoSvtEnAcrCP/2gAMAwEAAgADAAAAEEPPAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABoQAQEBAAMBAAAAAAAAAAAAAAERABAhMUH/2gAIAQEAAT8QYEqse5MzKV8OGAFbjCwnL5mp3v/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Armani Ferrante Tweet&quot;
        title=&quot;Armani Ferrante Tweet&quot;
        src=&quot;/static/7a811e69772fa4b489dcaaa0d84f72cd/1c72d/tweet.jpg&quot;
        srcset=&quot;/static/7a811e69772fa4b489dcaaa0d84f72cd/a80bd/tweet.jpg 148w,
/static/7a811e69772fa4b489dcaaa0d84f72cd/1c91a/tweet.jpg 295w,
/static/7a811e69772fa4b489dcaaa0d84f72cd/1c72d/tweet.jpg 590w,
/static/7a811e69772fa4b489dcaaa0d84f72cd/a8a14/tweet.jpg 885w,
/static/7a811e69772fa4b489dcaaa0d84f72cd/fbd2c/tweet.jpg 1180w,
/static/7a811e69772fa4b489dcaaa0d84f72cd/e8d98/tweet.jpg 1642w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Armani is the creator of &lt;a href=&quot;https://project-serum.github.io/anchor/getting-started/introduction.html&quot;&gt;Anchor&lt;/a&gt;, a framework for developing smart contracts on &lt;a href=&quot;https://solana.com/&quot;&gt;Solana&lt;/a&gt;. Anchor can be thought of like the &lt;a href=&quot;https://rubyonrails.org/&quot;&gt;Ruby on Rails&lt;/a&gt; of Solana development: It’s an opinionated way of writing programs that abstracts away a lot of repetitive, low-level code and lets developers focus on just building their apps.&lt;/p&gt;
&lt;p&gt;Up until stumbling upon Armani’s tweet, I had been interested in learning how to build on Solana, but had largely put it off due to its perceived time commitment. Unlike most other smart contract platforms, Solana is not natively &lt;a href=&quot;https://ethereum.org/en/developers/docs/evm/&quot;&gt;EVM&lt;/a&gt;-compatible, meaning the vast majority of Web 3 applications that exist today cannot be easily copied over to Solana. Over the last six years, a huge developer ecosystem has emerged around &lt;a href=&quot;https://ethereum.org/en/&quot;&gt;Ethereum&lt;/a&gt; that supports writing, testing, and deploying smart contracts written in &lt;a href=&quot;https://docs.soliditylang.org/en/v0.8.7/&quot;&gt;Solidity&lt;/a&gt;. Solana, which launched its mainnet-beta back in March 2020, must build its &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt;-based developer ecosystem entirely from scratch.&lt;/p&gt;
&lt;p&gt;While Solana is considered new, Anchor is even newer. The framework is still in its infancy and has yet to publish its official v1.0.0 release. The source code is currently unaudited and its APIs change regularly, but its productivity and security enhancements are such that it is quickly becoming the go-to foundation for the majority of Solana developers.&lt;/p&gt;
&lt;p&gt;Upon seeing Armani’s tweet, I decided it was time for me to learn how to build on Solana. Specifically, I wanted to learn how to build a program using Anchor that I could then interact with via a &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; application. Having no prior experience with Rust, I set a goal of building a simple voting app that lets the world vote for its favorite type of peanut butter. The live version of this app can be found at &lt;a href=&quot;https://www.pbvote.com/&quot;&gt;www.pbvote.com&lt;/a&gt; and its source code can be found on &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth&quot;&gt;my GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What follows is a walkthrough of my experience and a simple guide for others to follow when building their first Solana application.&lt;/p&gt;
&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This walkthrough covers three main sections:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Writing our Rust-based Solana program using Anchor&lt;/li&gt;
&lt;li&gt;Creating our React application to interface with our Solana program&lt;/li&gt;
&lt;li&gt;Deploying our completed work for the rest of the world to see&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Writing our Rust-based Solana program using Anchor&lt;/h2&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;Before we can build anything, we first have to install the necessary command line tools. Chief amongst these are &lt;a href=&quot;https://docs.solana.com/cli/install-solana-cli-tools&quot;&gt;Solana&lt;/a&gt;, &lt;a href=&quot;https://project-serum.github.io/anchor/getting-started/installation.html#install-rust&quot;&gt;Anchor&lt;/a&gt;, and &lt;a href=&quot;https://nodejs.org/en/&quot;&gt;NodeJS&lt;/a&gt;. I’ve linked to guides on how to install Solana and Anchor which include installing their necessary dependencies such as Rust. If you don’t have Node yet, I recommend installing it via &lt;a href=&quot;https://github.com/nvm-sh/nvm&quot;&gt;Node Version Manager (NVM)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Before proceeding, you should be able to run the following commands in your terminal:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana --version
anchor --version
node -v&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;I developed my app with the following versions:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana-cli 1.7.11
anchor-cli 0.16.0
node v16.7.0&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;At the time of this writing, my setup runs on MacOS 11.5.2. For the purposes of this walkthrough, I won’t be covering anything related to other operating systems such as Linux or Windows.&lt;/p&gt;
&lt;h4&gt;Getting Started with Anchor&lt;/h4&gt;
&lt;p&gt;With the necessary tools installed, we can initialize our project by calling &lt;code class=&quot;language-text&quot;&gt;anchor init&lt;/code&gt; and then changing into our project directory.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor init crunchy-vs-smooth
cd crunchy-vs-smooth&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Opening up our project, the first thing you’ll notice is that Anchor already created a bunch of files to get us started. The majority of these files are organized into four main folders (outside of &lt;code class=&quot;language-text&quot;&gt;node_modules&lt;/code&gt; which you can ignore):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;app&lt;/strong&gt; - Where our React app will go&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;migrations&lt;/strong&gt; - Home to a single deploy script&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;programs&lt;/strong&gt; - Where we will write our Solana program&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;test&lt;/strong&gt; - Where we can write JavaScript tests for our program&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It’s worth reiterating that Anchor is an &lt;em&gt;opinionated&lt;/em&gt; framework. This means that it makes assumptions about how code should be structured and makes trade offs surrounding low-level things like serialization and deserialization. For the vast majority of new developers entering Solana, these opinions shouldn’t get in your way. Anchor’s goal is to become a true zero-cost abstraction in the sense that there is no performance penalty for adopting the framework.&lt;/p&gt;
&lt;p&gt;Diving into our &lt;code class=&quot;language-text&quot;&gt;programs&lt;/code&gt; folder, you’ll notice a basic program that Anchor has written on our behalf:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;rust&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;use anchor_lang::prelude::*;

declare_id!(&amp;quot;Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS&amp;quot;);

#[program]
pub mod crunchy_vs_smooth {
    use super::*;
    pub fn initialize(ctx: Context&amp;lt;Initialize&amp;gt;) -&amp;gt; ProgramResult {
        Ok(())
    }
}

#[derive(Accounts)]
pub struct Initialize {}
&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;This is the basic program from the &lt;a href=&quot;https://project-serum.github.io/anchor/tutorials/tutorial-0.html#defining-a-program&quot;&gt;official Anchor docs&lt;/a&gt;. Not much is happening here, we define a program named after our project with a single method &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt;. When &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; is invoked, it returns out of the program successfully without touching any data. Despite the lack of functionality, this example highlights a few key aspects of Anchor:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Right off the bat, you should notice &lt;code class=&quot;language-text&quot;&gt;declare_id!(&quot;your-program-id-here&quot;)&lt;/code&gt;. What this does is statically define your program address and embed it into the program. This is one of many ways in which Anchor makes it easy for us to build more-secure applications.&lt;/li&gt;
&lt;li&gt;Macros such as &lt;code class=&quot;language-text&quot;&gt;#[program]&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;#[derive(Accounts)]&lt;/code&gt; are the cornerstones of the Anchor framework. These macros abstract away lots of low level Rust code that would otherwise slow down developers and create room for more errors. With &lt;code class=&quot;language-text&quot;&gt;#[program]&lt;/code&gt; we’re able to easily define our program and set up inner methods such as &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; that will automatically be recognized by our clients as valid &lt;a href=&quot;https://en.wikipedia.org/wiki/Remote_procedure_call&quot;&gt;RPC&lt;/a&gt; endpoints they can call. In the case of &lt;code class=&quot;language-text&quot;&gt;#[derive(Accounts)]&lt;/code&gt; we’re able to define transaction instructions and handle our validation logic outside of our main program. We’ll cover this in more detail later.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Context&lt;/code&gt; is always the first parameter passed in any method we create with Anchor. In this case, &lt;code class=&quot;language-text&quot;&gt;ctx: Context&amp;lt;Initialize&gt;&lt;/code&gt;, Context is a simple container over the &lt;code class=&quot;language-text&quot;&gt;Initialize&lt;/code&gt; struct defined at the bottom of our file. This struct is empty for now, but the relationship will make more sense in the next example.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Writing our Program&lt;/h4&gt;
&lt;p&gt;Let’s go ahead and look at our finished program. To recap: We’re looking to create an app that lets the world vote for their favorite type of peanut butter. Specifically, we’re writing a program that lets users vote for crunchy or smooth and keeps track of each vote overtime.&lt;/p&gt;
&lt;p&gt;Below is my basic implementation, filled with comments explaining what each section is doing. Give it a read, and if you’re following along go ahead and copy-paste the code below in &lt;code class=&quot;language-text&quot;&gt;programs/crunchy-vs-smooth/src/lib.rs&lt;/code&gt;.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;rust&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;use anchor_lang::prelude::*;
declare_id!(&amp;quot;Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS&amp;quot;);
/// We&amp;#39;ll update our declare_id! later. Once you run `anchor build`, your Program ID can be found in /target/idl/[your_project_name].json
/// Moving on to the #[program] macro below, this is where we define our program.
/// Each method inside here defines an RPC request handler (aka instruction handler) which can be invoked by clients
#[program]
pub mod crunchy_vs_smooth {
    use super::*;
    /// The first parameter for every RPC handler is the Context struct. We define Initialize and Vote below at #[derive(Accounts)]
    pub fn initialize(ctx: Context&amp;lt;Initialize&amp;gt;) -&amp;gt; ProgramResult {
        let vote_account = &amp;amp;mut ctx.accounts.vote_account;
        vote_account.crunchy = 0;
        vote_account.smooth = 0;
        Ok(())
    }
    /// All account validation logic is handled below at the #[account(...)] macros, letting us just focus on the business logic
    pub fn vote_crunchy(ctx: Context&amp;lt;Vote&amp;gt;) -&amp;gt; ProgramResult {
        let vote_account = &amp;amp;mut ctx.accounts.vote_account;
        vote_account.crunchy += 1;
        Ok(())
    }
    pub fn vote_smooth(ctx: Context&amp;lt;Vote&amp;gt;) -&amp;gt; ProgramResult {
        let vote_account = &amp;amp;mut ctx.accounts.vote_account;
        vote_account.smooth += 1;
        Ok(())
    }
}
/// The #[derive(Accounts)] macro specifies all the accounts that are required for a given instruction
/// Here, we define two structs: Initialize and Vote
#[derive(Accounts)]
pub struct Initialize&amp;lt;&amp;#39;info&amp;gt; {
    /// We mark vote_account with the init attribute, which creates a new account owned by the program
    /// When using init, we must also provide:
    /// payer, which funds the account creation
    /// space, which defines how large the account should be
    /// and the system_program which is required by the runtime
    /// This enforces that our vote_account must be owned by the currently executing program, and that it should be deserialized to the VoteAccount struct below at #[account]
    #[account(init, payer = user, space = 16 + 16)]
    pub vote_account: Account&amp;lt;&amp;#39;info, VoteAccount&amp;gt;,
    #[account(mut)]
    pub user: Signer&amp;lt;&amp;#39;info&amp;gt;,
    pub system_program: Program &amp;lt;&amp;#39;info, System&amp;gt;,
}
#[derive(Accounts)]
pub struct Vote&amp;lt;&amp;#39;info&amp;gt; {
    /// Marking accounts as mut persists any changes made upon exiting the program, allowing our votes to be recorded
    #[account(mut)]
    pub vote_account: Account&amp;lt;&amp;#39;info, VoteAccount&amp;gt;,
}
/// Here we define what our VoteAccount looks like
/// We define a struct with two public properties: crunchy and smooth
/// These properties will keep track of their respective votes as unsigned 64-bit integers
/// This VoteAccount will be passed inside each Transaction Instruction to record votes as they occur
#[account]
pub struct VoteAccount {
    pub crunchy: u64,
    pub smooth: u64,
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;There are two things I want to highlight here. The first is the way that Solana programs handle data. If you’re familiar with Solidity, you’re used to the idea of code and data living in the same place. In Ethereum, smart contracts own data and can update their data within their own functions. In Solana, data and code live separately. If you take a look at our updated &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; function, you’ll see that we are reading and writing data from a vote account that is being passed into our program via the Context parameter &lt;code class=&quot;language-text&quot;&gt;ctx&lt;/code&gt;. Our vote account is defined at the bottom of our file as a simple struct with two fields, crunchy and smooth, that hold unsigned 64-bit integers.&lt;/p&gt;
&lt;p&gt;This idea of code and data separation can be a bit unintuitive at first, but Anchor makes it easier with the &lt;code class=&quot;language-text&quot;&gt;#[derive(Accounts)]&lt;/code&gt; macro. This is the second thing I want to highlight. With &lt;code class=&quot;language-text&quot;&gt;#[derive(Accounts)]&lt;/code&gt;, we can specify all the accounts that are required for a given transaction instruction and let Anchor deal with all the serialization and deserialization required to tie everything together. The big takeaway here is that with Anchor, we’re able to separate our account validation logic from the business logic in our main program. This leads to less boilerplate and less code to reason about. For more information on how accounts work with programs, I recommend reading the aptly named &lt;a href=&quot;https://2501babe.github.io/posts/solana101.html&quot;&gt;ok so what the fuck is the deal with solana anyway&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;With our program newly updated, let’s build our code by running the following command:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor build&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Once complete, you’ll see a new folder named &lt;code class=&quot;language-text&quot;&gt;target&lt;/code&gt; full of a bunch of files and folders. When we build our code, one of the things that Anchor creates for us is an &lt;a href=&quot;https://en.wikipedia.org/wiki/Interface_description_language&quot;&gt;Interface Description Language (IDL)&lt;/a&gt;. This IDL serves as a common interface for interacting with our Rust program. Go ahead and open this file at &lt;code class=&quot;language-text&quot;&gt;target/idl/crunch_vs_smooth.json&lt;/code&gt;. In here, you should see a list of the three methods we defined earlier (&lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;voteCrunchy&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;voteSmooth&lt;/code&gt;) as well as the accounts that are required to be passed in for each transaction. With this IDL, we now have a standardized way of communicating with our program from any other programming language, be it JavaScript, Go, C#, etc.&lt;/p&gt;
&lt;h4&gt;Testing and Deploying to Localnet&lt;/h4&gt;
&lt;p&gt;With our Anchor program now built, we can move on to testing and deploying our program. In our &lt;code class=&quot;language-text&quot;&gt;tests&lt;/code&gt; folder we should already see a file named &lt;code class=&quot;language-text&quot;&gt;crunchy-vs-smooth.js&lt;/code&gt; go ahead and replace its contents with the following:&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;const assert = require(&amp;quot;assert&amp;quot;);
const anchor = require(&amp;quot;@project-serum/anchor&amp;quot;);
const { SystemProgram } = anchor.web3;
describe(&amp;quot;crunchy-vs-smooth&amp;quot;, () =&amp;gt; {
  /* Configure the client */
  const provider = anchor.Provider.env();
  anchor.setProvider(provider);
  const program = anchor.workspace.CrunchyVsSmooth;
  const voteAccount = anchor.web3.Keypair.generate();
  it(&amp;quot;Initializes with 0 votes for crunchy and smooth&amp;quot;, async () =&amp;gt; {
    console.log(&amp;quot;Testing Initialize...&amp;quot;);
    /* The last element passed to RPC methods is always the transaction options. Because voteAccount is being created here, we are required to pass it as a signers array */
    await program.rpc.initialize({
      accounts: {
        voteAccount: voteAccount.publicKey,
        user: provider.wallet.publicKey,
        systemProgram: SystemProgram.programId,
      },
      signers: [voteAccount],
    });
    const account = await program.account.voteAccount.fetch(
      voteAccount.publicKey
    );
    console.log(&amp;quot;Crunchy: &amp;quot;, account.crunchy.toString());
    console.log(&amp;quot;Smooth: &amp;quot;, account.smooth.toString());
    assert.ok(
      account.crunchy.toString() == 0 &amp;amp;&amp;amp; account.smooth.toString() == 0
    );
  });
  it(&amp;quot;Votes correctly for crunchy&amp;quot;, async () =&amp;gt; {
    console.log(&amp;quot;Testing voteCrunchy...&amp;quot;);
    await program.rpc.voteCrunchy({
      accounts: {
        voteAccount: voteAccount.publicKey,
      },
    });
    const account = await program.account.voteAccount.fetch(
      voteAccount.publicKey
    );
    console.log(&amp;quot;Crunchy: &amp;quot;, account.crunchy.toString());
    console.log(&amp;quot;Smooth: &amp;quot;, account.smooth.toString());
    assert.ok(
      account.crunchy.toString() == 1 &amp;amp;&amp;amp; account.smooth.toString() == 0
    );
  });
  it(&amp;quot;Votes correctly for smooth&amp;quot;, async () =&amp;gt; {
    console.log(&amp;quot;Testing voteSmooth...&amp;quot;);
    await program.rpc.voteSmooth({
      accounts: {
        voteAccount: voteAccount.publicKey,
      },
    });
    const account = await program.account.voteAccount.fetch(
      voteAccount.publicKey
    );
    console.log(&amp;quot;Crunchy: &amp;quot;, account.crunchy.toString());
    console.log(&amp;quot;Smooth: &amp;quot;, account.smooth.toString());
    assert.ok(
      account.crunchy.toString() == 1 &amp;amp;&amp;amp; account.smooth.toString() == 1
    );
  });
});&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Here we can see our IDL in action, as we’re now using JavaScript to interact with our program’s RPC endpoints. Interacting with an Anchor program generally requires two key building blocks: a &lt;strong&gt;provider&lt;/strong&gt; and a &lt;strong&gt;program&lt;/strong&gt;. Provider is an abstraction of our connection to Solana, while program is an abstraction that combines our provider, IDL, and program ID. In testing, Anchor provides convenient methods for us to create these variables based on our environment.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;const provider = anchor.Provider.env()
anchor.setProvider(provider)

const program = anchor.workspace.CrunchyVsSmooth&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Later on, when we develop our client, we will have to construct these ourselves by interacting with the user’s Solana wallet.&lt;/p&gt;
&lt;p&gt;With these two building blocks, we can now start calling functions and accounts in our program using the convenient patterns &lt;code class=&quot;language-text&quot;&gt;program.rpc.[functionName]&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;program.account.[accountName]&lt;/code&gt;.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;await program.rpc.initialize({
  accounts: {
    voteAccount: voteAccount.publicKey,
    user: provider.wallet.publicKey,
    systemProgram: SystemProgram.programId,
  },
  signers: [voteAccount],
})

const account = await program.account.voteAccount.fetch(voteAccount.publicKey)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;One little detail that blew my mind was that Anchor automatically translates your accounts and functions from snake_case in Rust to camelCase in your JavaScript tests 🤯&lt;/p&gt;
&lt;p&gt;Before running our tests, let’s take care of two housekeeping issues:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Update your Program ID&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;When we built our Solana program earlier, Anchor generated a new program ID. Let’s go ahead and grab that.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;solana address -k target/deploy/crunchy_vs_smooth-keypair.json&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Take the output of this command and paste it into the &lt;code class=&quot;language-text&quot;&gt;declare_id!()&lt;/code&gt; macro in &lt;code class=&quot;language-text&quot;&gt;programs/crunchy-vs-smooth/src/lib.rs&lt;/code&gt;&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;rust&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// programs/crunchy-vs-smooth/src/lib.rs
declare_id!(&amp;quot;your-program-id&amp;quot;);&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;as well as the &lt;code class=&quot;language-text&quot;&gt;Anchor.toml&lt;/code&gt; file at the root of our directory.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;# Anchor.toml
[programs.localnet]
crunchy_vs_smooth = &amp;quot;your-program-id&amp;quot;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;h/t &lt;a href=&quot;https://twitter.com/dabit3&quot;&gt;Nader Dabit&lt;/a&gt; for sharing the above command.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. Make sure your Solana CLI is Configured for Localhost&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You’ll notice that we haven’t interacted with the Solana CLI yet. This is one of the few times in which we will. If this is your first time using the Solana CLI, please stop reading and go set up a &lt;a href=&quot;https://docs.solana.com/wallet-guide/cli&quot;&gt;command line wallet and its associated keypair path&lt;/a&gt;. If you think you may send real funds to this one day, please make sure to take your time and secure your backup phrase.&lt;/p&gt;
&lt;p&gt;Let’s check in on our current solana configuration&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana config get

# output
Config File: /Users/yourname/.config/solana/cli/config.yml
RPC URL: http://localhost:8899
WebSocket URL: ws://localhost:8900/ (computed)
Keypair Path: /Users/yourname/.config/solana/id.json
Commitment: confirmed&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;If your configuration is on any different network than the one above (such as &lt;code class=&quot;language-text&quot;&gt;devnet&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;mainnet-beta&lt;/code&gt;) you can switch it over to localhost with the following command&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana config set --url localhost&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;As you develop your application, you’ll likely be switching back and forth between &lt;code class=&quot;language-text&quot;&gt;localhost&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;devnet&lt;/code&gt; to iterate and then test your product against a live network. On each network, your CLI wallet address will be the same, but you will have to acquire SOL for each separate network. To do this, let’s first spin up a local node.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana-test-validator&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Then let’s check our address:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana address&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;And check our balance:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana balance&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;If you’re not on &lt;code class=&quot;language-text&quot;&gt;mainnet-beta&lt;/code&gt; you can airdrop yourself some SOL. On &lt;code class=&quot;language-text&quot;&gt;devnet&lt;/code&gt; you will likely be rate-limited to nothing more than 5-10 SOL, but on localnet we can live like kings. Let’s go ahead and treat ourselves to 1,000 SOL&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana airdrop 1000&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;With our program all set up and our localnet wallet flush with generational wealth, we can now finally test and deploy our program.&lt;/p&gt;
&lt;p&gt;One quirky thing about Anchor is the way it works with your &lt;a href=&quot;https://project-serum.github.io/anchor/cli/commands.html#test&quot;&gt;local validator while testing&lt;/a&gt;. Before running your tests, you must either shut down your local validator or add a &lt;code class=&quot;language-text&quot;&gt;--skip-local-validator&lt;/code&gt; flag to your test command. You can shut down your local validator by clicking on the terminal window in which it runs and pressing &lt;code class=&quot;language-text&quot;&gt;control&lt;/code&gt; + &lt;code class=&quot;language-text&quot;&gt;c&lt;/code&gt;. With our validator offline, Let’s run the JavaScript tests we looked at earlier.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor test&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;In your terminal, you should see messages about our three tests passing. Let’s go ahead and deploy our program. Fire up the validator again in a new terminal window:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana-test-validator&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;With the validator running, we can open a second new terminal window and begin streaming our logs:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana logs&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Our logs should be quiet for now. Let’s see what the say when they deploy our program:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor deploy&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;If you see a ton of transaction messages in your log terminal, followed by &lt;code class=&quot;language-text&quot;&gt;Deploy success&lt;/code&gt; in your original terminal, congrats! You just deployed your first Solana program.&lt;/p&gt;
&lt;h2&gt;Creating our React application to Interface with our Solana Program&lt;/h2&gt;
&lt;p&gt;With our program deployed to localnet, we can now build an app to interact with it. As this is a Solana-focused walkthrough, I won’t be spending much time on my &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth/tree/master/app&quot;&gt;React code&lt;/a&gt; which you can feel free to copy-paste. However, there are a few key considerations I’d like to share when creating a React app to interface with our Solana program.&lt;/p&gt;
&lt;h4&gt;Scaffolding our React App&lt;/h4&gt;
&lt;p&gt;Anchor was kind enough to get us started with an empty &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; directory. In the root of our project, we can overwrite this folder with a new React app by calling:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;npx create-react-app app&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;One thing to note is that &lt;code class=&quot;language-text&quot;&gt;create-react-app&lt;/code&gt; will automatically initialize a git repository within our new &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; directory. This will cause issues if we plan to keep all our code in one place and build on it with future commits. I got around this issue by renaming the hidden &lt;code class=&quot;language-text&quot;&gt;.git&lt;/code&gt; file via the terminal&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;mv app/.git app/..git&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;And then adding the newly renamed &lt;code class=&quot;language-text&quot;&gt;..git&lt;/code&gt; file to our &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;Even though it provides a &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; file at the root of our project, Anchor does not start us off with a git repository. If you want to track all your work together in git as one big project, you can call &lt;code class=&quot;language-text&quot;&gt;git init&lt;/code&gt; from the root directory and Anchor will help us ignore unnecessary folders like &lt;code class=&quot;language-text&quot;&gt;target&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;node_modules&lt;/code&gt;. For more information or links on how to install git, check out &lt;a href=&quot;https://git-scm.com/book/en/v2/Getting-Started-Installing-Git&quot;&gt;Git SCM&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Another thing to note is that your project should now have two &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; files, one at the root created by Anchor and one within &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; created by Create React App. When you’re working on your frontend, you’ll need to install your React dependencies within your &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; folder instead of at the project root.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Building Your Own Frontend&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If you want to continue by building your own frontend from scratch, read on. If you prefer to just copy-paste my example, skip down to the next section. Let’s change into our &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; directory and install Anchor, &lt;a href=&quot;https://solana-labs.github.io/solana-web3.js/&quot;&gt;Solana Web3.js&lt;/a&gt;, and &lt;a href=&quot;https://solana-labs.github.io/wallet-adapter/&quot;&gt;Solana Wallet Adapter&lt;/a&gt;.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;cd app

npm install @project-serum/anchor \
@solana/web3.js \
@solana/wallet-adapter-react \
@solana/wallet-adapter-wallets \
@solana/wallet-adapter-base&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;I chose to build my app with &lt;a href=&quot;https://mui.com/&quot;&gt;Material UI&lt;/a&gt; after seeing that Solana Labs created an open source wallet adapter for the project. If you want to build with Material UI as well, you should grab the following packages along with the notification library &lt;code class=&quot;language-text&quot;&gt;notistack&lt;/code&gt;.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;npm install @material-ui/core \
@material-ui/icons \
@solana/wallet-adapter-material-ui \
notistack&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;&lt;strong&gt;Using my Example Frontend&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If you’d rather skip ahead and work with a finished product, go ahead and replace your &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; directory with the &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; from &lt;a href=&quot;https://github.com/bfriel/crunchy-vs-smooth/tree/master/app&quot;&gt;my GitHub&lt;/a&gt;, change into the directory, and then install the dependencies.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;cd app

npm install&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;&lt;strong&gt;This guide will continue assuming you are using my example frontend.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Before we can spin up our frontend, you’ll need to take care of two housekeeping items:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Within &lt;code class=&quot;language-text&quot;&gt;app/src/App.js&lt;/code&gt;, uncomment the &lt;code class=&quot;language-text&quot;&gt;localnet&lt;/code&gt; variable and set &lt;code class=&quot;language-text&quot;&gt;network&lt;/code&gt; equal to it. Our network should be running on &lt;code class=&quot;language-text&quot;&gt;http://127.0.0.1:8899&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Copy the IDL that Anchor generated for you previously in &lt;code class=&quot;language-text&quot;&gt;target/idl/myapp.json&lt;/code&gt; over to &lt;code class=&quot;language-text&quot;&gt;app/src/idl.json&lt;/code&gt;. Make sure to replace what I had in there previously. At the time of this writing, Anchor does not automatically update an IDL in your &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; directory like it does in your &lt;code class=&quot;language-text&quot;&gt;target&lt;/code&gt; directory. That means that each time you update your anchor program and run &lt;code class=&quot;language-text&quot;&gt;anchor build&lt;/code&gt; you should copy over your IDL. Nader Dabit shared a script for automating this in &lt;a href=&quot;https://dev.to/dabit3/the-complete-guide-to-full-stack-solana-development-with-react-anchor-rust-and-phantom-3291&quot;&gt;his guide&lt;/a&gt; which I highly recommend reading.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you copied over my &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; directory, ran &lt;code class=&quot;language-text&quot;&gt;npm install&lt;/code&gt;, and took care of the two housekeeping items I just mentioned, then let’s spin up our frontend app. From a terminal within &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; call:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;npm start&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;After a brief moment, you should see a new browser window that looks like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e5be1a42e17ed36120168546035dbd36/3c1e5/newapp.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVQoz6WS21KDMBCGef8X8DW88t4ZxxEqtDpt7UHEHigtUAjkAA1k14Egoo5XfpOL3c3+2cmfGCTcXAqKA6SUrIGXZck5o5Qyxuq6RkSApsFL66uReIkqA3ShRcdBENi27TjOcrF4fppYlmWaZhzHfQMAyBoUgNGJWtpIEUKSJNltt663ed8dfN9PkpQQolTT8tnZ0Ij70TCIK8DrZX2zKgEU/gQQFWhxvLbO3iOPXeAHLI4oAmA+8n2RHXZZdWRwpCrkGAkMOXgxn73568Wsm6xStzqY9clhm3vi3ubeHUQTjMfqPF3F1TxS87AaeeTh9Wxv6fQkx36xT8tO3JPzS5JxQouhi9oTQQnLkotgw3pnGILC4d10CkoB6tWjU324MXwA+LL9l0Xft3Rs4D8wpJSUUiEEY81nopTmeS6lhL9BRNLyAW9KfEJ7sHMoAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;New App Example&quot;
        title=&quot;New App Example&quot;
        src=&quot;/static/e5be1a42e17ed36120168546035dbd36/fcda8/newapp.png&quot;
        srcset=&quot;/static/e5be1a42e17ed36120168546035dbd36/12f09/newapp.png 148w,
/static/e5be1a42e17ed36120168546035dbd36/e4a3f/newapp.png 295w,
/static/e5be1a42e17ed36120168546035dbd36/fcda8/newapp.png 590w,
/static/e5be1a42e17ed36120168546035dbd36/efc66/newapp.png 885w,
/static/e5be1a42e17ed36120168546035dbd36/c83ae/newapp.png 1180w,
/static/e5be1a42e17ed36120168546035dbd36/3c1e5/newapp.png 2854w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Please ignore the &lt;code class=&quot;language-text&quot;&gt;Could not fetch vote account&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Could not proxy request&lt;/code&gt; errors for now as we will correct those later.&lt;/p&gt;
&lt;h4&gt;Working with Phantom&lt;/h4&gt;
&lt;p&gt;To interact with our program, we’re going to have to set up a crypto wallet. At the time of this writing, I consider &lt;a href=&quot;https://phantom.app/&quot;&gt;Phantom&lt;/a&gt; to be the gold standard.&lt;/p&gt;
&lt;p&gt;If you don’t have a Phantom wallet yet, go ahead and install it on the browser of your choice. Once again, if you think you might ever send real money to this wallet, take your time and properly secure your recovery phase. If you’re totally new to crypto and this is your first wallet, go buy a hardware wallet such as a &lt;a href=&quot;https://www.ledger.com/&quot;&gt;Ledger&lt;/a&gt; or a &lt;a href=&quot;https://trezor.io/&quot;&gt;Trezor&lt;/a&gt; and get comfortable using it and recovering a throwaway seed before sending over real money. I have no affiliation with either product but they are the best $60 you’ll ever spend.&lt;/p&gt;
&lt;p&gt;With Phantom installed, we need to make sure that our Phantom wallet is in sync with the rest of our application. Remember that we deployed our program to localnet, so our Phantom wallet should be on the same network. Make sure you are still running &lt;code class=&quot;language-text&quot;&gt;solana-test-validator&lt;/code&gt; and then follow the steps in the gif below:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/99d2d25d49a8a126f9c457f05adad7ff/phantom.gif&quot; alt=&quot;New App Example&quot;&gt;&lt;/p&gt;
&lt;p&gt;This address is different from the CLI wallet address we used earlier. You’ll want to join me in granting your Phantom wallet another 1,000 localnet SOL. To do that, copy your Phantom wallet address like I do in the gif above and paste it into the following command:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana airdrop 1000 &amp;lt;your-phantom-address-here&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Alternatively, you can send your Phantom wallet some localnet SOL from the command line wallet you made earlier. To do that, enter:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;solana transfer &amp;lt;your-phantom-address-here&amp;gt; &amp;lt;amount-to-send&amp;gt; --allow-unfunded-recipient&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;With your Phantom wallet set to localnet, go ahead and connect to our app by clicking on the blue “Select Wallet” button. You should be greeted with a green “Connected” message.&lt;/p&gt;
&lt;h4&gt;Interacting with the Anchor IDL&lt;/h4&gt;
&lt;p&gt;Let’s take a look at how we can interact with our program from a React frontend. Go ahead and open up &lt;code class=&quot;language-text&quot;&gt;app/src/components/Main.jsx&lt;/code&gt;. There’s a lot happening in the file, but I want to focus on the &lt;code class=&quot;language-text&quot;&gt;getVotes()&lt;/code&gt; function within our &lt;code class=&quot;language-text&quot;&gt;useEffect()&lt;/code&gt; hook.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;async function getVotes() {
  const connection = new Connection(network, preflightCommitment)
  const provider = new Provider(connection, wallet, preflightCommitment)
  const program = new Program(idl, programID, provider)
  try {
    const account = await program.account.voteAccount.fetch(
      voteAccount.publicKey
    )
    setVotes({
      crunchy: parseInt(account.crunchy.toString()),
      smooth: parseInt(account.smooth.toString()),
    })
  } catch (error) {
    console.log(&amp;quot;could not getVotes: &amp;quot;, error)
  }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Remember back to when we were testing our Rust program, I mentioned the two key building blocks required to interact with Anchor programs via RPC: &lt;strong&gt;provider&lt;/strong&gt; and &lt;strong&gt;program&lt;/strong&gt;. Here we can see how we can construct these again from within our React client. Solana Web3.js can provide us our &lt;code class=&quot;language-text&quot;&gt;Connection&lt;/code&gt;, and the parameters &lt;code class=&quot;language-text&quot;&gt;network&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;preflightCommitment&lt;/code&gt; can simply be hardcoded. What’s left for us to bring together is &lt;code class=&quot;language-text&quot;&gt;programID&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;idl&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;wallet&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;As you recall, we already copied over the IDL from our &lt;code class=&quot;language-text&quot;&gt;target&lt;/code&gt; directory into our React app’s &lt;code class=&quot;language-text&quot;&gt;src&lt;/code&gt; folder. We can import that IDL and check that item off our list:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import idl from &amp;quot;../idl.json&amp;quot;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;With our IDL now accessible on our frontend, we can snag our &lt;code class=&quot;language-text&quot;&gt;programID&lt;/code&gt; out of it and wrap it within a Web3.js &lt;code class=&quot;language-text&quot;&gt;PublicKey&lt;/code&gt;:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;export const programID = new PublicKey(idl.metadata.address)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;What’s left for us to handle is &lt;code class=&quot;language-text&quot;&gt;wallet&lt;/code&gt;. Thankfully, the &lt;code class=&quot;language-text&quot;&gt;@solana/wallet-adapter-react&lt;/code&gt; package has our back here. If our component is properly nested within the necessary &lt;code class=&quot;language-text&quot;&gt;&amp;lt;WalletProvider&gt;&lt;/code&gt; (see &lt;code class=&quot;language-text&quot;&gt;App.js&lt;/code&gt;) we can simply set our wallet equal to the convenient &lt;code class=&quot;language-text&quot;&gt;useWallet()&lt;/code&gt; hook:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;import { useWallet } from &amp;quot;@solana/wallet-adapter-react&amp;quot;

const wallet = useWallet()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;The rest of our program interactions follow the same &lt;code class=&quot;language-text&quot;&gt;program.rpc.[functionName]&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;program.account.[accountName]&lt;/code&gt; patterns we explored earlier. Within &lt;code class=&quot;language-text&quot;&gt;Main.jsx&lt;/code&gt;, you can see I’ve set up two functions for interacting with our RPC methods: &lt;code class=&quot;language-text&quot;&gt;initializeVoting&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;handleVote&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you try to initialize our program via the blue button in the center of the page, you’ll likely see the following message: &lt;code class=&quot;language-text&quot;&gt;Error: TypeError: Cannot read properties of null (reading &apos;publicKey&apos;)&lt;/code&gt;. This is because we are missing our &lt;code class=&quot;language-text&quot;&gt;voteAccount&lt;/code&gt; keypair. If you recall back to &lt;code class=&quot;language-text&quot;&gt;tests&lt;/code&gt;, we defined our vote account as a random keypair:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;javascript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;const voteAccount = anchor.web3.Keypair.generate()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;This is fine for testing and local development, but if we were to do the same in our React app we would generate a new keypair on every site refresh. This would mean that each new visitor would have to call &lt;code class=&quot;language-text&quot;&gt;initialize&lt;/code&gt; and then see our vote count start at 0. Not ideal.&lt;/p&gt;
&lt;h4&gt;Serving our React app with Node&lt;/h4&gt;
&lt;p&gt;One naive way to get around this issue is to store our &lt;code class=&quot;language-text&quot;&gt;voteAccount&lt;/code&gt; keypair on a backend server and then route our RPC calls via that backend server. If you open up &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; within our &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; folder, you’ll see I already added following line to the root of our JSON object:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;json&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;  &amp;quot;proxy&amp;quot;: &amp;quot;http://localhost:3001&amp;quot;,&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;This will let us proxy calls to a backend server that is running on PORT 3001.&lt;/p&gt;
&lt;p&gt;In a new terminal, change back out to the root of our project and install &lt;a href=&quot;https://expressjs.com/&quot;&gt;Express&lt;/a&gt;.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;cd ..

# in the crunchy-vs-smooth root directory
npm install express&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Now we can whip up a quick and dirty Express server to persist our &lt;code class=&quot;language-text&quot;&gt;voteAccount&lt;/code&gt; keypair. Go ahead and copy my &lt;code class=&quot;language-text&quot;&gt;index.js&lt;/code&gt; file to the root of our directory.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;🚨 ALERT: I do not consider this code to be secure. Do not use in production apps with actual funds. This is for demonstrative purposes only.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;const path = require(&amp;quot;path&amp;quot;);
const anchor = require(&amp;quot;@project-serum/anchor&amp;quot;);
const express = require(&amp;quot;express&amp;quot;);

const voteAccount = anchor.web3.Keypair.generate();

const PORT = process.env.PORT || 3001;

const app = express();

app.use(express.static(path.resolve(__dirname, &amp;quot;app/build&amp;quot;)));

app.get(&amp;quot;/voteAccount&amp;quot;, (req, res) =&amp;gt; {
  res.json({ voteAccount });
});

app.get(&amp;quot;*&amp;quot;, (req, res) =&amp;gt; {
  res.sendFile(path.resolve(__dirname, &amp;quot;app/build&amp;quot;, &amp;quot;index.html&amp;quot;));
});

app.listen(PORT, () =&amp;gt; {
  console.log(`Server listening on ${PORT}`);
});
&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;blockquote&gt;
&lt;p&gt;🚨 ALERT: I do not consider this code to be secure. Do not use in production apps with actual funds. This is for demonstrative purposes only.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;With my disclaimer out of the way, let’s fire up our express server&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;# in the crunchy-vs-smooth root directory
node index.js

# output
Server listening on 3001&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;Then let’s kill the terminal that’s running our existing React app and then restart it:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;# in crunchy-vs-smooth/app
npm start&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;You should now be able to click on the “Initialize Program” button and then vote for your favorite type of peanut butter!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/896a98c896de41c1f32d745644c4c5f2/0d7fe/ivoted.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.10810810810811%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACDklEQVQoz5WTXWsTQRSG93d66U/wVgSlaGmaNmnBKthbRb0UCoLFD0SsHwVJE1KaijQxG9s0md3Nzn7MzswjO5uWRvHCAy/nzDDnnfecOeOt12vc33rI2nqDldoqtVrdodHYoNHccH690aTR3KTZ3HTxSq3usLpa595yjWs31rh+e5uNrUd4/MOEEEwmE8IwZDabMR6POT39RRzP/jp7GEArqGJPa0OhFEVRoJRCa00QBHQ6HYd2u033sOviVqtFr9dDSunOqXkelNAYXVxRaM0lsjQhSRJkkiKigEk0JU4SkjQjlglZrjAWB1t6Klhr8TIpyXLj7rD8r1VUJhHoXFYli94HJt+eMvu+i/75Fjt6D/4bBn6fTz7s+4p9v+CrXzj/xS/4PCy9Zq+f8u44ZGevS384qgjjcEIejUAJKCTWlV2Q5AXT1CJSM4d1a6ksxlq0scTKEikYTiVjEVaESmnyQldtPG/B0WPs8XOQw4vmLhT5Q2heHCl2eorT2Li9Ik8xuuLwXII1Lk2PPqIPHqA72zA7qbpkjHvRUlFp3XPNk4OUZ+2Uk0AvXOke5c822zlkkhMEgsFg4Eal3+8jggCjsgXlJclVeGEWEqQB00QQpAJrCqc4kZIoitxMnp2dVbEQZHnuxqVUXBJcipjH3p1XSyzt3uXmy1ssv14hVemiYmvdj/lz7yrJhS8H/TcsBYJN57hI/wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Voted Screen&quot;
        title=&quot;Voted Screen&quot;
        src=&quot;/static/896a98c896de41c1f32d745644c4c5f2/fcda8/ivoted.png&quot;
        srcset=&quot;/static/896a98c896de41c1f32d745644c4c5f2/12f09/ivoted.png 148w,
/static/896a98c896de41c1f32d745644c4c5f2/e4a3f/ivoted.png 295w,
/static/896a98c896de41c1f32d745644c4c5f2/fcda8/ivoted.png 590w,
/static/896a98c896de41c1f32d745644c4c5f2/efc66/ivoted.png 885w,
/static/896a98c896de41c1f32d745644c4c5f2/c83ae/ivoted.png 1180w,
/static/896a98c896de41c1f32d745644c4c5f2/0d7fe/ivoted.png 2875w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I’d like to reiterate that my Express server is not meant to be considered production-ready. Outside of security, another big drawback to storing our &lt;code class=&quot;language-text&quot;&gt;voteAccount&lt;/code&gt; keypair on a backend server is that we are beholden to our hosting provider. If our server goes down, our keypair is lost. A much better alternative is to use something called a &lt;a href=&quot;https://docs.solana.com/developing/programming-model/calling-between-programs#program-derived-addresses&quot;&gt;Program Derived Address&lt;/a&gt; which is native to Solana. &lt;del&gt;I may explore this in a future post&lt;/del&gt; (&lt;strong&gt;UPDATE&lt;/strong&gt;: I wrote a follow up post on PDAs which can be found &lt;a href=&quot;https://www.brianfriel.xyz/understanding-program-derived-addresses/&quot;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;h2&gt;Deploying our completed work for the rest of the world to see&lt;/h2&gt;
&lt;p&gt;If you made it this far, take a deep breath. The hard stuff is over.&lt;/p&gt;
&lt;p&gt;Deploying to a live network is very straightforward. The process mirrors the same one we took when we deployed to localnet.&lt;/p&gt;
&lt;p&gt;Here is a handy list I use to make sure I’m covering all my bases whenever I switch networks:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Set your Solana configuration&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;# replace devnet with your desired network (i.e. localhost, testnet, mainnet-beta)
solana config set --url devnet&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;
&lt;p&gt;Copy this network to your &lt;code class=&quot;language-text&quot;&gt;Anchor.toml&lt;/code&gt; file&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Rebuild your Anchor program and make sure your program ID matches what’s in &lt;code class=&quot;language-text&quot;&gt;Anchor.toml&lt;/code&gt; (it usually does)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code language=&quot;bash&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor build&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;Deploy your program&lt;/li&gt;
&lt;/ol&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;anchor deploy&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;
&lt;p&gt;In &lt;code class=&quot;language-text&quot;&gt;app/src/App.js&lt;/code&gt; update the network url to your desired network (i.e. &lt;code class=&quot;language-text&quot;&gt;clusterApiUrl(&quot;devnet&quot;)&lt;/code&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Update network settings in your Phantom wallet&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;Deploying to Heroku&lt;/h4&gt;
&lt;p&gt;Because this is a small hobby project and I wanted to get an MVP up quickly, I decided to deploy it to &lt;a href=&quot;https://www.heroku.com/&quot;&gt;Heroku&lt;/a&gt;. If you host your code on GitHub, they make it easy to connect your account and deploy in one click.&lt;/p&gt;
&lt;p&gt;If you’re considering launching a serious project on Solana, I would highly recommend finding a more robust hosting solution. If you were around for the Degen Ape Academy launch, you might recall that Heroku experienced &lt;a href=&quot;https://twitter.com/rajgokal/status/1426344733316554753&quot;&gt;a few growing pains&lt;/a&gt; when dealing with the influx of demand.&lt;/p&gt;
&lt;p&gt;The last item I’ll leave you with is my deploy script, which should be added to &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; at the root of the directory&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;json&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;  &amp;quot;scripts&amp;quot;: {
    &amp;quot;build&amp;quot;: &amp;quot;cd app &amp;amp;&amp;amp; npm install &amp;amp;&amp;amp; npm run build&amp;quot;
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;If you followed along until now, thank you! Hopefully you have a better understanding of how to go about building and experimenting with your own small projects.&lt;/p&gt;
&lt;h2&gt;Potential Improvements&lt;/h2&gt;
&lt;p&gt;I built this app in around three days, but if I had more time I would definitely want to implement a number of improvements, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Replacing my voteAccount keypair with a Program Derived Address&lt;/li&gt;
&lt;li&gt;Refactoring my program’s instruction handlers down to a singular vote function&lt;/li&gt;
&lt;li&gt;Adding feedback in between casting and confirming a vote on my React frontend&lt;/li&gt;
&lt;li&gt;Showing voting analytics&lt;/li&gt;
&lt;li&gt;Adding better transaction instruction metadata&lt;/li&gt;
&lt;li&gt;Experimenting with enforcing voting rules (e.g. 1 account, 1 vote)&lt;/li&gt;
&lt;li&gt;Showing the entirety of a user’s voting history, not just the votes that ocurred during this session&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Acknowledgements&lt;/h2&gt;
&lt;p&gt;Special thanks to everyone who wrote early guides on Solana development. In particular I’d like to thank &lt;a href=&quot;https://twitter.com/dabit3&quot;&gt;Nader Dabit&lt;/a&gt; for &lt;a href=&quot;https://dev.to/dabit3/the-complete-guide-to-full-stack-solana-development-with-react-anchor-rust-and-phantom-3291&quot;&gt;The Complete Guide to Full Stack Solana Development with React, Anchor, Rust, and Phantom&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/paulxpaulxpaulx&quot;&gt;Paulx&lt;/a&gt; for &lt;a href=&quot;https://paulx.dev/blog/2021/01/14/programming-on-solana-an-introduction/&quot;&gt;Programming on Solana - An Introduction&lt;/a&gt;. I’d also like to thank all those who are active in the Anchor Discord, especially &lt;a href=&quot;https://twitter.com/armaniferrante&quot;&gt;Armani Ferrante&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/0xjcaa&quot;&gt;@xjcaa&lt;/a&gt; who answered my questions.&lt;/p&gt;
&lt;p&gt;If you found this helpful please let me know via &lt;a href=&quot;https://twitter.com/bfriel_&quot;&gt;Twitter&lt;/a&gt;!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Bitcoin on Ethereum]]></title><description><![CDATA[This article was originally published on castlefunds.com. Decentralized finance (DeFi) burst onto the scene this summer amidst a flurry of…]]></description><link>https://brianfriel.xyz/btc-on-ethereum/</link><guid isPermaLink="false">https://brianfriel.xyz/btc-on-ethereum/</guid><pubDate>Sun, 20 Sep 2020 23:46:37 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;This article was originally published on &lt;a href=&quot;https://castlefunds.com&quot;&gt;castlefunds.com&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Decentralized finance (DeFi) burst onto the scene this summer amidst a flurry of innovation happening on the Ethereum network. Fueled by permissionless software development on top of blockchain-enforced contracts, a Cambrian explosion of new projects arose surrounding financial services such as lending, trading, and synthetic asset issuance. But while the 100x returns and catastrophic collapses of some of these projects dominated headlines, a new trend has quietly begun taking hold: More and more bitcoin (BTC) continues to move over to Ethereum.&lt;/p&gt;
&lt;p&gt;Since Ethereum’s inception in 2015, the two networks have remained completely separate and incompatible with each other. Recent developments, however, have now enabled investors to lockup their bitcoin on the Bitcoin network and mint “tokenized” BTC on Ethereum, combining Bitcoin’s power as a digital store of value with the diversity of activities available on Ethereum.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cdaf8a39701c0b3b3ae5cc50359b6553/f4b34/dune-analytics-wbtc-growth.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQY052PTUvEMBCG+/+v/gFP4kHw6lEUxJsrih/oVnbpslWrTZombdIkjySLuohefOFlMpOZJ5MCIMb4byd55/Heo7qO4i/gp37WtvMQA0S4qB9orWFZvfwOTBJCUJZljsla6w0kJFBkCj73NUKytzrGhBHd9d/A9NQ2UErBfP6I1j1dJxGixSRoCF/bj4PjcH3KrjrCRpdrRZr3PjL5kGM+T4E0l+6cC9nWeYx19NaxkoKbpuJgcc7O7IT9szsGO22AWg9oMzGOgU6NqN4yjAEpDaLVKOV4fdPUjaKWhqfmnVm95LJZcl09c3slWdxbJufzLz8AxHHQ4vQmIqkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;WBTC Growth&quot;
        title=&quot;WBTC Growth&quot;
        src=&quot;/static/cdaf8a39701c0b3b3ae5cc50359b6553/fcda8/dune-analytics-wbtc-growth.png&quot;
        srcset=&quot;/static/cdaf8a39701c0b3b3ae5cc50359b6553/12f09/dune-analytics-wbtc-growth.png 148w,
/static/cdaf8a39701c0b3b3ae5cc50359b6553/e4a3f/dune-analytics-wbtc-growth.png 295w,
/static/cdaf8a39701c0b3b3ae5cc50359b6553/fcda8/dune-analytics-wbtc-growth.png 590w,
/static/cdaf8a39701c0b3b3ae5cc50359b6553/efc66/dune-analytics-wbtc-growth.png 885w,
/static/cdaf8a39701c0b3b3ae5cc50359b6553/c83ae/dune-analytics-wbtc-growth.png 1180w,
/static/cdaf8a39701c0b3b3ae5cc50359b6553/f4b34/dune-analytics-wbtc-growth.png 1457w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;At the time of this writing, over 125,000 BTC valued at ~$1.3 billion dollars is active on Ethereum, up from around 1,000 at the beginning of this year. Represented as ERC-20 tokens, these bitcoins are free to lend, trade, and serve as collateral for a rapidly growing list of DeFi applications. The growth of this new trend has been staggering, with no signs of slowing down despite the recent market volatility.&lt;/p&gt;
&lt;p&gt;The most popular mechanism for minting bitcoin onto Ethereum is &lt;a href=&quot;https://www.bitgo.com/&quot;&gt;BitGo&lt;/a&gt;’s Wrapped Bitcoin (WBTC). The process, illustrated below, involves custodying bitcoin with BitGo and issuing tokenized representations onto Ethereum in a 1:1 ratio. As a KYC/AML compliant process, WBTC mainly caters to large institutions, a list of which can be found on their &lt;a href=&quot;https://wbtc.network/dashboard/order-book&quot;&gt;online orderbook&lt;/a&gt;. In recent months, numerous alternative methods have arisen including &lt;a href=&quot;https://synthetix.io/&quot;&gt;Synthetix&lt;/a&gt;’s sBTC, &lt;a href=&quot;https://renproject.io/&quot;&gt;Ren&lt;/a&gt;’s renBTC, and &lt;a href=&quot;https://keep.network/&quot;&gt;Keep&lt;/a&gt;’s tBTC. All three seek to decentralize this issuance process, either via synthetic representations in the case of sBTC, or trust-minimized collateralization via renBTC or tBTC. To date, however, WBTC accounts for over 74% of all tokenized bitcoin, suggesting this movement is largely driven by institutional players.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/17b7bf6d56e80435f17064f5016b6501/6a068/wbtc.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgABBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeykTJx//8QAGhABAAIDAQAAAAAAAAAAAAAAAQIRABASIf/aAAgBAQABBQI6t9IFRw1//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBICEx/9oACAEBAAY/ApaR03af/8QAGRABAQADAQAAAAAAAAAAAAAAAREAIFFx/9oACAEBAAE/IYeUmFUIe4klXdH/2gAMAwEAAgADAAAAEBAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAAIBBQAAAAAAAAAAAAAAAQARMRAhQVHw/9oACAEBAAE/EGnuOZX1Sw8FHRh6uLDiYpp//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;WBTC Growth&quot;
        title=&quot;WBTC Growth&quot;
        src=&quot;/static/17b7bf6d56e80435f17064f5016b6501/1c72d/wbtc.jpg&quot;
        srcset=&quot;/static/17b7bf6d56e80435f17064f5016b6501/a80bd/wbtc.jpg 148w,
/static/17b7bf6d56e80435f17064f5016b6501/1c91a/wbtc.jpg 295w,
/static/17b7bf6d56e80435f17064f5016b6501/1c72d/wbtc.jpg 590w,
/static/17b7bf6d56e80435f17064f5016b6501/a8a14/wbtc.jpg 885w,
/static/17b7bf6d56e80435f17064f5016b6501/6a068/wbtc.jpg 960w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;What is all this tokenized bitcoin doing on Ethereum? Analysis from &lt;a href=&quot;https://duneanalytics.com/&quot;&gt;Dune Analytics&lt;/a&gt; shows an uptick in usage this summer across numerous DeFi platforms. Chief amongst these are lending platforms &lt;a href=&quot;https://aave.com/&quot;&gt;Aave&lt;/a&gt; and &lt;a href=&quot;https://compound.finance/&quot;&gt;Compound&lt;/a&gt;, which let depositors borrow against their WBTC collateral and have at times offered attractive variable yields on lending WBTC. Other DeFi applications include &lt;a href=&quot;https://uniswap.org/&quot;&gt;Uniswap&lt;/a&gt; and &lt;a href=&quot;https://balancer.fi/&quot;&gt;Balancer&lt;/a&gt;, which let WBTC depositors collect trading fees in return for the liquidity provided on their platforms.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a6bb4ebd191af2ab5e8e8da2109b629b/f4b34/dune-analytics-wbtc-usage.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVQY033M7UvbYBjF4fzlgghubZ4nUZukL+JwOLHGisLayTaK7MOYWDYp6aeJ+FZLqWmSPkmatoq/rR376oELDtw3R5t5Hq+Zep1Xbh7TTodZu8309o4oUmixEPynhCQReWKho6Sx6BOxihI6kZDEUqKEYDT/l4KxIcgMSfr2DUm9wW23hxZbNmrBIrPWCJwKqV2kb+pcmCW+GzXu9XXGa4LY2mBsF3hyLJRp0cs73BQq+Hmd9EuT52fQJusmc0+m4LzcpLgf4364wt1ospxzWXIPKFfqNMQON/kCPelwlrMpbm+S+7pL6bSGu1ul9esn82jtzX0uKnucbR1S/NYiV62xbDms7LzDalV5H3zCvqwj2x/ZOm5Q+nyI8WOP8uAEt3vK7yOP6+0O/nnv3+BDN8D3UwaPCYmKCINHonBIoIaMsoRhGKFSRZiEDNJgYTRL8IOArJ8w6cZM+ynZMOXl7+Af+qONNMBs4TkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;WBTC Usage&quot;
        title=&quot;WBTC Usage&quot;
        src=&quot;/static/a6bb4ebd191af2ab5e8e8da2109b629b/fcda8/dune-analytics-wbtc-usage.png&quot;
        srcset=&quot;/static/a6bb4ebd191af2ab5e8e8da2109b629b/12f09/dune-analytics-wbtc-usage.png 148w,
/static/a6bb4ebd191af2ab5e8e8da2109b629b/e4a3f/dune-analytics-wbtc-usage.png 295w,
/static/a6bb4ebd191af2ab5e8e8da2109b629b/fcda8/dune-analytics-wbtc-usage.png 590w,
/static/a6bb4ebd191af2ab5e8e8da2109b629b/efc66/dune-analytics-wbtc-usage.png 885w,
/static/a6bb4ebd191af2ab5e8e8da2109b629b/c83ae/dune-analytics-wbtc-usage.png 1180w,
/static/a6bb4ebd191af2ab5e8e8da2109b629b/f4b34/dune-analytics-wbtc-usage.png 1457w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Whatever the killer app may end up being, the trend is clear: Tokenized bitcoin is here to stay. We believe that tokenized bitcoin offers the best of both worlds. Namely, that bitcoin holders get access to a myriad array of DeFi applications while keeping the attack surface of the Bitcoin network itself small and highly secure. As the largest, most liquid digital asset with the longest track record, we believe that Bitcoin will continue to exist across multiple domains and will cement itself as the most versatile digital store of value.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Photo by &lt;a href=&quot;https://unsplash.com/@modestasu&quot;&gt;Modestas Urbonas&lt;/a&gt; on &lt;a href=&quot;https://unsplash.com/&quot;&gt;Unsplash&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Early Lending Opportunities in Crypto]]></title><description><![CDATA[Introduction The traditional world of finance is about to undergo a large shift. For the first time, anyone in the world is able to send…]]></description><link>https://brianfriel.xyz/early-lending-opportunities-in-crypto/</link><guid isPermaLink="false">https://brianfriel.xyz/early-lending-opportunities-in-crypto/</guid><pubDate>Wed, 18 Sep 2019 23:46:37 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;The traditional world of finance is about to undergo a large shift. For the first time, anyone in the world is able to send money to anyone else quickly, cheaply, and without any bank or government’s permission. Today, cryptocurrency is a young and volatile speculative instrument. In the coming years, however, it will be the payment rails that enable global financial participation.&lt;/p&gt;
&lt;p&gt;A common deterrent for practical applications of &lt;a href=&quot;https://bitcoin.org/&quot;&gt;Bitcoin&lt;/a&gt; and other cryptocurrencies today is that their prices swing wildly. Overtime, some of these cryptocurrencies may become stable units of account, but for the time being it is extremely difficult to conduct any business in them while their prices fluctuate unpredictably.&lt;/p&gt;
&lt;p&gt;To address this problem of price volatility, various blockchain-based tokens have arisen with the sole purpose of maintaining a stable value. These assets are called &lt;strong&gt;Stablecoins&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;What’s a Stablecoin?&lt;/h2&gt;
&lt;p&gt;A &lt;em&gt;stablecoin&lt;/em&gt; is a cryptocurrency designed to minimize the volatility of its price, relative to some stable asset (such as the dollar) or a basket of assets.&lt;/p&gt;
&lt;p&gt;Most stablecoins are simple tokens that live on existing blockchains such as Bitcoin or &lt;a href=&quot;https://www.ethereum.org/&quot;&gt;Ethereum&lt;/a&gt;. These tokens are backed 1-1 by real USD sitting in a trusted bank account. While primitive in design, they allow people to get their dollars into the crypto ecosystem so that they can send money over blockchains and interact with various blockchain-based applications. A prime example of this type of stablecoin is &lt;a href=&quot;https://www.coinbase.com/usdc&quot;&gt;USDC&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Another, more advanced type of stablecoin is one which is backed by a basket of assets. While it remains to be seen how these can hold up during periods of extreme stress, these stablecoins are more decentralized in nature. The most well known example of this is &lt;a href=&quot;https://makerdao.com/dai/&quot;&gt;DAI&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For the purpose of this primer, we will focus only on &lt;strong&gt;USDC&lt;/strong&gt; and &lt;strong&gt;DAI&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;USDC&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Market cap rank #25 — $412M market cap — $263M daily volume — As of 9/17/2019&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/77815e371e0e00e1fa3099e315a4e960/5a190/usdc.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 29.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgUlEQVQY02WRS2tTURSF160lTloLKfZhSG2xog6EUgoiPkuIt4OetXYkqYpILaGkhJYKIlEnzozppCWDgor+AKH/QdtoDRnlobYT/Rk6u3ITjQMHm733GuzDdz6Mre97sbV9APC8e+8ngHhPbLWCAMDcrRWQAmUgrdNlnvu393QyeWEezji2XEFfdm/YNluVRLEepLZaH/uzH0YDwEveWY+Q6qcsStogZUN/jo60M3Uf6Rbubn9Folh/nntzGDx99/3X0quDwC/WNpPno6e5sDjuZHnK0pT5lCUoXaHsOmWTlE07KUnZVUrnnAQsvvwGv1R/kX19EDzb+fFz5e1hcKPU2PBnxqeYytx0ssuU5SjLUHaNslnKLlE2Rdltyp5QZpRdDNExlP+EaK5yIlP+UvVLjSBTbtUG1pojhQs4Op9aiJPqcx3EEHc0xHJUzFHHKYXYA46KUNbbRj71sOqdfPAZQP5I5P7uGeBx79ijJgpnAWfptpSOBHWl/Pd3/CtJ+A30PJUwcallHAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;USDC Logo&quot;
        title=&quot;USDC Logo&quot;
        src=&quot;/static/77815e371e0e00e1fa3099e315a4e960/fcda8/usdc.png&quot;
        srcset=&quot;/static/77815e371e0e00e1fa3099e315a4e960/12f09/usdc.png 148w,
/static/77815e371e0e00e1fa3099e315a4e960/e4a3f/usdc.png 295w,
/static/77815e371e0e00e1fa3099e315a4e960/fcda8/usdc.png 590w,
/static/77815e371e0e00e1fa3099e315a4e960/5a190/usdc.png 800w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;USDC (or “USD Coin”) is the most well-known regulated stablecoin, and the most popular regulated stablecoin by both total market cap and daily trading volume. It is an ERC-20 token, which means that it lives on the Ethereum blockchain and can be sent to anyone with an Ethereum address, anywhere in the world, using a small amount of ETH as gas to power the transaction.&lt;/p&gt;
&lt;p&gt;While the USDC token lives on the Ethereum blockchain, 100% of all dollars deposited for it are stored in a special bank account administered by &lt;a href=&quot;https://www.coinbase.com/&quot;&gt;Coinbase&lt;/a&gt;
that is constantly monitored and audited.&lt;/p&gt;
&lt;p&gt;Along with the advantage of sending USDC to any address in the world, the digital nature of USDC allows for much easier and programmable lending, payroll, and crowdfunding. It is divisible down to as little as 0.000001 cents.&lt;/p&gt;
&lt;p&gt;This system is great for moving dollars in and out of the Ethereum ecosystem, but is ultimately prone to a single point of failure — The special bank account.&lt;/p&gt;
&lt;h2&gt;DAI&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Market cap rank #69 — $85M market cap — $4M daily volume — As of 9/17/2019&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 178px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a00358e24b122a24029f9f0e60eadf3c/43e0d/dai.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEEUlEQVQ4y3VUXU9cVRTdwLuxD+0PMGmMX2kf2kSwFmlmKNFo9EFjoilWG4L4YmNMGn3DpFCVJxvjm000mtZKC0xhBoYPpVUKAyMpdPiYGqCxMNxyzwydGZh7z9nL7DMzSKqel7l3zrnrrL32XouyM59Sduo9cn+tr7z0KBEyI7R6de/+/Py5s36qb9xzYxsmEzc6Hfd9d3zVu9c5lJ355MNEO+3Ryc8IQMXyD5UV9/sPkLp5gixYZuyNypULJKsin2ht0+lJDzqH/1vsKfjO8NqDqeZ3AVATEaW691U44SfIMhOwyTP0SGH5wgj8dPEjwGOjtTzqpYvsrY4yAMPGk/88eya/gvx823kBlbX0HRFd2lNkZsHYl3MFZs1gLaCMlUvsR46w6n2JPWdKQJmNB2Z7mc8FB/lEaweQkvIrrWZSZomZgAknS4CXLoKjR6HXf4c73g7VXQfPiRf3jA97MaBNNon02Juv5qebiVav7N2v05OF4ilhZoqPyz/BhA8D69ehNUMthuHeOAPVc+whUGNv91Z7ZlqIqki6KQ0QzXaYrVyG6TsIvnvV6qm3M1DzPVCLfXBHT0N1vwDP+QPl8uWI6JmZaHyZZDRKO3oHrPcZ8J1v5ZIi4OYS1O0f4S6EoBZ64Y60lEDjvEPVeNj+8+tvSOas1FXmu1fYhA+B578qdxooKPg3TkBF34ab6IRauFZkOtwEFQrAuz9tdZTT2/d6RkmG1n68FmETOcRm6Dh48jR46iNw/GPwb2/BjzwP1VMHN/I61OBJuIMnoaKNcLvq4IYCrDfvWAy9HkmSzsTtrPB2inn2A+brNeDhozD91TCRavBALfxoECoUhNtdB9VVC9VdC9V7DO61amRnPmfWBQvopyJzJHYqlWdg8oy5FiB2BDz5InisHjwahB8N2PLcviBUfz3UYAM2ItXI3f6yrIwvP4W/OgdIvFkU1tdWR+l4ogWYqAHHG4B4APpmACoagDsYhBo6jo3ws7vBwAyfzRa2FjvOkRhdvCmjxOzjH9D3weM1QLwBeiIAJWCDRbDs7BdlMGmwtaTJLsD9JVhNkhpi9NJg67LldjPVsYb/YsbMRtjZQSysfD9gPa2TrSSpIYNpvbnLx6xzVlM99hzcSA2y/wKzfoZW48YJP3UgPXyYbJ4Jcn7+7Hkxup16NtraSt7MFvu3mjg328Y7mhmfy8zMgzlsxk418lIHwblcRRKOkmcWNNHaYXLJcuzpkkCa/ZzElrEV2I6iOHdqwmzGTr0DFbJJ85jkliRtqmtfBVnQFElqeGuhGSuB8R+OVkg3pQGimRN++qBlBlR2vUYUayeyse2En7ThKBtb080kqSFGF2+KnbTTn5ShlTmT0ZBuSkWiGZyfqx6nItja8Cv0N6ovDwZYuPm7AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;DAI Logo&quot;
        title=&quot;DAI Logo&quot;
        src=&quot;/static/a00358e24b122a24029f9f0e60eadf3c/43e0d/dai.png&quot;
        srcset=&quot;/static/a00358e24b122a24029f9f0e60eadf3c/12f09/dai.png 148w,
/static/a00358e24b122a24029f9f0e60eadf3c/43e0d/dai.png 178w&quot;
        sizes=&quot;(max-width: 178px) 100vw, 178px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Instead of being backed 1-1 by an actual dollar in a bank account, DAI attempts to keep a peg to the US dollar through its parent system, controlled by the cryptocurrency &lt;a href=&quot;https://makerdao.com/&quot;&gt;Maker&lt;/a&gt;. Specifically, Maker gathers Collateralized Debt Positions, or &lt;strong&gt;CDPs,&lt;/strong&gt; from people looking to borrow DAI. CDPs began as just ETH, but are expanding to include multiple cryptocurrencies as collateral. Maker itself has a token which has a limited supply and is used to vote on its central banking-like policies via an online organization named MakerDAO.&lt;/p&gt;
&lt;p&gt;Assets deposited inside a CDP can only be retrieved once the borrower has paid back the initial DAI they borrowed plus interest. Active CDPs must always hold a higher collateral value than the value of the debt the user has, otherwise they are liquidated and sold off.&lt;/p&gt;
&lt;p&gt;MakerDAO/DAI has been in development since 2014, with heavy sponsorship from prominent venture capitalists including Andreesen Horowitz. DAI has been able to handle market fluctuations to this today, but is still considered experimental technology and is riskier than USDC.&lt;/p&gt;
&lt;p&gt;Those looking to learn more about the inner workings of this system should check out &lt;a href=&quot;https://medium.com/mycrypto/what-is-dai-and-how-does-it-work-742d09ba25d6&quot;&gt;Sharon Manrique’s overview on DAI&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;The Lending Opportunity&lt;/h2&gt;
&lt;p&gt;One of the most exciting aspects of stablecoins is the freedom they enable for borrowers and lenders. Instead of asking a traditional bank for a loan, early crypto adopters are able to borrow money directly from their peers via blockchain-based smart contracts that ensure the transaction is fair and the borrower is properly collateralized. These systems of smart contracts act as global liquidity pools, or &lt;strong&gt;money markets&lt;/strong&gt;, for crypto.&lt;/p&gt;
&lt;p&gt;The most popular crypto money markets today include &lt;a href=&quot;https://compound.finance/&quot;&gt;Compound&lt;/a&gt;, &lt;a href=&quot;https://dydx.exchange/&quot;&gt;dYdX&lt;/a&gt;, and &lt;a href=&quot;https://fulcrum.trade/&quot;&gt;Fulcrum&lt;/a&gt;. For the rest of this primer, we’ll focus on &lt;strong&gt;Compound&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Currently, there exists a big opportunity for lenders to receive outsized returns on their stablecoins. At the time of this writing, lenders can receive &lt;strong&gt;5.21% APR for USDC and 7.43% APR for DAI on Compound&lt;/strong&gt; — well above the best in class 2.63% APR returned by the finance app &lt;a href=&quot;https://www.wealthfront.com/&quot;&gt;Wealthfront&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Who might be borrowing these stablecoins? &lt;a href=&quot;https://www.dharma.io/&quot;&gt;Dharma&lt;/a&gt;, a soon-to-launch frontend for Compound, speculates that these borrowers are often traders taking leveraged positions, or the crypto-rich making large personal purchases with the gains on their cryptocurrencies that have appreciated in value, without having to sell the crypto.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://unchainedpodcast.com/how-youll-earn-interest-on-your-crypto-with-compound-ep-82/&quot;&gt;In a podcast with Laura Shin&lt;/a&gt;, Robert Leshner, the founder of Compound, stated the core demand for borrowing comes from small crypto hedge funds looking to margin trade and/or short in order to differentiate their returns.&lt;/p&gt;
&lt;h2&gt;Compound&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/766b310783057e9dfd6721fe5b7ae776/78597/compound.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.10810810810811%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJElEQVQoz3WS204UQRCGJzEguIASL4yIKMZnMB6CKL6NMT6ExmfQaPQVjERvBI0oh710eQF22dOsm8DuHHq6q6r7N90wG1Hp5Et3T//9V01VR/cfrGD54SPcunMPt+8uYWl5BZfm5nFmfBJnz01jfHJqxNhEBWN/7P9HdGVhEddu3MT8wiIuzy9g7up1zMxeDGYTlZkRk1PnUZmZRWX6wonvfxO9fPUaa+tfsPrxE77/2Axsbe9gp1oN889aDc+ev8Cbt+/w9dsGPq+tY3unGs7LeXNrG7XdXTx+8hRRvdGAH2ma4bThL+7V67DOodD6VN37D6uIcqXQbLfR6cao7zfRi2PI4ABMBiJyhLXIc4VWuxPY22uglwzQpxy21IiAxSIiYqhcQSsNywInAnicG0UmZhgi+OBKFyAmiBMI7LHiSKsNIdJEONAKQ9ZIrAmws3D+9ywj5jwYak3IUoIpLNgApnCw4oLOr1ViQ9BIEaGjU/RZYSg6YKxAnEVuCTHlIGEUBeGwT8gOLdIDgc4thBysdWGdD48NCyLsq0Ew8kX3RuRsyNIbdikLhrpgqIxB2gV8diVsHFR6bEgi0E7AzoVK+AZ4Uw9bO6qhL3hZLR/YZ1bCLOEsGPpNpxNjv9XGYJiceAb+ibS7MVgEuSrQaLbQ6nTBzP/oer/6IXDkO5OkGYZJGrpILOEgNMIQ0ixDYQxUoTFMkqD1mZSa8gWkWY5CG/wGS0guCFv8AO4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The Compound Interface&quot;
        title=&quot;The Compound Interface&quot;
        src=&quot;/static/766b310783057e9dfd6721fe5b7ae776/fcda8/compound.png&quot;
        srcset=&quot;/static/766b310783057e9dfd6721fe5b7ae776/12f09/compound.png 148w,
/static/766b310783057e9dfd6721fe5b7ae776/e4a3f/compound.png 295w,
/static/766b310783057e9dfd6721fe5b7ae776/fcda8/compound.png 590w,
/static/766b310783057e9dfd6721fe5b7ae776/efc66/compound.png 885w,
/static/766b310783057e9dfd6721fe5b7ae776/78597/compound.png 947w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The leading money market protocol today is Compound. At the time of this writing, over $160M are earning interest on Compound alone. As a protocol built on the Ethereum blockchain, Compound pools individual crypto positions and algorithmically derives interest rates based on the supply of assets in its pool and the demand to borrow assets. Suppliers and borrowers interact directly with the protocol and use the floating interest rate provided by Compound. Because individual users are not being matched with each other, there is no concept of negotiations, and users are free to enter and exit positions at any time.&lt;/p&gt;
&lt;p&gt;Compound is built by a company (also called Compound) which takes a small percentage of the interest from every transaction. The company is led by &lt;a href=&quot;https://twitter.com/rleshner&quot;&gt;Robert Leshner&lt;/a&gt; and backed with $8M+ by VCs including Coinbase Ventures. Currently, the company provides a centralized price oracle to the network and controls a few key parameters such as the collateral requirement and the types of markets that are available. Leshner has stated that his goal is to decentralize the company out of the equation in the future.&lt;/p&gt;
&lt;p&gt;While the company provides a standard user interface for interacting with the protocol, the open-source nature of the protocol allows any number of third-parties to create their own connections to the network. Already, we are seeing the beginnings of third-party robo-advisor services, such as Dharma and &lt;a href=&quot;https://www.staked.us/&quot;&gt;Staked&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;How it Works&lt;/h3&gt;
&lt;p&gt;When users supply assets to the Compound pool address, whether for lending or as collateral, they receive a type of ERC-20 called a &lt;strong&gt;cToken&lt;/strong&gt;. There is a different kind of cToken for each asset supported by Compound (i.e. cUSDC in exchange for USDC), but they all share the same basic functionality.&lt;/p&gt;
&lt;p&gt;cTokens entitle their owners to an increasing quantity of the underlying asset that was supplied to the pool. As the balances in a money market accrue interest, which is a function of borrowing demand, cTokens become convertible for an increasing amount of the underlying asset.&lt;/p&gt;
&lt;p&gt;It is important to note that borrowers also receive interest on the collateral they post to Compound, as the collateral also goes into the liquidity pool and is treated the same as what is lent.&lt;/p&gt;
&lt;h3&gt;Benefits&lt;/h3&gt;
&lt;p&gt;Compound aggregates the supply of each user into a single balance, making each supplied asset a fungible resource available to the protocol. This offers much greater liquidity than direct lending and removes the need for a matching engine. Unless every asset in a market is borrowed, users can withdraw their assets at any time, without waiting for maturity. This also allows for partial withdrawals.&lt;/p&gt;
&lt;p&gt;cTokens create an interesting unbundling of money from accounts in the traditional sense. With cTokens, the money itself yields the interest — Not the account. Being ERC-20, cTokens could in theory be sent elsewhere, allow for lenders to programmatically extend their receipts. This is unexplored territory, but could allowing for interesting secondary market dynamics in the future. For now, cTokens are essentially used for 3 things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;To track balances and accrued interest for the assets that are lent.&lt;/li&gt;
&lt;li&gt;As a prerequisite for borrowing from Compound (i.e. you must first put up collateral).&lt;/li&gt;
&lt;li&gt;to send to cold storage Ethereum addresses.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Interest Rate Mechanics&lt;/h3&gt;
&lt;p&gt;Everytime a transaction occurs on Compound, the interest rate is updated to compound the interest since the previous transaction. Since Ethereum’s block time is only ~15 seconds, Compound’s fastest compounding frequency is roughly 15 seconds, meaning that interest compounds nearly continuously.&lt;/p&gt;
&lt;h3&gt;Collateral and Reserves&lt;/h3&gt;
&lt;p&gt;Compound safeguards lenders through over-collateralization. The amount of collateral required for a loan is based on the quality of the asset supplied, as measured by its liquidity and volume on major exchanges. This is represented as a &lt;strong&gt;collateral factor&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;For example, if I want to borrow 1000 USDC from Compound and the collateral factor is 0.66, the 1000 USDC I am borrowing must never exceed 66% percent of what I supply to Compound as collateral. Whether I supply USDC, or some other crypto such as ETH, the value of that collateral must never drop below $1500 or I will be liquidated. Liquidation occurs when the value of the collateral provided falls below the borrowing power. This ensures that lenders are always protected from default risk. Since collateral factors constantly adjust based on market conditions, it is my responsibility as the borrower to ensure that they are properly over-collateralized at all times.&lt;/p&gt;
&lt;p&gt;Developer Aziz Jalel provides &lt;a href=&quot;https://azizjalel.github.io/compoundcalc/&quot;&gt;a convenient tool for calculating this&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Compound polls the exchange rates from top cryptocurrency exchanges to determine the borrowing capacity and collateral requirements. This price oracle is currently centralized and polls from Bittrex, Poloniex, Binance, and Coinbase. There are plans to decentralize this oracle in the future.&lt;/p&gt;
&lt;p&gt;Each cToken contract has its own reserves, currently set to 10%, which acts as both a liquidity cushion and as funds available for a “just in case” situation.&lt;/p&gt;
&lt;h3&gt;Putting it All Together (An Example)&lt;/h3&gt;
&lt;p&gt;Let’s say you supply 1,000 USDC to the Compound protocol with the intent on earning some interest. The cUSDC/USDC exchange rate at the time is 0.020010, so you receive 49,975.01 cUSDC (1,000/0.020010) as a receipt.&lt;/p&gt;
&lt;p&gt;A few months later, you decide it’s time to withdraw your USDC from the protocol. The exchange rate has now risen to 0.022010:&lt;/p&gt;
&lt;p&gt;Your 49,975.01 cUSDC is now equal to 1099.94 USDC, (49,975.01 * 0.022010).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You could withdraw 1099.94 USDC, which would redeem all 49,975.01 cUSDC.&lt;/li&gt;
&lt;li&gt;You could withdraw a portion, such as your original 1,000 USDC, which would redeem 45,433.89 cUSDC (keeping 4,541.12 cUSDC in your wallet that keeps earning interest).&lt;/li&gt;
&lt;li&gt;You could borrow any asset supported by Compound (such as ETH), as long as the value of whatever you borrow doesn’t exceed $725 (the 1099.94 USDC you have in the pool * the 66% collateral factor of USDC).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;It might seem like a niche experiment today, but networks like Compound are the first iterations of a new type of financial system — One that is global, with less friction, and easily accessible to anyone with an internet connection.&lt;/p&gt;
&lt;p&gt;This new system will not just happen over night. Large technical projects always come with unforeseen bugs and setbacks, and mainstream users will overreact to the headlines that surround them, both good and bad.&lt;/p&gt;
&lt;p&gt;It’s scary to put real money in a new technology, and especially so when that technology is difficult to understand.&lt;/p&gt;
&lt;p&gt;My goal in writing this was to help educate friends and family so they’re better prepared to think critically about the systems they invest with — Before they are inundated with ads for exceedingly high returns on their investments.&lt;/p&gt;</content:encoded></item></channel></rss>